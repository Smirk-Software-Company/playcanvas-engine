import { Debug, DebugHelper } from '../../core/debug.js';
import { Vec4 } from '../../core/math/vec4.js';
import { CULLFACE_NONE } from '../../platform/graphics/constants.js';
import { DebugGraphics } from '../../platform/graphics/debug-graphics.js';
import { DepthState } from '../../platform/graphics/depth-state.js';
import { RenderPass } from '../../platform/graphics/render-pass.js';
import { QuadRender } from './quad-render.js';

const _tempRect = new Vec4();

/**
 * Draws a screen-space quad using a specific shader.
 *
 * @param {import('../../platform/graphics/graphics-device.js').GraphicsDevice} device - The graphics device used to draw
 * the quad.
 * @param {import('../../platform/graphics/render-target.js').RenderTarget|undefined} target - The destination render
 * target. If undefined, target is the frame buffer.
 * @param {import('../../platform/graphics/shader.js').Shader} shader - The shader used for rendering the quad. Vertex
 * shader should contain `attribute vec2 vertex_position`.
 * @param {import('../../core/math/vec4.js').Vec4} [rect] - The viewport rectangle of the quad, in
 * pixels. Defaults to fullscreen (`0, 0, target.width, target.height`).
 * @param {import('../../core/math/vec4.js').Vec4} [scissorRect] - The scissor rectangle of the
 * quad, in pixels. Defaults to fullscreen (`0, 0, target.width, target.height`).
 */
function drawQuadWithShader(device, target, shader, rect, scissorRect) {
  // a valid target or a null target (framebuffer) are supported
  Debug.assert(target !== undefined);
  const useBlend = arguments[5];
  Debug.call(() => {
    if (useBlend !== undefined) {
      Debug.warnOnce('pc.drawQuadWithShader no longer accepts useBlend parameter, and blending state needs to be set up using GraphicsDevice.setBlendState.');
    }
  });
  device.setCullMode(CULLFACE_NONE);
  device.setDepthState(DepthState.NODEPTH);
  device.setStencilState(null, null);

  // prepare the quad for rendering with the shader
  const quad = new QuadRender(shader);

  // by default render to the whole render target
  if (!rect) {
    rect = _tempRect;
    rect.x = 0;
    rect.y = 0;
    rect.z = target ? target.width : device.width;
    rect.w = target ? target.height : device.height;
  }

  // prepare a render pass to render the quad to the render target
  const renderPass = new RenderPass(device, () => {
    DebugGraphics.pushGpuMarker(device, "drawQuadWithShader");
    quad.render(rect, scissorRect);
    DebugGraphics.popGpuMarker(device);
  });
  DebugHelper.setName(renderPass, `RenderPass-drawQuadWithShader${target ? `-${target.name}` : 'Framebuffer'}`);
  renderPass.init(target);
  renderPass.colorOps.clear = false;
  renderPass.depthStencilOps.clearDepth = false;

  // TODO: This is a workaround for the case where post-effects are used together with multi-sampled framebuffer. Last post-effect
  // renders into multi-sampled framebuffer (render pass A), which is typically followed by further rendering to this framebuffer,
  // in a separate render pass B (e.g. rendering UI). Those two render passes need to be merged into one, as they both render into
  // the same framebuffer. The workaround here is to store multi-sampled color buffer, instead of only resolving it, which is wasted
  // memory bandwidth. Without this we end up with a black result (or just UI), as multi-sampled color buffer is never written to.
  if (device.isWebGPU && target === null) {
    var _target$samples;
    const samples = (_target$samples = target == null ? void 0 : target.samples) != null ? _target$samples : device.samples;
    if (samples > 1) renderPass.colorOps.store = true;
  }
  renderPass.render();
  quad.destroy();
}

/**
 * Draws a texture in screen-space. Mostly used by post-effects.
 *
 * @param {import('../../platform/graphics/graphics-device.js').GraphicsDevice} device - The graphics device used to draw
 * the texture.
 * @param {import('../../platform/graphics/texture.js').Texture} texture - The source texture to be drawn. Accessible as
 * `uniform sampler2D * source` in shader.
 * @param {import('../../platform/graphics/render-target.js').RenderTarget} [target] - The destination render target.
 * Defaults to the frame buffer.
 * @param {import('../../platform/graphics/shader.js').Shader} [shader] - The optional custom shader used for rendering the texture.
 * @param {import('../../core/math/vec4.js').Vec4} [rect] - The viewport rectangle to use for the
 * texture, in pixels. Defaults to fullscreen (`0, 0, target.width, target.height`).
 * @param {import('../../core/math/vec4.js').Vec4} [scissorRect] - The scissor rectangle to use for
 * the texture, in pixels. Defaults to fullscreen (`0, 0, target.width, target.height`).
 */
function drawTexture(device, texture, target, shader, rect, scissorRect) {
  Debug.assert(!device.isWebGPU, 'pc.drawTexture is not currently supported on WebGPU platform.');
  const useBlend = arguments[6];
  Debug.call(() => {
    if (useBlend !== undefined) {
      Debug.warnOnce('pc.drawTexture no longer accepts useBlend parameter, and blending state needs to be set up using GraphicsDevice.setBlendState.');
    }
  });
  shader = shader || device.getCopyShader();
  device.constantTexSource.setValue(texture);
  drawQuadWithShader(device, target, shader, rect, scissorRect);
}

export { drawQuadWithShader, drawTexture };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVhZC1yZW5kZXItdXRpbHMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9zY2VuZS9ncmFwaGljcy9xdWFkLXJlbmRlci11dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWJ1ZywgRGVidWdIZWxwZXIgfSBmcm9tICcuLi8uLi9jb3JlL2RlYnVnLmpzJztcbmltcG9ydCB7IFZlYzQgfSBmcm9tICcuLi8uLi9jb3JlL21hdGgvdmVjNC5qcyc7XG5cbmltcG9ydCB7IENVTExGQUNFX05PTkUgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgRGVidWdHcmFwaGljcyB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL2RlYnVnLWdyYXBoaWNzLmpzJztcbmltcG9ydCB7IERlcHRoU3RhdGUgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9kZXB0aC1zdGF0ZS5qcyc7XG5pbXBvcnQgeyBSZW5kZXJQYXNzIH0gZnJvbSAnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvcmVuZGVyLXBhc3MuanMnO1xuaW1wb3J0IHsgUXVhZFJlbmRlciB9IGZyb20gJy4vcXVhZC1yZW5kZXIuanMnO1xuXG5jb25zdCBfdGVtcFJlY3QgPSBuZXcgVmVjNCgpO1xuXG4vKipcbiAqIERyYXdzIGEgc2NyZWVuLXNwYWNlIHF1YWQgdXNpbmcgYSBzcGVjaWZpYyBzaGFkZXIuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL2dyYXBoaWNzLWRldmljZS5qcycpLkdyYXBoaWNzRGV2aWNlfSBkZXZpY2UgLSBUaGUgZ3JhcGhpY3MgZGV2aWNlIHVzZWQgdG8gZHJhd1xuICogdGhlIHF1YWQuXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvcmVuZGVyLXRhcmdldC5qcycpLlJlbmRlclRhcmdldHx1bmRlZmluZWR9IHRhcmdldCAtIFRoZSBkZXN0aW5hdGlvbiByZW5kZXJcbiAqIHRhcmdldC4gSWYgdW5kZWZpbmVkLCB0YXJnZXQgaXMgdGhlIGZyYW1lIGJ1ZmZlci5cbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9zaGFkZXIuanMnKS5TaGFkZXJ9IHNoYWRlciAtIFRoZSBzaGFkZXIgdXNlZCBmb3IgcmVuZGVyaW5nIHRoZSBxdWFkLiBWZXJ0ZXhcbiAqIHNoYWRlciBzaG91bGQgY29udGFpbiBgYXR0cmlidXRlIHZlYzIgdmVydGV4X3Bvc2l0aW9uYC5cbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9jb3JlL21hdGgvdmVjNC5qcycpLlZlYzR9IFtyZWN0XSAtIFRoZSB2aWV3cG9ydCByZWN0YW5nbGUgb2YgdGhlIHF1YWQsIGluXG4gKiBwaXhlbHMuIERlZmF1bHRzIHRvIGZ1bGxzY3JlZW4gKGAwLCAwLCB0YXJnZXQud2lkdGgsIHRhcmdldC5oZWlnaHRgKS5cbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9jb3JlL21hdGgvdmVjNC5qcycpLlZlYzR9IFtzY2lzc29yUmVjdF0gLSBUaGUgc2Npc3NvciByZWN0YW5nbGUgb2YgdGhlXG4gKiBxdWFkLCBpbiBwaXhlbHMuIERlZmF1bHRzIHRvIGZ1bGxzY3JlZW4gKGAwLCAwLCB0YXJnZXQud2lkdGgsIHRhcmdldC5oZWlnaHRgKS5cbiAqL1xuZnVuY3Rpb24gZHJhd1F1YWRXaXRoU2hhZGVyKGRldmljZSwgdGFyZ2V0LCBzaGFkZXIsIHJlY3QsIHNjaXNzb3JSZWN0KSB7XG5cbiAgICAvLyBhIHZhbGlkIHRhcmdldCBvciBhIG51bGwgdGFyZ2V0IChmcmFtZWJ1ZmZlcikgYXJlIHN1cHBvcnRlZFxuICAgIERlYnVnLmFzc2VydCh0YXJnZXQgIT09IHVuZGVmaW5lZCk7XG5cbiAgICBjb25zdCB1c2VCbGVuZCA9IGFyZ3VtZW50c1s1XTtcbiAgICBEZWJ1Zy5jYWxsKCgpID0+IHtcbiAgICAgICAgaWYgKHVzZUJsZW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIERlYnVnLndhcm5PbmNlKCdwYy5kcmF3UXVhZFdpdGhTaGFkZXIgbm8gbG9uZ2VyIGFjY2VwdHMgdXNlQmxlbmQgcGFyYW1ldGVyLCBhbmQgYmxlbmRpbmcgc3RhdGUgbmVlZHMgdG8gYmUgc2V0IHVwIHVzaW5nIEdyYXBoaWNzRGV2aWNlLnNldEJsZW5kU3RhdGUuJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGRldmljZS5zZXRDdWxsTW9kZShDVUxMRkFDRV9OT05FKTtcbiAgICBkZXZpY2Uuc2V0RGVwdGhTdGF0ZShEZXB0aFN0YXRlLk5PREVQVEgpO1xuICAgIGRldmljZS5zZXRTdGVuY2lsU3RhdGUobnVsbCwgbnVsbCk7XG5cbiAgICAvLyBwcmVwYXJlIHRoZSBxdWFkIGZvciByZW5kZXJpbmcgd2l0aCB0aGUgc2hhZGVyXG4gICAgY29uc3QgcXVhZCA9IG5ldyBRdWFkUmVuZGVyKHNoYWRlcik7XG5cbiAgICAvLyBieSBkZWZhdWx0IHJlbmRlciB0byB0aGUgd2hvbGUgcmVuZGVyIHRhcmdldFxuICAgIGlmICghcmVjdCkge1xuICAgICAgICByZWN0ID0gX3RlbXBSZWN0O1xuICAgICAgICByZWN0LnggPSAwO1xuICAgICAgICByZWN0LnkgPSAwO1xuICAgICAgICByZWN0LnogPSB0YXJnZXQgPyB0YXJnZXQud2lkdGggOiBkZXZpY2Uud2lkdGg7XG4gICAgICAgIHJlY3QudyA9IHRhcmdldCA/IHRhcmdldC5oZWlnaHQgOiBkZXZpY2UuaGVpZ2h0O1xuICAgIH1cblxuICAgIC8vIHByZXBhcmUgYSByZW5kZXIgcGFzcyB0byByZW5kZXIgdGhlIHF1YWQgdG8gdGhlIHJlbmRlciB0YXJnZXRcbiAgICBjb25zdCByZW5kZXJQYXNzID0gbmV3IFJlbmRlclBhc3MoZGV2aWNlLCAoKSA9PiB7XG4gICAgICAgIERlYnVnR3JhcGhpY3MucHVzaEdwdU1hcmtlcihkZXZpY2UsIFwiZHJhd1F1YWRXaXRoU2hhZGVyXCIpO1xuICAgICAgICBxdWFkLnJlbmRlcihyZWN0LCBzY2lzc29yUmVjdCk7XG4gICAgICAgIERlYnVnR3JhcGhpY3MucG9wR3B1TWFya2VyKGRldmljZSk7XG4gICAgfSk7XG4gICAgRGVidWdIZWxwZXIuc2V0TmFtZShyZW5kZXJQYXNzLCBgUmVuZGVyUGFzcy1kcmF3UXVhZFdpdGhTaGFkZXIke3RhcmdldCA/IGAtJHt0YXJnZXQubmFtZX1gIDogJ0ZyYW1lYnVmZmVyJ31gKTtcbiAgICByZW5kZXJQYXNzLmluaXQodGFyZ2V0KTtcbiAgICByZW5kZXJQYXNzLmNvbG9yT3BzLmNsZWFyID0gZmFsc2U7XG4gICAgcmVuZGVyUGFzcy5kZXB0aFN0ZW5jaWxPcHMuY2xlYXJEZXB0aCA9IGZhbHNlO1xuXG4gICAgLy8gVE9ETzogVGhpcyBpcyBhIHdvcmthcm91bmQgZm9yIHRoZSBjYXNlIHdoZXJlIHBvc3QtZWZmZWN0cyBhcmUgdXNlZCB0b2dldGhlciB3aXRoIG11bHRpLXNhbXBsZWQgZnJhbWVidWZmZXIuIExhc3QgcG9zdC1lZmZlY3RcbiAgICAvLyByZW5kZXJzIGludG8gbXVsdGktc2FtcGxlZCBmcmFtZWJ1ZmZlciAocmVuZGVyIHBhc3MgQSksIHdoaWNoIGlzIHR5cGljYWxseSBmb2xsb3dlZCBieSBmdXJ0aGVyIHJlbmRlcmluZyB0byB0aGlzIGZyYW1lYnVmZmVyLFxuICAgIC8vIGluIGEgc2VwYXJhdGUgcmVuZGVyIHBhc3MgQiAoZS5nLiByZW5kZXJpbmcgVUkpLiBUaG9zZSB0d28gcmVuZGVyIHBhc3NlcyBuZWVkIHRvIGJlIG1lcmdlZCBpbnRvIG9uZSwgYXMgdGhleSBib3RoIHJlbmRlciBpbnRvXG4gICAgLy8gdGhlIHNhbWUgZnJhbWVidWZmZXIuIFRoZSB3b3JrYXJvdW5kIGhlcmUgaXMgdG8gc3RvcmUgbXVsdGktc2FtcGxlZCBjb2xvciBidWZmZXIsIGluc3RlYWQgb2Ygb25seSByZXNvbHZpbmcgaXQsIHdoaWNoIGlzIHdhc3RlZFxuICAgIC8vIG1lbW9yeSBiYW5kd2lkdGguIFdpdGhvdXQgdGhpcyB3ZSBlbmQgdXAgd2l0aCBhIGJsYWNrIHJlc3VsdCAob3IganVzdCBVSSksIGFzIG11bHRpLXNhbXBsZWQgY29sb3IgYnVmZmVyIGlzIG5ldmVyIHdyaXR0ZW4gdG8uXG4gICAgaWYgKGRldmljZS5pc1dlYkdQVSAmJiB0YXJnZXQgPT09IG51bGwpIHtcbiAgICAgICAgY29uc3Qgc2FtcGxlcyA9IHRhcmdldD8uc2FtcGxlcyA/PyBkZXZpY2Uuc2FtcGxlcztcbiAgICAgICAgaWYgKHNhbXBsZXMgPiAxKVxuICAgICAgICAgICAgcmVuZGVyUGFzcy5jb2xvck9wcy5zdG9yZSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmVuZGVyUGFzcy5yZW5kZXIoKTtcblxuICAgIHF1YWQuZGVzdHJveSgpO1xufVxuXG4vKipcbiAqIERyYXdzIGEgdGV4dHVyZSBpbiBzY3JlZW4tc3BhY2UuIE1vc3RseSB1c2VkIGJ5IHBvc3QtZWZmZWN0cy5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvZ3JhcGhpY3MtZGV2aWNlLmpzJykuR3JhcGhpY3NEZXZpY2V9IGRldmljZSAtIFRoZSBncmFwaGljcyBkZXZpY2UgdXNlZCB0byBkcmF3XG4gKiB0aGUgdGV4dHVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy90ZXh0dXJlLmpzJykuVGV4dHVyZX0gdGV4dHVyZSAtIFRoZSBzb3VyY2UgdGV4dHVyZSB0byBiZSBkcmF3bi4gQWNjZXNzaWJsZSBhc1xuICogYHVuaWZvcm0gc2FtcGxlcjJEICogc291cmNlYCBpbiBzaGFkZXIuXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvcmVuZGVyLXRhcmdldC5qcycpLlJlbmRlclRhcmdldH0gW3RhcmdldF0gLSBUaGUgZGVzdGluYXRpb24gcmVuZGVyIHRhcmdldC5cbiAqIERlZmF1bHRzIHRvIHRoZSBmcmFtZSBidWZmZXIuXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3Mvc2hhZGVyLmpzJykuU2hhZGVyfSBbc2hhZGVyXSAtIFRoZSBvcHRpb25hbCBjdXN0b20gc2hhZGVyIHVzZWQgZm9yIHJlbmRlcmluZyB0aGUgdGV4dHVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9jb3JlL21hdGgvdmVjNC5qcycpLlZlYzR9IFtyZWN0XSAtIFRoZSB2aWV3cG9ydCByZWN0YW5nbGUgdG8gdXNlIGZvciB0aGVcbiAqIHRleHR1cmUsIGluIHBpeGVscy4gRGVmYXVsdHMgdG8gZnVsbHNjcmVlbiAoYDAsIDAsIHRhcmdldC53aWR0aCwgdGFyZ2V0LmhlaWdodGApLlxuICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL2NvcmUvbWF0aC92ZWM0LmpzJykuVmVjNH0gW3NjaXNzb3JSZWN0XSAtIFRoZSBzY2lzc29yIHJlY3RhbmdsZSB0byB1c2UgZm9yXG4gKiB0aGUgdGV4dHVyZSwgaW4gcGl4ZWxzLiBEZWZhdWx0cyB0byBmdWxsc2NyZWVuIChgMCwgMCwgdGFyZ2V0LndpZHRoLCB0YXJnZXQuaGVpZ2h0YCkuXG4gKi9cbmZ1bmN0aW9uIGRyYXdUZXh0dXJlKGRldmljZSwgdGV4dHVyZSwgdGFyZ2V0LCBzaGFkZXIsIHJlY3QsIHNjaXNzb3JSZWN0KSB7XG4gICAgRGVidWcuYXNzZXJ0KCFkZXZpY2UuaXNXZWJHUFUsICdwYy5kcmF3VGV4dHVyZSBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBvbiBXZWJHUFUgcGxhdGZvcm0uJyk7XG5cbiAgICBjb25zdCB1c2VCbGVuZCA9IGFyZ3VtZW50c1s2XTtcbiAgICBEZWJ1Zy5jYWxsKCgpID0+IHtcbiAgICAgICAgaWYgKHVzZUJsZW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIERlYnVnLndhcm5PbmNlKCdwYy5kcmF3VGV4dHVyZSBubyBsb25nZXIgYWNjZXB0cyB1c2VCbGVuZCBwYXJhbWV0ZXIsIGFuZCBibGVuZGluZyBzdGF0ZSBuZWVkcyB0byBiZSBzZXQgdXAgdXNpbmcgR3JhcGhpY3NEZXZpY2Uuc2V0QmxlbmRTdGF0ZS4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgc2hhZGVyID0gc2hhZGVyIHx8IGRldmljZS5nZXRDb3B5U2hhZGVyKCk7XG4gICAgZGV2aWNlLmNvbnN0YW50VGV4U291cmNlLnNldFZhbHVlKHRleHR1cmUpO1xuICAgIGRyYXdRdWFkV2l0aFNoYWRlcihkZXZpY2UsIHRhcmdldCwgc2hhZGVyLCByZWN0LCBzY2lzc29yUmVjdCk7XG59XG5cbmV4cG9ydCB7IGRyYXdRdWFkV2l0aFNoYWRlciwgZHJhd1RleHR1cmUgfTtcbiJdLCJuYW1lcyI6WyJfdGVtcFJlY3QiLCJWZWM0IiwiZHJhd1F1YWRXaXRoU2hhZGVyIiwiZGV2aWNlIiwidGFyZ2V0Iiwic2hhZGVyIiwicmVjdCIsInNjaXNzb3JSZWN0IiwiRGVidWciLCJhc3NlcnQiLCJ1bmRlZmluZWQiLCJ1c2VCbGVuZCIsImFyZ3VtZW50cyIsImNhbGwiLCJ3YXJuT25jZSIsInNldEN1bGxNb2RlIiwiQ1VMTEZBQ0VfTk9ORSIsInNldERlcHRoU3RhdGUiLCJEZXB0aFN0YXRlIiwiTk9ERVBUSCIsInNldFN0ZW5jaWxTdGF0ZSIsInF1YWQiLCJRdWFkUmVuZGVyIiwieCIsInkiLCJ6Iiwid2lkdGgiLCJ3IiwiaGVpZ2h0IiwicmVuZGVyUGFzcyIsIlJlbmRlclBhc3MiLCJEZWJ1Z0dyYXBoaWNzIiwicHVzaEdwdU1hcmtlciIsInJlbmRlciIsInBvcEdwdU1hcmtlciIsIkRlYnVnSGVscGVyIiwic2V0TmFtZSIsIm5hbWUiLCJpbml0IiwiY29sb3JPcHMiLCJjbGVhciIsImRlcHRoU3RlbmNpbE9wcyIsImNsZWFyRGVwdGgiLCJpc1dlYkdQVSIsIl90YXJnZXQkc2FtcGxlcyIsInNhbXBsZXMiLCJzdG9yZSIsImRlc3Ryb3kiLCJkcmF3VGV4dHVyZSIsInRleHR1cmUiLCJnZXRDb3B5U2hhZGVyIiwiY29uc3RhbnRUZXhTb3VyY2UiLCJzZXRWYWx1ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFTQSxNQUFNQSxTQUFT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
