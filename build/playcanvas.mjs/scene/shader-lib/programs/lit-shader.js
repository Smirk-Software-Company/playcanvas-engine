import { SEMANTIC_POSITION, SEMANTIC_ATTR12, SEMANTIC_ATTR13, SEMANTIC_ATTR14, SEMANTIC_ATTR15, SEMANTIC_ATTR11, SEMANTIC_ATTR10, SEMANTIC_NORMAL, SEMANTIC_TANGENT, SEMANTIC_COLOR, SEMANTIC_ATTR8, SEMANTIC_ATTR9, SEMANTIC_BLENDWEIGHT, SEMANTIC_BLENDINDICES, PIXELFORMAT_RGBA8, SHADERTAG_MATERIAL, SEMANTIC_TEXCOORD0, SEMANTIC_TEXCOORD1 } from '../../../platform/graphics/constants.js';
import { shaderChunks } from '../chunks/chunks.js';
import { ChunkUtils } from '../chunk-utils.js';
import { SPRITE_RENDERMODE_SLICED, SPRITE_RENDERMODE_TILED, LIGHTSHAPE_SPHERE, LIGHTSHAPE_DISK, LIGHTSHAPE_RECT, SHADER_DEPTH, LIGHTTYPE_DIRECTIONAL, SHADOW_VSM32, LIGHTTYPE_OMNI, SHADOW_PCSS, SHADOW_VSM8, LIGHTSHAPE_PUNCTUAL, LIGHTTYPE_SPOT, FRESNEL_SCHLICK, SPECOCC_GLOSSDEPENDENT, SPECOCC_AO, SHADOW_PCF3, SHADOW_PCF5, SHADOW_PCF1, SHADOW_VSM16, SPECULAR_PHONG, shadowTypeToString, LIGHTFALLOFF_LINEAR, BLEND_NORMAL, BLEND_PREMULTIPLIED, BLEND_ADDITIVEALPHA, SHADER_PICK } from '../../constants.js';
import { LightsBuffer } from '../../lighting/lights-buffer.js';
import { ShaderPass } from '../../shader-pass.js';
import { validateUserChunks } from '../chunks/chunk-validation.js';
import { ShaderUtils } from '../../../platform/graphics/shader-utils.js';
import { ChunkBuilder } from '../chunk-builder.js';
import { ShaderGenerator } from './shader-generator.js';

const builtinAttributes = {
  vertex_normal: SEMANTIC_NORMAL,
  vertex_tangent: SEMANTIC_TANGENT,
  vertex_texCoord0: SEMANTIC_TEXCOORD0,
  vertex_texCoord1: SEMANTIC_TEXCOORD1,
  vertex_color: SEMANTIC_COLOR,
  vertex_boneWeights: SEMANTIC_BLENDWEIGHT,
  vertex_boneIndices: SEMANTIC_BLENDINDICES
};
const builtinVaryings = {
  vVertexColor: "vec4",
  vPositionW: "vec3",
  vNormalV: "vec3",
  vNormalW: "vec3",
  vTangentW: "vec3",
  vBinormalW: "vec3",
  vObjectSpaceUpW: "vec3",
  vUv0: "vec2",
  vUv1: "vec2"
};
class LitShader {
  constructor(device, options) {
    /**
     * @param {import('../../../platform/graphics/graphics-device.js').GraphicsDevice} device - The
     * graphics device.
     * @param {import('./lit-shader-options.js').LitShaderOptions} options - The
     * lit options.
     * @ignore
     */
    this.device = device;
    this.options = options;

    // resolve custom chunk attributes
    this.attributes = {
      vertex_position: SEMANTIC_POSITION
    };
    if (options.userAttributes) {
      for (const [semantic, name] of Object.entries(options.userAttributes)) {
        this.attributes[name] = semantic;
      }
    }
    if (options.chunks) {
      const userChunks = options.chunks;
      validateUserChunks(userChunks);
      this.chunks = Object.create(shaderChunks);
      for (const chunkName in shaderChunks) {
        if (userChunks.hasOwnProperty(chunkName)) {
          const chunk = userChunks[chunkName];
          for (const a in builtinAttributes) {
            if (builtinAttributes.hasOwnProperty(a) && chunk.indexOf(a) >= 0) {
              this.attributes[a] = builtinAttributes[a];
            }
          }
          this.chunks[chunkName] = chunk;
        }
      }
    } else {
      this.chunks = shaderChunks;
    }
    this.shaderPassInfo = ShaderPass.get(this.device).getByIndex(options.pass);
    this.shadowPass = this.shaderPassInfo.isShadow;
    this.lighting = options.lights.length > 0 || options.dirLightMapEnabled || options.clusteredLightingEnabled;
    this.reflections = !!options.reflectionSource;
    this.needsNormal = this.lighting || this.reflections || options.useSpecular || options.ambientSH || options.useHeights || options.enableGGXSpecular || options.clusteredLightingEnabled && !this.shadowPass || options.useClearCoatNormals;
    this.needsNormal = this.needsNormal && !this.shadowPass;
    this.needsSceneColor = options.useDynamicRefraction;
    this.needsScreenSize = options.useDynamicRefraction;
    this.needsTransforms = options.useDynamicRefraction;

    // generated by vshader
    this.varyings = "";
    this.varyingDefines = "";
    this.vshader = null;

    // supplied by caller
    this.frontendDecl = null;
    this.frontendCode = null;
    this.frontendFunc = null;
    this.lightingUv = null;

    // defines set by the shader generation
    this.defines = [];

    // generated by fshader
    this.fshader = null;
  }
  _vsAddBaseCode(code, chunks, options) {
    code += chunks.baseVS;
    if (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED || options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {
      code += chunks.baseNineSlicedVS;
    }
    return code;
  }
  _vsAddTransformCode(code, device, chunks, options) {
    code += this.chunks.transformVS;
    return code;
  }
  _setMapTransform(codes, name, id, uv) {
    const checkId = id + uv * 100;
    if (!codes[3][checkId]) {
      // upload a 3x2 matrix and manually perform the multiplication
      const varName = `texture_${name}MapTransform`;
      codes[0] += `uniform vec3 ${varName}0;\n`;
      codes[0] += `uniform vec3 ${varName}1;\n`;
      codes[1] += `varying vec2 vUV${uv}_${id};\n`;
      codes[2] += `   vUV${uv}_${id} = vec2(dot(vec3(uv${uv}, 1), ${varName}0), dot(vec3(uv${uv}, 1), ${varName}1));\n`;
      codes[3][checkId] = true;
    }
    return codes;
  }

  // Add "Base" Code section to fragment shader.
  _fsGetBaseCode() {
    const options = this.options;
    const chunks = this.chunks;
    let result = this.chunks.basePS;
    if (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED) {
      result += chunks.baseNineSlicedPS;
    } else if (options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {
      result += chunks.baseNineSlicedTiledPS;
    }
    return result;
  }

  // Add "Start" Code section to fragment shader.
  _fsGetStartCode(code, device, chunks, options) {
    let result = chunks.startPS;
    if (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED) {
      result += chunks.startNineSlicedPS;
    } else if (options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {
      result += chunks.startNineSlicedTiledPS;
    }
    return result;
  }
  _getLightSourceShapeString(shape) {
    switch (shape) {
      case LIGHTSHAPE_RECT:
        return 'Rect';
      case LIGHTSHAPE_DISK:
        return 'Disk';
      case LIGHTSHAPE_SPHERE:
        return 'Sphere';
      default:
        return '';
    }
  }
  generateVertexShader(useUv, useUnmodifiedUv, mapTransforms) {
    const device = this.device;
    const options = this.options;
    const chunks = this.chunks;
    let code = '';
    let codeBody = '';

    // code += chunks.baseVS;
    code = this._vsAddBaseCode(code, chunks, options);
    codeBody += "   vPositionW    = getWorldPosition();\n";
    if (this.options.pass === SHADER_DEPTH) {
      code += 'varying float vDepth;\n';
      code += '#ifndef VIEWMATRIX\n';
      code += '#define VIEWMATRIX\n';
      code += 'uniform mat4 matrix_view;\n';
      code += '#endif\n';
      code += '#ifndef CAMERAPLANES\n';
      code += '#define CAMERAPLANES\n';
      code += 'uniform vec4 camera_params;\n\n';
      code += '#endif\n';
      codeBody += "    vDepth = -(matrix_view * vec4(vPositionW,1.0)).z * camera_params.x;\n";
    }
    if (this.options.useInstancing) {
      this.attributes.instance_line1 = SEMANTIC_ATTR12;
      this.attributes.instance_line2 = SEMANTIC_ATTR13;
      this.attributes.instance_line3 = SEMANTIC_ATTR14;
      this.attributes.instance_line4 = SEMANTIC_ATTR15;
      this.attributes.instance_line5 = SEMANTIC_ATTR11;
      this.attributes.instance_line6 = SEMANTIC_ATTR10;
      code += chunks.instancingVS;
    }
    if (this.needsNormal) {
      this.attributes.vertex_normal = SEMANTIC_NORMAL;
      codeBody += "   vNormalW = getNormal();\n";
      if (options.reflectionSource === 'sphereMap' && device.fragmentUniformsCount <= 16) {
        code += chunks.viewNormalVS;
        codeBody += "   vNormalV    = getViewNormal();\n";
      }
      if (options.hasTangents && (options.useHeights || options.useNormals || options.enableGGXSpecular)) {
        this.attributes.vertex_tangent = SEMANTIC_TANGENT;
        code += chunks.tangentBinormalVS;
        codeBody += "   vTangentW   = getTangent();\n";
        codeBody += "   vBinormalW  = getBinormal();\n";
      } else if (options.enableGGXSpecular || !device.extStandardDerivatives) {
        codeBody += "   vObjectSpaceUpW = normalize(dNormalMatrix * vec3(0, 1, 0));\n";
      }
    }
    const maxUvSets = 2;
    for (let i = 0; i < maxUvSets; i++) {
      if (useUv[i]) {
        this.attributes["vertex_texCoord" + i] = "TEXCOORD" + i;
        code += chunks["uv" + i + "VS"];
        codeBody += "   vec2 uv" + i + " = getUv" + i + "();\n";
      }
      if (useUnmodifiedUv[i]) {
        codeBody += "   vUv" + i + " = uv" + i + ";\n";
      }
    }
    const codes = [code, this.varyings, codeBody, []];
    mapTransforms.forEach(mapTransform => {
      this._setMapTransform(codes, mapTransform.name, mapTransform.id, mapTransform.uv);
    });
    code = codes[0];
    this.varyings = codes[1];
    codeBody = codes[2];
    if (options.vertexColors) {
      this.attributes.vertex_color = SEMANTIC_COLOR;
      codeBody += "   vVertexColor = vertex_color;\n";
    }
    if (options.useMsdf && options.msdfTextAttribute) {
      this.attributes.vertex_outlineParameters = SEMANTIC_ATTR8;
      this.attributes.vertex_shadowParameters = SEMANTIC_ATTR9;
      codeBody += "    unpackMsdfParams();\n";
      code += chunks.msdfVS;
    }

    // morphing
    if (options.useMorphPosition || options.useMorphNormal) {
      if (options.useMorphTextureBased) {
        code += "#define MORPHING_TEXTURE_BASED\n";
        if (options.useMorphPosition) {
          code += "#define MORPHING_TEXTURE_BASED_POSITION\n";
        }
        if (options.useMorphNormal) {
          code += "#define MORPHING_TEXTURE_BASED_NORMAL\n";
        }

        // vertex ids attributes
        this.attributes.morph_vertex_id = SEMANTIC_ATTR15;
        const morphIdType = device.isWebGPU ? 'uint' : 'float';
        code += `attribute ${morphIdType} morph_vertex_id;\n`;
      } else {
        // set up 8 slots for morphing. these are supported combinations: PPPPPPPP, NNNNNNNN, PPPPNNNN
        code += "#define MORPHING\n";

        // first 4 slots are either position or normal
        if (options.useMorphPosition) {
          this.attributes.morph_pos0 = SEMANTIC_ATTR8;
          this.attributes.morph_pos1 = SEMANTIC_ATTR9;
          this.attributes.morph_pos2 = SEMANTIC_ATTR10;
          this.attributes.morph_pos3 = SEMANTIC_ATTR11;
          code += "#define MORPHING_POS03\n";
          code += "attribute vec3 morph_pos0;\n";
          code += "attribute vec3 morph_pos1;\n";
          code += "attribute vec3 morph_pos2;\n";
          code += "attribute vec3 morph_pos3;\n";
        } else if (options.useMorphNormal) {
          this.attributes.morph_nrm0 = SEMANTIC_ATTR8;
          this.attributes.morph_nrm1 = SEMANTIC_ATTR9;
          this.attributes.morph_nrm2 = SEMANTIC_ATTR10;
          this.attributes.morph_nrm3 = SEMANTIC_ATTR11;
          code += "#define MORPHING_NRM03\n";
          code += "attribute vec3 morph_nrm0;\n";
          code += "attribute vec3 morph_nrm1;\n";
          code += "attribute vec3 morph_nrm2;\n";
          code += "attribute vec3 morph_nrm3;\n";
        }

        // next 4 slots are either position or normal
        if (!options.useMorphNormal) {
          this.attributes.morph_pos4 = SEMANTIC_ATTR12;
          this.attributes.morph_pos5 = SEMANTIC_ATTR13;
          this.attributes.morph_pos6 = SEMANTIC_ATTR14;
          this.attributes.morph_pos7 = SEMANTIC_ATTR15;
          code += "#define MORPHING_POS47\n";
          code += "attribute vec3 morph_pos4;\n";
          code += "attribute vec3 morph_pos5;\n";
          code += "attribute vec3 morph_pos6;\n";
          code += "attribute vec3 morph_pos7;\n";
        } else {
          this.attributes.morph_nrm4 = SEMANTIC_ATTR12;
          this.attributes.morph_nrm5 = SEMANTIC_ATTR13;
          this.attributes.morph_nrm6 = SEMANTIC_ATTR14;
          this.attributes.morph_nrm7 = SEMANTIC_ATTR15;
          code += "#define MORPHING_NRM47\n";
          code += "attribute vec3 morph_nrm4;\n";
          code += "attribute vec3 morph_nrm5;\n";
          code += "attribute vec3 morph_nrm6;\n";
          code += "attribute vec3 morph_nrm7;\n";
        }
      }
    }
    if (options.skin) {
      this.attributes.vertex_boneWeights = SEMANTIC_BLENDWEIGHT;
      this.attributes.vertex_boneIndices = SEMANTIC_BLENDINDICES;
      code += ShaderGenerator.skinCode(device, chunks);
      code += "#define SKIN\n";
    } else if (options.useInstancing) {
      code += "#define INSTANCING\n";
    }
    if (options.screenSpace) {
      code += "#define SCREENSPACE\n";
    }
    if (options.pixelSnap) {
      code += "#define PIXELSNAP\n";
    }
    code = this._vsAddTransformCode(code, device, chunks, options);
    if (this.needsNormal) {
      code += chunks.normalVS;
    }
    code += "\n";
    code += chunks.startVS;
    code += codeBody;
    code += chunks.endVS;
    code += "}";

    // build varyings
    Object.keys(builtinVaryings).forEach(v => {
      if (code.indexOf(v) >= 0) {
        this.varyings += `varying ${builtinVaryings[v]} ${v};\n`;
        this.varyingDefines += `#define VARYING_${v.toUpperCase()}\n`;
      }
    });
    const shaderPassDefines = this.shaderPassInfo.shaderDefines;
    this.vshader = shaderPassDefines + this.varyings + code;
  }
  _fsGetBeginCode() {
    let code = this.shaderPassInfo.shaderDefines;
    for (let i = 0; i < this.defines.length; i++) {
      code += `#define ${this.defines[i]}\n`;
    }
    return code;
  }
  _fsGetPickPassCode() {
    let code = this._fsGetBeginCode();
    code += "uniform vec4 uColor;\n";
    code += this.varyings;
    code += this.varyingDefines;
    code += this.frontendDecl;
    code += this.frontendCode;
    code += ShaderGenerator.begin();
    code += this.frontendFunc;
    code += "    gl_FragColor = uColor;\n";
    code += ShaderGenerator.end();
    return code;
  }
  _fsGetDepthPassCode() {
    const chunks = this.chunks;
    let code = this._fsGetBeginCode();
    code += 'varying float vDepth;\n';
    code += this.varyings;
    code += this.varyingDefines;
    code += chunks.packDepthPS;
    code += this.frontendDecl;
    code += this.frontendCode;
    code += ShaderGenerator.begin();
    code += this.frontendFunc;
    code += "    gl_FragColor = packFloat(vDepth);\n";
    code += ShaderGenerator.end();
    return code;
  }
  _fsGetShadowPassCode() {
    const device = this.device;
    const options = this.options;
    const chunks = this.chunks;
    const varyings = this.varyings;
    const lightType = this.shaderPassInfo.lightType;
    let shadowType = this.shaderPassInfo.shadowType;

    // If not a directional light and using clustered, fall back to using PCF3x3 if shadow type isn't supported
    if (lightType !== LIGHTTYPE_DIRECTIONAL && options.clusteredLightingEnabled) {
      if (shadowType === SHADOW_VSM8 || shadowType === SHADOW_VSM16 || shadowType === SHADOW_VSM32 || shadowType === SHADOW_PCSS) {
        shadowType = SHADOW_PCF3;
      }
    }
    let code = this._fsGetBeginCode();
    if (device.extStandardDerivatives && !device.webgl2 && !device.isWebGPU) {
      code += 'uniform vec2 polygonOffset;\n';
    }
    if (shadowType === SHADOW_VSM32) {
      if (device.textureFloatHighPrecision) {
        code += '#define VSM_EXPONENT 15.0\n\n';
      } else {
        code += '#define VSM_EXPONENT 5.54\n\n';
      }
    } else if (shadowType === SHADOW_VSM16) {
      code += '#define VSM_EXPONENT 5.54\n\n';
    }
    if (lightType !== LIGHTTYPE_DIRECTIONAL) {
      code += 'uniform vec3 view_position;\n';
      code += 'uniform float light_radius;\n';
    }
    code += varyings;
    code += this.varyingDefines;
    code += this.frontendDecl;
    code += this.frontendCode;
    const mayPackDepth = shadowType === SHADOW_PCF1 || shadowType === SHADOW_PCF3 || shadowType === SHADOW_PCF5 || shadowType === SHADOW_PCSS;
    const mustPackDepth = lightType === LIGHTTYPE_OMNI && shadowType !== SHADOW_PCSS && !options.clusteredLightingEnabled;
    const usePackedDepth = mayPackDepth && !device.supportsDepthShadow || mustPackDepth;
    if (usePackedDepth) {
      code += chunks.packDepthPS;
    } else if (shadowType === SHADOW_VSM8) {
      code += "vec2 encodeFloatRG( float v ) {\n";
      code += "    vec2 enc = vec2(1.0, 255.0) * v;\n";
      code += "    enc = fract(enc);\n";
      code += "    enc -= enc.yy * vec2(1.0/255.0, 1.0/255.0);\n";
      code += "    return enc;\n";
      code += "}\n\n";
    }
    if (shadowType === SHADOW_PCSS) {
      code += shaderChunks.linearizeDepthPS;
    }
    code += ShaderGenerator.begin();
    code += this.frontendFunc;
    const isVsm = shadowType === SHADOW_VSM8 || shadowType === SHADOW_VSM16 || shadowType === SHADOW_VSM32;
    const applySlopeScaleBias = !device.webgl2 && device.extStandardDerivatives && !device.isWebGPU;

    // Use perspective depth for:
    // Directional: Always since light has no position
    // Spot: If not using VSM
    // Point: Never
    const usePerspectiveDepth = lightType === LIGHTTYPE_DIRECTIONAL || !isVsm && lightType === LIGHTTYPE_SPOT;

    // Flag if we are using non-standard depth, i.e gl_FragCoord.z
    let hasModifiedDepth = false;
    if (usePerspectiveDepth) {
      code += "    float depth = gl_FragCoord.z;\n";
    } else {
      code += "    float depth = min(distance(view_position, vPositionW) / light_radius, 0.99999);\n";
      hasModifiedDepth = true;
    }
    if (applySlopeScaleBias) {
      code += "    float minValue = 2.3374370500153186e-10; //(1.0 / 255.0) / (256.0 * 256.0 * 256.0);\n";
      code += "    depth += polygonOffset.x * max(abs(dFdx(depth)), abs(dFdy(depth))) + minValue * polygonOffset.y;\n";
      hasModifiedDepth = true;
    }
    if (usePackedDepth) {
      code += "    gl_FragColor = packFloat(depth);\n";
    } else if (!isVsm) {
      const exportR32 = shadowType === SHADOW_PCSS;
      if (exportR32) {
        code += "    gl_FragColor.r = depth;\n";
      } else {
        // If we end up using modified depth, it needs to be explicitly written to gl_FragDepth
        if (hasModifiedDepth) {
          code += "    gl_FragDepth = depth;\n";
        }
        code += "    gl_FragColor = vec4(1.0);\n"; // just the simplest code, color is not written anyway
      }
    } else if (shadowType === SHADOW_VSM8) {
      code += "    gl_FragColor = vec4(encodeFloatRG(depth), encodeFloatRG(depth*depth));\n";
    } else {
      code += chunks.storeEVSMPS;
    }
    code += ShaderGenerator.end();
    return code;
  }

  // the big one
  _fsGetLitPassCode() {
    const device = this.device;
    const options = this.options;
    const chunks = this.chunks;
    const decl = new ChunkBuilder();
    const func = new ChunkBuilder();
    const backend = new ChunkBuilder();
    const code = new ChunkBuilder();
    if (options.opacityFadesSpecular === false) {
      decl.append('uniform float material_alphaFade;');
    }
    if (options.useSpecular) {
      this.defines.push("LIT_SPECULAR");
      if (this.reflections) {
        this.defines.push("LIT_REFLECTIONS");
      }
      if (options.useClearCoat) {
        this.defines.push("LIT_CLEARCOAT");
      }
      if (options.fresnelModel > 0) {
        this.defines.push("LIT_SPECULAR_FRESNEL");
      }

      // enable conserve energy path in clustered chunk
      if (options.conserveEnergy) {
        this.defines.push("LIT_CONSERVE_ENERGY");
      }
      if (options.useSheen) {
        this.defines.push("LIT_SHEEN");
      }
      if (options.useIridescence) {
        this.defines.push("LIT_IRIDESCENCE");
      }
    }

    // FRAGMENT SHADER INPUTS: UNIFORMS
    const shadowTypeUsed = [];
    let numShadowLights = 0;
    let shadowedDirectionalLightUsed = false;
    let useVsm = false;
    let usePcss = false;
    let hasAreaLights = options.lights.some(function (light) {
      return light._shape && light._shape !== LIGHTSHAPE_PUNCTUAL;
    });

    // if clustered lighting has area lights enabled, it always runs in 'area lights mode'
    // TODO: maybe we should always use it and remove the other way?
    if (options.clusteredLightingEnabled && options.clusteredLightingAreaLightsEnabled) {
      hasAreaLights = true;
    }
    let areaLutsPrecision = 'highp';
    if (device.areaLightLutFormat === PIXELFORMAT_RGBA8) {
      // use offset and scale for rgb8 format luts
      decl.append("#define AREA_R8_G8_B8_A8_LUTS");
      areaLutsPrecision = 'lowp';
    }
    if (hasAreaLights || options.clusteredLightingEnabled) {
      decl.append("#define AREA_LIGHTS");
      decl.append(`uniform ${areaLutsPrecision} sampler2D areaLightsLutTex1;`);
      decl.append(`uniform ${areaLutsPrecision} sampler2D areaLightsLutTex2;`);
    }
    for (let i = 0; i < options.lights.length; i++) {
      const light = options.lights[i];
      const lightType = light._type;

      // skip uniform generation for local lights if clustered lighting is enabled
      if (options.clusteredLightingEnabled && lightType !== LIGHTTYPE_DIRECTIONAL) continue;
      const lightShape = hasAreaLights && light._shape ? light._shape : LIGHTSHAPE_PUNCTUAL;
      decl.append("uniform vec3 light" + i + "_color;");
      if (light._shadowType === SHADOW_PCSS && light.castShadows && !options.noShadow) {
        decl.append(`uniform float light${i}_shadowSearchArea;`);
        decl.append(`uniform vec4 light${i}_cameraParams;`);
      }
      if (lightType === LIGHTTYPE_DIRECTIONAL) {
        decl.append("uniform vec3 light" + i + "_direction;");
      } else {
        decl.append("uniform vec3 light" + i + "_position;");
        decl.append("uniform float light" + i + "_radius;");
        if (lightType === LIGHTTYPE_SPOT) {
          decl.append("uniform vec3 light" + i + "_direction;");
          decl.append("uniform float light" + i + "_innerConeAngle;");
          decl.append("uniform float light" + i + "_outerConeAngle;");
        }
      }
      if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
        if (lightType === LIGHTTYPE_DIRECTIONAL) {
          decl.append("uniform vec3 light" + i + "_position;");
        }
        decl.append("uniform vec3 light" + i + "_halfWidth;");
        decl.append("uniform vec3 light" + i + "_halfHeight;");
      }
      if (light.castShadows && !options.noShadow) {
        decl.append("uniform mat4 light" + i + "_shadowMatrix;");
        decl.append("uniform float light" + i + "_shadowIntensity;");

        // directional (cascaded) shadows
        if (lightType === LIGHTTYPE_DIRECTIONAL) {
          decl.append("uniform mat4 light" + i + "_shadowMatrixPalette[4];");
          decl.append("uniform float light" + i + "_shadowCascadeDistances[4];");
          decl.append("uniform float light" + i + "_shadowCascadeCount;");
        }
        decl.append("uniform vec4 light" + i + "_shadowParams;"); // Width, height, bias, radius
        if (lightType === LIGHTTYPE_DIRECTIONAL) {
          shadowedDirectionalLightUsed = true;
        }
        if (lightType === LIGHTTYPE_OMNI) {
          decl.append("uniform samplerCube light" + i + "_shadowMap;");
        } else {
          if (light._isPcf && device.supportsDepthShadow) {
            decl.append("uniform sampler2DShadow light" + i + "_shadowMap;");
          } else {
            decl.append("uniform sampler2D light" + i + "_shadowMap;");
          }
        }
        numShadowLights++;
        shadowTypeUsed[light._shadowType] = true;
        if (light._isVsm) useVsm = true;
        if (light._shadowType === SHADOW_PCSS) usePcss = true;
      }
      if (light._cookie) {
        if (light._cookie._cubemap) {
          if (lightType === LIGHTTYPE_OMNI) {
            decl.append("uniform samplerCube light" + i + "_cookie;");
            decl.append("uniform float light" + i + "_cookieIntensity;");
            if (!light.castShadows || options.noShadow) {
              decl.append("uniform mat4 light" + i + "_shadowMatrix;");
            }
          }
        } else {
          if (lightType === LIGHTTYPE_SPOT) {
            decl.append("uniform sampler2D light" + i + "_cookie;");
            decl.append("uniform float light" + i + "_cookieIntensity;");
            if (!light.castShadows || options.noShadow) {
              decl.append("uniform mat4 light" + i + "_shadowMatrix;");
            }
            if (light._cookieTransform) {
              decl.append("uniform vec4 light" + i + "_cookieMatrix;");
              decl.append("uniform vec2 light" + i + "_cookieOffset;");
            }
          }
        }
      }
    }

    // TBN
    const hasTBN = this.needsNormal && (options.useNormals || options.useClearCoatNormals || options.enableGGXSpecular && !options.useHeights);
    if (hasTBN) {
      if (options.hasTangents) {
        func.append(options.fastTbn ? chunks.TBNfastPS : chunks.TBNPS);
      } else {
        if (device.extStandardDerivatives && (options.useNormals || options.useClearCoatNormals)) {
          func.append(chunks.TBNderivativePS.replace(/\$UV/g, this.lightingUv));
        } else {
          func.append(chunks.TBNObjectSpacePS);
        }
      }
    }

    // FIXME: only add these when needed
    func.append(chunks.sphericalPS);
    func.append(chunks.decodePS);
    func.append(ShaderGenerator.gammaCode(options.gamma, chunks));
    func.append(ShaderGenerator.tonemapCode(options.toneMap, chunks));
    func.append(ShaderGenerator.fogCode(options.fog, chunks));

    // frontend
    func.append(this.frontendCode);
    if (options.useCubeMapRotation) {
      decl.append("#define CUBEMAP_ROTATION");
    }
    if (this.needsNormal) {
      func.append(chunks.cubeMapRotatePS);
      func.append(options.cubeMapProjection > 0 ? chunks.cubeMapProjectBoxPS : chunks.cubeMapProjectNonePS);
      func.append(options.skyboxIntensity ? chunks.envMultiplyPS : chunks.envConstPS);
    }
    if (this.lighting && options.useSpecular || this.reflections) {
      if (options.useMetalness) {
        func.append(chunks.metalnessModulatePS);
      }
      if (options.fresnelModel === FRESNEL_SCHLICK) {
        func.append(chunks.fresnelSchlickPS);
      }
      if (options.useIridescence) {
        func.append(chunks.iridescenceDiffractionPS);
      }
    }
    if (options.useAo) {
      func.append(chunks.aoDiffuseOccPS);
      switch (options.occludeSpecular) {
        case SPECOCC_AO:
          func.append(options.occludeSpecularFloat ? chunks.aoSpecOccSimplePS : chunks.aoSpecOccConstSimplePS);
          break;
        case SPECOCC_GLOSSDEPENDENT:
          func.append(options.occludeSpecularFloat ? chunks.aoSpecOccPS : chunks.aoSpecOccConstPS);
          break;
      }
    }
    if (options.reflectionSource === 'envAtlasHQ') {
      func.append(options.fixSeams ? chunks.fixCubemapSeamsStretchPS : chunks.fixCubemapSeamsNonePS);
      func.append(chunks.envAtlasPS);
      func.append(chunks.reflectionEnvHQPS.replace(/\$DECODE_CUBEMAP/g, ChunkUtils.decodeFunc(options.reflectionCubemapEncoding)).replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.reflectionEncoding)));
    } else if (options.reflectionSource === 'envAtlas') {
      func.append(chunks.envAtlasPS);
      func.append(chunks.reflectionEnvPS.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.reflectionEncoding)));
    } else if (options.reflectionSource === 'cubeMap') {
      func.append(options.fixSeams ? chunks.fixCubemapSeamsStretchPS : chunks.fixCubemapSeamsNonePS);
      func.append(chunks.reflectionCubePS.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.reflectionEncoding)));
    } else if (options.reflectionSource === 'sphereMap') {
      const scode = device.fragmentUniformsCount > 16 ? chunks.reflectionSpherePS : chunks.reflectionSphereLowPS;
      func.append(scode.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.reflectionEncoding)));
    }
    if (this.reflections) {
      if (options.useClearCoat) {
        func.append(chunks.reflectionCCPS);
      }
      if (options.useSheen) {
        func.append(chunks.reflectionSheenPS);
      }
    }
    if (options.useRefraction) {
      if (options.useDynamicRefraction) {
        func.append(chunks.refractionDynamicPS);
      } else if (this.reflections) {
        func.append(chunks.refractionCubePS);
      }
    }
    if (options.useSheen) {
      func.append(chunks.lightSheenPS);
    }

    // clustered lighting
    if (options.clusteredLightingEnabled) {
      // include this before shadow / cookie code
      func.append(chunks.clusteredLightUtilsPS);
      if (options.clusteredLightingCookiesEnabled) func.append(chunks.clusteredLightCookiesPS);

      // include shadow chunks clustered lights support
      if (options.clusteredLightingShadowsEnabled && !options.noShadow) {
        shadowTypeUsed[SHADOW_PCF3] = true;
        shadowTypeUsed[SHADOW_PCF5] = true;
        shadowTypeUsed[SHADOW_PCSS] = true;
      }
    }
    if (numShadowLights > 0 || options.clusteredLightingEnabled) {
      if (shadowedDirectionalLightUsed) {
        func.append(chunks.shadowCascadesPS);
      }
      if (shadowTypeUsed[SHADOW_PCF1] || shadowTypeUsed[SHADOW_PCF3]) {
        func.append(chunks.shadowStandardPS);
      }
      if (shadowTypeUsed[SHADOW_PCF5] && (device.webgl2 || device.isWebGPU)) {
        func.append(chunks.shadowStandardGL2PS);
      }
      if (useVsm) {
        func.append(chunks.shadowVSM_commonPS);
        if (shadowTypeUsed[SHADOW_VSM8]) {
          func.append(chunks.shadowVSM8PS);
        }
        if (shadowTypeUsed[SHADOW_VSM16]) {
          func.append(device.extTextureHalfFloatLinear ? chunks.shadowEVSMPS.replace(/\$/g, "16") : chunks.shadowEVSMnPS.replace(/\$/g, "16"));
        }
        if (shadowTypeUsed[SHADOW_VSM32]) {
          func.append(device.extTextureFloatLinear ? chunks.shadowEVSMPS.replace(/\$/g, "32") : chunks.shadowEVSMnPS.replace(/\$/g, "32"));
        }
      }
      if (usePcss) {
        func.append(chunks.linearizeDepthPS);
        func.append(chunks.shadowPCSSPS);
      }
      if (!(device.webgl2 || device.extStandardDerivatives || device.isWebGPU)) {
        func.append(chunks.biasConstPS);
      }
    }
    if (options.enableGGXSpecular) func.append("uniform float material_anisotropy;");
    if (this.lighting) {
      func.append(chunks.lightDiffuseLambertPS);
      if (hasAreaLights || options.clusteredLightingAreaLightsEnabled) {
        func.append(chunks.ltcPS);
      }
    }
    let useOldAmbient = false;
    if (options.useSpecular) {
      if (this.lighting) {
        func.append(options.shadingModel === SPECULAR_PHONG ? chunks.lightSpecularPhongPS : options.enableGGXSpecular ? chunks.lightSpecularAnisoGGXPS : chunks.lightSpecularBlinnPS);
      }
      if (!options.fresnelModel && !this.reflections && !options.diffuseMapEnabled) {
        decl.append("uniform vec3 material_ambient;");
        decl.append("#define LIT_OLD_AMBIENT");
        useOldAmbient = true;
      }
    }
    func.append(chunks.combinePS);

    // lightmap support
    if (options.lightMapEnabled) {
      func.append(options.useSpecular && options.dirLightMapEnabled ? chunks.lightmapDirAddPS : chunks.lightmapAddPS);
    }
    const addAmbient = !options.lightMapEnabled || options.lightMapWithoutAmbient;
    if (addAmbient) {
      if (options.ambientSource === 'ambientSH') {
        func.append(chunks.ambientSHPS);
      } else if (options.ambientSource === 'envAtlas') {
        if (options.reflectionSource !== 'envAtlas' && options.reflectionSource !== 'envAtlasHQ') {
          func.append(chunks.envAtlasPS);
        }
        func.append(chunks.ambientEnvPS.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.ambientEncoding)));
      } else {
        func.append(chunks.ambientConstantPS);
      }
    }
    if (options.useAmbientTint && !useOldAmbient) {
      decl.append("uniform vec3 material_ambient;");
    }
    if (options.useMsdf) {
      if (!options.msdfTextAttribute) {
        decl.append("#define UNIFORM_TEXT_PARAMETERS");
      }
      func.append(chunks.msdfPS);
    }
    if (this.needsNormal) {
      func.append(chunks.viewDirPS);
      if (options.useSpecular) {
        func.append(options.enableGGXSpecular ? chunks.reflDirAnisoPS : chunks.reflDirPS);
      }
    }
    let hasPointLights = false;
    let usesLinearFalloff = false;
    let usesInvSquaredFalloff = false;
    let usesSpot = false;
    let usesCookie = false;
    let usesCookieNow;

    // clustered lighting
    if (options.clusteredLightingEnabled && this.lighting) {
      usesSpot = true;
      hasPointLights = true;
      usesLinearFalloff = true;
      usesCookie = true;
      func.append(chunks.floatUnpackingPS);
      if (options.lightMaskDynamic) decl.append("#define CLUSTER_MESH_DYNAMIC_LIGHTS");
      if (options.clusteredLightingCookiesEnabled) decl.append("#define CLUSTER_COOKIES");
      if (options.clusteredLightingShadowsEnabled && !options.noShadow) {
        decl.append("#define CLUSTER_SHADOWS");
        decl.append("#define CLUSTER_SHADOW_TYPE_" + shadowTypeToString[options.clusteredLightingShadowType]);
      }
      if (options.clusteredLightingAreaLightsEnabled) decl.append("#define CLUSTER_AREALIGHTS");
      decl.append(LightsBuffer.shaderDefines);
      if (options.clusteredLightingShadowsEnabled && !options.noShadow) {
        func.append(chunks.clusteredLightShadowsPS);
      }
      func.append(chunks.clusteredLightPS);
    }
    if (options.twoSidedLighting) {
      decl.append("uniform float twoSidedLightingNegScaleFactor;");
    }

    // FRAGMENT SHADER BODY

    code.append(this._fsGetStartCode(code, device, chunks, options));
    if (this.needsNormal) {
      if (options.twoSidedLighting) {
        code.append("    dVertexNormalW = normalize(gl_FrontFacing ? vNormalW * twoSidedLightingNegScaleFactor : -vNormalW * twoSidedLightingNegScaleFactor);");
      } else {
        code.append("    dVertexNormalW = normalize(vNormalW);");
      }
      if ((options.useHeights || options.useNormals) && options.hasTangents) {
        if (options.twoSidedLighting) {
          code.append("    dTangentW = gl_FrontFacing ? vTangentW * twoSidedLightingNegScaleFactor : -vTangentW * twoSidedLightingNegScaleFactor;");
          code.append("    dBinormalW = gl_FrontFacing ? vBinormalW * twoSidedLightingNegScaleFactor : -vBinormalW * twoSidedLightingNegScaleFactor;");
        } else {
          code.append("    dTangentW = vTangentW;");
          code.append("    dBinormalW = vBinormalW;");
        }
      }
      code.append("    getViewDir();");
      if (hasTBN) {
        code.append("    getTBN(dTangentW, dBinormalW, dVertexNormalW);");
      }
    }

    // invoke frontend functions
    code.append(this.frontendFunc);

    // transform tangent space normals to world space
    if (this.needsNormal) {
      if (options.useSpecular) {
        backend.append("    getReflDir(litArgs_worldNormal, dViewDirW, litArgs_gloss, dTBN);");
      }
      if (options.useClearCoat) {
        backend.append("    ccReflDirW = normalize(-reflect(dViewDirW, litArgs_clearcoat_worldNormal));");
      }
    }
    if (this.lighting && options.useSpecular || this.reflections) {
      if (options.useMetalness) {
        backend.append("    float f0 = 1.0 / litArgs_ior; f0 = (f0 - 1.0) / (f0 + 1.0); f0 *= f0;");
        backend.append("    litArgs_specularity = getSpecularModulate(litArgs_specularity, litArgs_albedo, litArgs_metalness, f0);");
        backend.append("    litArgs_albedo = getAlbedoModulate(litArgs_albedo, litArgs_metalness);");
      }
      if (options.useIridescence) {
        backend.append("    vec3 iridescenceFresnel = getIridescence(saturate(dot(dViewDirW, litArgs_worldNormal)), litArgs_specularity, litArgs_iridescence_thickness);");
      }
    }
    if (addAmbient) {
      backend.append("    addAmbient(litArgs_worldNormal);");
      if (options.conserveEnergy && options.useSpecular) {
        backend.append(`   dDiffuseLight = dDiffuseLight * (1.0 - litArgs_specularity);`);
      }

      // move ambient color out of diffuse (used by Lightmapper, to multiply ambient color by accumulated AO)
      if (options.separateAmbient) {
        backend.append(`
                    vec3 dAmbientLight = dDiffuseLight;
                    dDiffuseLight = vec3(0);
                `);
      }
    }
    if (options.useAmbientTint && !useOldAmbient) {
      backend.append("    dDiffuseLight *= material_ambient;");
    }
    if (options.useAo && !options.occludeDirect) {
      backend.append("    occludeDiffuse(litArgs_ao);");
    }
    if (options.lightMapEnabled) {
      backend.append(`    addLightMap(
                litArgs_lightmap, 
                litArgs_lightmapDir, 
                litArgs_worldNormal, 
                dViewDirW, 
                dReflDirW, 
                litArgs_gloss, 
                litArgs_specularity, 
                dVertexNormalW,
                dTBN
            #if defined(LIT_IRIDESCENCE)
                , iridescenceFresnel,
                litArgs_iridescence_intensity
            #endif
                );`);
    }
    if (this.lighting || this.reflections) {
      if (this.reflections) {
        if (options.useClearCoat) {
          backend.append("    addReflectionCC(ccReflDirW, litArgs_clearcoat_gloss);");
          if (options.fresnelModel > 0) {
            backend.append("    ccFresnel = getFresnelCC(dot(dViewDirW, litArgs_clearcoat_worldNormal));");
            backend.append("    ccReflection.rgb *= ccFresnel;");
          } else {
            backend.append("    ccFresnel = 0.0;");
          }
        }
        if (options.useSpecularityFactor) {
          backend.append("    ccReflection.rgb *= litArgs_specularityFactor;");
        }
        if (options.useSheen) {
          backend.append("    addReflectionSheen(litArgs_worldNormal, dViewDirW, litArgs_sheen_gloss);");
        }

        // Fresnel has to be applied to reflections
        backend.append("    addReflection(dReflDirW, litArgs_gloss);");
        if (options.fresnelModel > 0) {
          backend.append(`    dReflection.rgb *= 
                        getFresnel(
                            dot(dViewDirW, litArgs_worldNormal), 
                            litArgs_gloss, 
                            litArgs_specularity
                        #if defined(LIT_IRIDESCENCE)
                            , iridescenceFresnel,
                            litArgs_iridescence_intensity
                        #endif
                            );`);
        } else {
          backend.append("    dReflection.rgb *= litArgs_specularity;");
        }
        if (options.useSpecularityFactor) {
          backend.append("    dReflection.rgb *= litArgs_specularityFactor;");
        }
      }
      if (hasAreaLights) {
        // specular has to be accumulated differently if we want area lights to look correct
        backend.append("    dSpecularLight *= litArgs_specularity;");
        // code += "    float roughness = max((1.0 - dGlossiness) * (1.0 - dGlossiness), 0.001);\n";

        // evaluate material based area lights data, shared by all area lights
        if (options.useSpecular) {
          backend.append("    calcLTCLightValues(litArgs_gloss, litArgs_worldNormal, dViewDirW, litArgs_specularity, litArgs_clearcoat_gloss, litArgs_clearcoat_worldNormal, litArgs_clearcoat_specularity);");
        }
      }
      for (let i = 0; i < options.lights.length; i++) {
        const light = options.lights[i];
        const lightType = light._type;

        // if clustered lights are used, skip normal lights other than directional
        if (options.clusteredLightingEnabled && lightType !== LIGHTTYPE_DIRECTIONAL) {
          continue;
        }

        // The following code is not decoupled to separate shader files, because most of it can be actually changed to achieve different behaviors like:
        // - different falloffs
        // - different shadow coords (omni shadows will use drastically different genShadowCoord)
        // - different shadow filter modes
        // - different light source shapes

        // getLightDiffuse and getLightSpecular is BRDF itself.

        usesCookieNow = false;
        const lightShape = hasAreaLights && light._shape ? light.shape : LIGHTSHAPE_PUNCTUAL;
        const shapeString = hasAreaLights && light._shape ? this._getLightSourceShapeString(lightShape) : '';
        if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
          backend.append("    calc" + shapeString + "LightValues(light" + i + "_position, light" + i + "_halfWidth, light" + i + "_halfHeight);");
        }
        if (lightType === LIGHTTYPE_DIRECTIONAL) {
          // directional
          backend.append("    dLightDirNormW = light" + i + "_direction;");
          backend.append("    dAtten = 1.0;");
        } else {
          if (light._cookie) {
            if (lightType === LIGHTTYPE_SPOT && !light._cookie._cubemap) {
              usesCookie = true;
              usesCookieNow = true;
            } else if (lightType === LIGHTTYPE_OMNI && light._cookie._cubemap) {
              usesCookie = true;
              usesCookieNow = true;
            }
          }
          backend.append("    getLightDirPoint(light" + i + "_position);");
          hasPointLights = true;
          if (usesCookieNow) {
            if (lightType === LIGHTTYPE_SPOT) {
              backend.append("    dAtten3 = getCookie2D" + (light._cookieFalloff ? "" : "Clip") + (light._cookieTransform ? "Xform" : "") + "(light" + i + "_cookie, light" + i + "_shadowMatrix, light" + i + "_cookieIntensity" + (light._cookieTransform ? ", light" + i + "_cookieMatrix, light" + i + "_cookieOffset" : "") + ")." + light._cookieChannel + ";");
            } else {
              backend.append("    dAtten3 = getCookieCube(light" + i + "_cookie, light" + i + "_shadowMatrix, light" + i + "_cookieIntensity)." + light._cookieChannel + ";");
            }
          }
          if (lightShape === LIGHTSHAPE_PUNCTUAL) {
            if (light._falloffMode === LIGHTFALLOFF_LINEAR) {
              backend.append("    dAtten = getFalloffLinear(light" + i + "_radius, dLightDirW);");
              usesLinearFalloff = true;
            } else {
              backend.append("    dAtten = getFalloffInvSquared(light" + i + "_radius, dLightDirW);");
              usesInvSquaredFalloff = true;
            }
          } else {
            // non punctual lights only gets the range window here
            backend.append("    dAtten = getFalloffWindow(light" + i + "_radius, dLightDirW);");
            usesInvSquaredFalloff = true;
          }
          backend.append("    if (dAtten > 0.00001) {"); // BRANCH START

          if (lightType === LIGHTTYPE_SPOT) {
            if (!(usesCookieNow && !light._cookieFalloff)) {
              backend.append("    dAtten *= getSpotEffect(light" + i + "_direction, light" + i + "_innerConeAngle, light" + i + "_outerConeAngle, dLightDirNormW);");
              usesSpot = true;
            }
          }
        }

        // diffuse lighting - LTC lights do not mix diffuse lighting into attenuation that affects specular
        if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
          if (lightType === LIGHTTYPE_DIRECTIONAL) {
            // NB: A better aproximation perhaps using wrap lighting could be implemented here
            backend.append("    dAttenD = getLightDiffuse(litArgs_worldNormal, dViewDirW, dLightDirW, dLightDirNormW);");
          } else {
            // 16.0 is a constant that is in getFalloffInvSquared()
            backend.append("    dAttenD = get" + shapeString + "LightDiffuse(litArgs_worldNormal, dViewDirW, dLightDirW, dLightDirNormW) * 16.0;");
          }
        } else {
          backend.append("    dAtten *= getLightDiffuse(litArgs_worldNormal, dViewDirW, dLightDirW, dLightDirNormW);");
        }
        if (light.castShadows && !options.noShadow) {
          const pcssShadows = light._shadowType === SHADOW_PCSS;
          const vsmShadows = light._shadowType === SHADOW_VSM8 || light._shadowType === SHADOW_VSM16 || light._shadowType === SHADOW_VSM32;
          const pcfShadows = light._shadowType === SHADOW_PCF1 || light._shadowType === SHADOW_PCF3 || light._shadowType === SHADOW_PCF5;
          let shadowReadMode = null;
          let evsmExp;
          switch (light._shadowType) {
            case SHADOW_VSM8:
              shadowReadMode = "VSM8";
              evsmExp = "0.0";
              break;
            case SHADOW_VSM16:
              shadowReadMode = "VSM16";
              evsmExp = "5.54";
              break;
            case SHADOW_VSM32:
              shadowReadMode = "VSM32";
              if (device.textureFloatHighPrecision) {
                evsmExp = "15.0";
              } else {
                evsmExp = "5.54";
              }
              break;
            case SHADOW_PCF1:
              shadowReadMode = "PCF1x1";
              break;
            case SHADOW_PCF5:
              shadowReadMode = "PCF5x5";
              break;
            case SHADOW_PCSS:
              shadowReadMode = "PCSS";
              break;
            case SHADOW_PCF3:
            default:
              shadowReadMode = "PCF3x3";
              break;
          }
          if (shadowReadMode !== null) {
            if (light._normalOffsetBias && !light._isVsm) {
              func.append("#define SHADOW_SAMPLE_NORMAL_OFFSET");
            }
            if (lightType === LIGHTTYPE_DIRECTIONAL) {
              func.append("#define SHADOW_SAMPLE_ORTHO");
            }
            if ((pcfShadows || pcssShadows) && device.webgl2 || device.extStandardDerivatives || device.isWebGPU) {
              func.append("#define SHADOW_SAMPLE_SOURCE_ZBUFFER");
            }
            if (lightType === LIGHTTYPE_OMNI) {
              func.append("#define SHADOW_SAMPLE_POINT");
            }

            // Create shadow coord sampler function for this light
            const coordCode = chunks.shadowSampleCoordPS;
            func.append(coordCode.replace("$LIGHT", i));

            // Make sure to undefine the shadow sampler defines
            func.append("#undef SHADOW_SAMPLE_NORMAL_OFFSET");
            func.append("#undef SHADOW_SAMPLE_ORTHO");
            func.append("#undef SHADOW_SAMPLE_SOURCE_ZBUFFER");
            func.append("#undef SHADOW_SAMPLE_POINT");
            let shadowMatrix = `light${i}_shadowMatrix`;
            if (lightType === LIGHTTYPE_DIRECTIONAL && light.numCascades > 1) {
              // compute which cascade matrix needs to be used
              backend.append(`    getShadowCascadeMatrix(light${i}_shadowMatrixPalette, light${i}_shadowCascadeDistances, light${i}_shadowCascadeCount);`);
              shadowMatrix = `cascadeShadowMat`;
            }
            backend.append(`    dShadowCoord = getShadowSampleCoord${i}(${shadowMatrix}, light${i}_shadowParams, vPositionW, dLightPosW, dLightDirW, dLightDirNormW, dVertexNormalW);`);

            // Fade shadow at edges
            if (lightType === LIGHTTYPE_DIRECTIONAL) {
              backend.append(`    fadeShadow(light${i}_shadowCascadeDistances);`);
            }
            var shadowCoordArgs = `SHADOWMAP_PASS(light${i}_shadowMap), dShadowCoord, light${i}_shadowParams`;
            if (vsmShadows) {
              // VSM
              shadowCoordArgs = `${shadowCoordArgs}, ${evsmExp}, dLightDirW`;
            } else if (pcssShadows) {
              let penumbraSizeArg = `vec2(light${i}_shadowSearchArea)`;
              if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
                penumbraSizeArg = `vec2(length(light${i}_halfWidth), length(light${i}_halfHeight)) * light${i}_shadowSearchArea`;
              }
              shadowCoordArgs = `${shadowCoordArgs}, light${i}_cameraParams, ${penumbraSizeArg}, dLightDirW`;
            }
            if (lightType === LIGHTTYPE_OMNI) {
              shadowReadMode = `Point${shadowReadMode}`;
              if (!pcssShadows) {
                shadowCoordArgs = `${shadowCoordArgs}, dLightDirW`;
              }
            } else if (lightType === LIGHTTYPE_SPOT) {
              shadowReadMode = `Spot${shadowReadMode}`;
            }
            backend.append(`    float shadow${i} = getShadow${shadowReadMode}(${shadowCoordArgs});`);
            backend.append(`    dAtten *= mix(1.0, shadow${i}, light${i}_shadowIntensity);`);
            // backend.append(`    dAtten *= mix(1.0, shadow${i}, shadow${i} * light${i}_shadowIntensity);`);
            // backend.append(`    dAtten *= mix(1.0, 0.0, clamp(shadow${i} * light${i}_shadowIntensity, 0.0, 1.0));`);
          }
        }

        if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
          // area light - they do not mix diffuse lighting into specular attenuation
          if (options.conserveEnergy && options.useSpecular) {
            backend.append("    dDiffuseLight += ((dAttenD * dAtten) * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ") * (1.0 - dLTCSpecFres);");
          } else {
            backend.append("    dDiffuseLight += (dAttenD * dAtten) * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ";");
          }
        } else {
          // punctual light
          if (hasAreaLights && options.conserveEnergy && options.useSpecular) {
            backend.append("    dDiffuseLight += (dAtten * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ") * (1.0 - litArgs_specularity);");
          } else {
            backend.append("    dDiffuseLight += dAtten * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ";");
          }
        }
        if (options.useSpecular) {
          backend.append("    dHalfDirW = normalize(-dLightDirNormW + dViewDirW);");
        }

        // specular / clear coat
        if (light.affectSpecularity) {
          if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
            // area light
            if (options.useClearCoat) {
              backend.append(`    ccSpecularLight += ccLTCSpecFres * get${shapeString}LightSpecular(litArgs_clearcoat_worldNormal, dViewDirW) * dAtten * light${i}_color` + (usesCookieNow ? " * dAtten3" : "") + ";");
            }
            if (options.useSpecular) {
              backend.append(`    dSpecularLight += dLTCSpecFres * get${shapeString}LightSpecular(litArgs_worldNormal, dViewDirW) * dAtten * light${i}_color` + (usesCookieNow ? " * dAtten3" : "") + ";");
            }
          } else {
            var calcFresnel = false;
            if (lightType === LIGHTTYPE_DIRECTIONAL && options.fresnelModel > 0) {
              calcFresnel = true;
            }

            // if LTC lights are present, specular must be accumulated with specularity (specularity is pre multiplied by punctual light fresnel)
            if (options.useClearCoat) {
              backend.append(`    ccSpecularLight += getLightSpecular(dHalfDirW, ccReflDirW, litArgs_clearcoat_worldNormal, dViewDirW, dLightDirNormW, litArgs_clearcoat_gloss, dTBN) * dAtten * light${i}_color` + (usesCookieNow ? " * dAtten3" : "") + (calcFresnel ? " * getFresnelCC(dot(dViewDirW, dHalfDirW));" : ";"));
            }
            if (options.useSheen) {
              backend.append(`    sSpecularLight += getLightSpecularSheen(dHalfDirW, litArgs_worldNormal, dViewDirW, dLightDirNormW, litArgs_sheen_gloss) * dAtten * light${i}_color` + (usesCookieNow ? " * dAtten3;" : ";"));
            }
            if (options.useSpecular) {
              backend.append(`    dSpecularLight += getLightSpecular(dHalfDirW, dReflDirW, litArgs_worldNormal, dViewDirW, dLightDirNormW, litArgs_gloss, dTBN) * dAtten * light${i}_color` + (usesCookieNow ? " * dAtten3" : "") + (calcFresnel ? ` 
                                    * getFresnel(
                                        dot(dViewDirW, dHalfDirW), 
                                        litArgs_gloss, 
                                        litArgs_specularity
                                    #if defined(LIT_IRIDESCENCE)
                                        , iridescenceFresnel, 
                                        litArgs_iridescence_intensity
                                    #endif
                                    );` : `* litArgs_specularity;`));
            }
          }
        }
        if (lightType !== LIGHTTYPE_DIRECTIONAL) {
          backend.append("    }"); // BRANCH END
        }
      }

      // clustered lighting
      if (options.clusteredLightingEnabled && this.lighting) {
        usesLinearFalloff = true;
        usesInvSquaredFalloff = true;
        hasPointLights = true;
        backend.append(`    addClusteredLights(
                                        litArgs_worldNormal, 
                                        dViewDirW, 
                                        dReflDirW,
                                #if defined(LIT_CLEARCOAT)
                                        ccReflDirW,
                                #endif
                                        litArgs_gloss, 
                                        litArgs_specularity, 
                                        dVertexNormalW, 
                                        dTBN, 
                                #if defined(LIT_IRIDESCENCE)
                                        iridescenceFresnel,
                                #endif
                                        litArgs_clearcoat_worldNormal, 
                                        litArgs_clearcoat_gloss,
                                        litArgs_sheen_gloss,
                                        litArgs_iridescence_intensity
                                    );`);
      }
      if (hasAreaLights) {
        // specular has to be accumulated differently if we want area lights to look correct
        if (options.useClearCoat) {
          backend.append("    litArgs_clearcoat_specularity = 1.0;");
        }
        if (options.useSpecular) {
          backend.append("    litArgs_specularity = vec3(1);");
        }
      }
      if (options.useRefraction) {
        backend.append(`    addRefraction(
                        litArgs_worldNormal, 
                        dViewDirW, 
                        litArgs_thickness, 
                        litArgs_gloss, 
                        litArgs_specularity, 
                        litArgs_albedo, 
                        litArgs_transmission,
                        litArgs_ior
                    #if defined(LIT_IRIDESCENCE)
                        , iridescenceFresnel, 
                        litArgs_iridescence_intensity
                    #endif
                    );`);
      }
    }
    if (options.useAo) {
      if (options.occludeDirect) {
        backend.append("    occludeDiffuse(litArgs_ao);");
      }
      if (options.occludeSpecular === SPECOCC_AO || options.occludeSpecular === SPECOCC_GLOSSDEPENDENT) {
        backend.append("    occludeSpecular(litArgs_gloss, litArgs_ao, litArgs_worldNormal, dViewDirW);");
      }
    }
    if (options.useSpecularityFactor) {
      backend.append("    dSpecularLight *= litArgs_specularityFactor;");
    }
    if (options.opacityFadesSpecular === false) {
      if (options.blendType === BLEND_NORMAL || options.blendType === BLEND_PREMULTIPLIED) {
        backend.append("float specLum = dot((dSpecularLight + dReflection.rgb * dReflection.a), vec3( 0.2126, 0.7152, 0.0722 ));");
        backend.append("#ifdef LIT_CLEARCOAT\n specLum += dot(ccSpecularLight * litArgs_clearcoat_specularity + ccReflection.rgb * litArgs_clearcoat_specularity, vec3( 0.2126, 0.7152, 0.0722 ));\n#endif");
        backend.append("litArgs_opacity = clamp(litArgs_opacity + gammaCorrectInput(specLum), 0.0, 1.0);");
      }
      backend.append("litArgs_opacity *= material_alphaFade;");
    }
    backend.append(chunks.endPS);
    if (options.blendType === BLEND_NORMAL || options.blendType === BLEND_ADDITIVEALPHA || options.alphaToCoverage) {
      backend.append(chunks.outputAlphaPS);
    } else if (options.blendType === BLEND_PREMULTIPLIED) {
      backend.append(chunks.outputAlphaPremulPS);
    } else {
      backend.append(chunks.outputAlphaOpaquePS);
    }
    if (options.useMsdf) {
      backend.append("    gl_FragColor = applyMsdf(gl_FragColor);");
    }
    backend.append(chunks.outputPS);
    backend.append(chunks.debugOutputPS);
    if (hasPointLights) {
      func.prepend(chunks.lightDirPointPS);
    }
    if (usesLinearFalloff) {
      func.prepend(chunks.falloffLinearPS);
    }
    if (usesInvSquaredFalloff) {
      func.prepend(chunks.falloffInvSquaredPS);
    }
    if (usesSpot) {
      func.prepend(chunks.spotPS);
    }
    if (usesCookie && !options.clusteredLightingEnabled) {
      // non-clustered lights cookie code
      func.prepend(chunks.cookiePS);
    }
    let structCode = "";
    const backendCode = `void evaluateBackend() {\n${backend.code}\n}`;
    func.append(backendCode);
    code.append(chunks.debugProcessFrontendPS);
    code.append("    evaluateBackend();");
    code.append(ShaderGenerator.end());
    const mergedCode = decl.code + func.code + code.code;

    // Light inputs
    if (mergedCode.includes("dTBN")) structCode += "mat3 dTBN;\n";
    if (mergedCode.includes("dVertexNormalW")) structCode += "vec3 dVertexNormalW;\n";
    if (mergedCode.includes("dTangentW")) structCode += "vec3 dTangentW;\n";
    if (mergedCode.includes("dBinormalW")) structCode += "vec3 dBinormalW;\n";
    if (mergedCode.includes("dViewDirW")) structCode += "vec3 dViewDirW;\n";
    if (mergedCode.includes("dReflDirW")) structCode += "vec3 dReflDirW;\n";
    if (mergedCode.includes("dHalfDirW")) structCode += "vec3 dHalfDirW;\n";
    if (mergedCode.includes("ccReflDirW")) structCode += "vec3 ccReflDirW;\n";

    // Per-light temporaries
    if (mergedCode.includes("dLightDirNormW")) structCode += "vec3 dLightDirNormW;\n";
    if (mergedCode.includes("dLightDirW")) structCode += "vec3 dLightDirW;\n";
    if (mergedCode.includes("dLightPosW")) structCode += "vec3 dLightPosW;\n";
    if (mergedCode.includes("dShadowCoord")) structCode += "vec3 dShadowCoord;\n";

    // Outputs
    if (mergedCode.includes("dReflection")) structCode += "vec4 dReflection;\n";
    if (mergedCode.includes("dDiffuseLight")) structCode += "vec3 dDiffuseLight;\n";
    if (mergedCode.includes("dSpecularLight")) structCode += "vec3 dSpecularLight;\n";
    if (mergedCode.includes("dAtten")) structCode += "float dAtten;\n";
    if (mergedCode.includes("dAttenD")) structCode += "float dAttenD;\n"; // separate diffuse attenuation for non-punctual light sources
    if (mergedCode.includes("dAtten3")) structCode += "vec3 dAtten3;\n";
    if (mergedCode.includes("dMsdf")) structCode += "vec4 dMsdf;\n";
    if (mergedCode.includes("ccFresnel")) structCode += "float ccFresnel;\n";
    if (mergedCode.includes("ccReflection")) structCode += "vec3 ccReflection;\n";
    if (mergedCode.includes("ccSpecularLight")) structCode += "vec3 ccSpecularLight;\n";
    if (mergedCode.includes("ccSpecularityNoFres")) structCode += "float ccSpecularityNoFres;\n";
    if (mergedCode.includes("sSpecularLight")) structCode += "vec3 sSpecularLight;\n";
    if (mergedCode.includes("sReflection")) structCode += "vec3 sReflection;\n";
    const result = this._fsGetBeginCode() + this.varyings + this.varyingDefines + this._fsGetBaseCode() + structCode + this.frontendDecl + mergedCode;
    return result;
  }

  /**
   * Generates a fragment shader. Please make sure to update src/deprecated/deprecated.js in
   * case `this.fshader` does not longer contain the entire fragment shader once this function
   * is done because we handle backwards compatibility there for old shaders. This allows us
   * to have deprecation-free tree shaking while still fixing shaders for full builds.
   *
   * @param {string} frontendDecl - Frontend declarations like `float dAlpha;`
   * @param {string} frontendCode - Frontend code containing `getOpacity()` etc.
   * @param {string} frontendFunc - E.g. `evaluateFrontend();`
   * @param {string} lightingUv - E.g. `vUv0`
   * @ignore
   */
  generateFragmentShader(frontendDecl, frontendCode, frontendFunc, lightingUv) {
    var _this$handleCompatibi;
    const options = this.options;
    this.frontendDecl = frontendDecl;
    this.frontendCode = frontendCode;
    this.frontendFunc = frontendFunc;
    this.lightingUv = lightingUv;
    if (options.pass === SHADER_PICK) {
      this.fshader = this._fsGetPickPassCode();
    } else if (options.pass === SHADER_DEPTH) {
      this.fshader = this._fsGetDepthPassCode();
    } else if (this.shadowPass) {
      this.fshader = this._fsGetShadowPassCode();
    } else if (options.customFragmentShader) {
      this.fshader = this._fsGetBeginCode() + options.customFragmentShader;
    } else {
      this.fshader = this._fsGetLitPassCode();
    }
    (_this$handleCompatibi = this.handleCompatibility) == null ? void 0 : _this$handleCompatibi.call(this);
  }
  getDefinition() {
    const definition = ShaderUtils.createDefinition(this.device, {
      name: 'LitShader',
      attributes: this.attributes,
      vertexCode: this.vshader,
      fragmentCode: this.fshader
    });
    if (this.shaderPassInfo.isForward) {
      definition.tag = SHADERTAG_MATERIAL;
    }
    return definition;
  }
}

export { LitShader };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl0LXNoYWRlci5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3NjZW5lL3NoYWRlci1saWIvcHJvZ3JhbXMvbGl0LXNoYWRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIFNFTUFOVElDX0FUVFI4LCBTRU1BTlRJQ19BVFRSOSwgU0VNQU5USUNfQVRUUjEwLCBTRU1BTlRJQ19BVFRSMTEsIFNFTUFOVElDX0FUVFIxMiwgU0VNQU5USUNfQVRUUjEzLCBTRU1BTlRJQ19BVFRSMTQsIFNFTUFOVElDX0FUVFIxNSxcbiAgICBTRU1BTlRJQ19CTEVORElORElDRVMsIFNFTUFOVElDX0JMRU5EV0VJR0hULCBTRU1BTlRJQ19DT0xPUiwgU0VNQU5USUNfTk9STUFMLCBTRU1BTlRJQ19QT1NJVElPTiwgU0VNQU5USUNfVEFOR0VOVCxcbiAgICBTRU1BTlRJQ19URVhDT09SRDAsIFNFTUFOVElDX1RFWENPT1JEMSxcbiAgICBTSEFERVJUQUdfTUFURVJJQUwsXG4gICAgUElYRUxGT1JNQVRfUkdCQThcbn0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IHNoYWRlckNodW5rcyB9IGZyb20gJy4uL2NodW5rcy9jaHVua3MuanMnO1xuaW1wb3J0IHsgQ2h1bmtVdGlscyB9IGZyb20gJy4uL2NodW5rLXV0aWxzLmpzJztcblxuaW1wb3J0IHtcbiAgICBCTEVORF9BRERJVElWRUFMUEhBLCBCTEVORF9OT1JNQUwsIEJMRU5EX1BSRU1VTFRJUExJRUQsXG4gICAgRlJFU05FTF9TQ0hMSUNLLFxuICAgIExJR0hURkFMTE9GRl9MSU5FQVIsXG4gICAgTElHSFRTSEFQRV9QVU5DVFVBTCwgTElHSFRTSEFQRV9SRUNULCBMSUdIVFNIQVBFX0RJU0ssIExJR0hUU0hBUEVfU1BIRVJFLFxuICAgIExJR0hUVFlQRV9ESVJFQ1RJT05BTCwgTElHSFRUWVBFX09NTkksIExJR0hUVFlQRV9TUE9ULFxuICAgIFNIQURFUl9ERVBUSCwgU0hBREVSX1BJQ0ssXG4gICAgU0hBRE9XX1BDRjEsIFNIQURPV19QQ0YzLCBTSEFET1dfUENGNSwgU0hBRE9XX1ZTTTgsIFNIQURPV19WU00xNiwgU0hBRE9XX1ZTTTMyLCBTSEFET1dfUENTUyxcbiAgICBTUEVDT0NDX0FPLCBTUEVDT0NDX0dMT1NTREVQRU5ERU5ULFxuICAgIFNQRUNVTEFSX1BIT05HLFxuICAgIFNQUklURV9SRU5ERVJNT0RFX1NMSUNFRCwgU1BSSVRFX1JFTkRFUk1PREVfVElMRUQsIHNoYWRvd1R5cGVUb1N0cmluZ1xufSBmcm9tICcuLi8uLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgTGlnaHRzQnVmZmVyIH0gZnJvbSAnLi4vLi4vbGlnaHRpbmcvbGlnaHRzLWJ1ZmZlci5qcyc7XG5pbXBvcnQgeyBTaGFkZXJQYXNzIH0gZnJvbSAnLi4vLi4vc2hhZGVyLXBhc3MuanMnO1xuXG5pbXBvcnQgeyB2YWxpZGF0ZVVzZXJDaHVua3MgfSBmcm9tICcuLi9jaHVua3MvY2h1bmstdmFsaWRhdGlvbi5qcyc7XG5pbXBvcnQgeyBTaGFkZXJVdGlscyB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3NoYWRlci11dGlscy5qcyc7XG5pbXBvcnQgeyBDaHVua0J1aWxkZXIgfSBmcm9tICcuLi9jaHVuay1idWlsZGVyLmpzJztcbmltcG9ydCB7IFNoYWRlckdlbmVyYXRvciB9IGZyb20gJy4vc2hhZGVyLWdlbmVyYXRvci5qcyc7XG5cbmNvbnN0IGJ1aWx0aW5BdHRyaWJ1dGVzID0ge1xuICAgIHZlcnRleF9ub3JtYWw6IFNFTUFOVElDX05PUk1BTCxcbiAgICB2ZXJ0ZXhfdGFuZ2VudDogU0VNQU5USUNfVEFOR0VOVCxcbiAgICB2ZXJ0ZXhfdGV4Q29vcmQwOiBTRU1BTlRJQ19URVhDT09SRDAsXG4gICAgdmVydGV4X3RleENvb3JkMTogU0VNQU5USUNfVEVYQ09PUkQxLFxuICAgIHZlcnRleF9jb2xvcjogU0VNQU5USUNfQ09MT1IsXG4gICAgdmVydGV4X2JvbmVXZWlnaHRzOiBTRU1BTlRJQ19CTEVORFdFSUdIVCxcbiAgICB2ZXJ0ZXhfYm9uZUluZGljZXM6IFNFTUFOVElDX0JMRU5ESU5ESUNFU1xufTtcblxuY29uc3QgYnVpbHRpblZhcnlpbmdzID0ge1xuICAgIHZWZXJ0ZXhDb2xvcjogXCJ2ZWM0XCIsXG4gICAgdlBvc2l0aW9uVzogXCJ2ZWMzXCIsXG4gICAgdk5vcm1hbFY6IFwidmVjM1wiLFxuICAgIHZOb3JtYWxXOiBcInZlYzNcIixcbiAgICB2VGFuZ2VudFc6IFwidmVjM1wiLFxuICAgIHZCaW5vcm1hbFc6IFwidmVjM1wiLFxuICAgIHZPYmplY3RTcGFjZVVwVzogXCJ2ZWMzXCIsXG4gICAgdlV2MDogXCJ2ZWMyXCIsXG4gICAgdlV2MTogXCJ2ZWMyXCJcbn07XG5cbmNsYXNzIExpdFNoYWRlciB7XG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvZ3JhcGhpY3MtZGV2aWNlLmpzJykuR3JhcGhpY3NEZXZpY2V9IGRldmljZSAtIFRoZVxuICAgICAgICAgKiBncmFwaGljcyBkZXZpY2UuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuL2xpdC1zaGFkZXItb3B0aW9ucy5qcycpLkxpdFNoYWRlck9wdGlvbnN9IG9wdGlvbnMgLSBUaGVcbiAgICAgICAgICogbGl0IG9wdGlvbnMuXG4gICAgICAgICAqIEBpZ25vcmVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGV2aWNlID0gZGV2aWNlO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgICAgIC8vIHJlc29sdmUgY3VzdG9tIGNodW5rIGF0dHJpYnV0ZXNcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgdmVydGV4X3Bvc2l0aW9uOiBTRU1BTlRJQ19QT1NJVElPTlxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChvcHRpb25zLnVzZXJBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtzZW1hbnRpYywgbmFtZV0gb2YgT2JqZWN0LmVudHJpZXMob3B0aW9ucy51c2VyQXR0cmlidXRlcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXNbbmFtZV0gPSBzZW1hbnRpYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmNodW5rcykge1xuICAgICAgICAgICAgY29uc3QgdXNlckNodW5rcyA9IG9wdGlvbnMuY2h1bmtzO1xuXG4gICAgICAgICAgICAvLyAjaWYgX0RFQlVHXG4gICAgICAgICAgICB2YWxpZGF0ZVVzZXJDaHVua3ModXNlckNodW5rcyk7XG4gICAgICAgICAgICAvLyAjZW5kaWZcblxuICAgICAgICAgICAgdGhpcy5jaHVua3MgPSBPYmplY3QuY3JlYXRlKHNoYWRlckNodW5rcyk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNodW5rTmFtZSBpbiBzaGFkZXJDaHVua3MpIHtcbiAgICAgICAgICAgICAgICBpZiAodXNlckNodW5rcy5oYXNPd25Qcm9wZXJ0eShjaHVua05hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdXNlckNodW5rc1tjaHVua05hbWVdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGEgaW4gYnVpbHRpbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidWlsdGluQXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShhKSAmJiBjaHVuay5pbmRleE9mKGEpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXNbYV0gPSBidWlsdGluQXR0cmlidXRlc1thXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNodW5rc1tjaHVua05hbWVdID0gY2h1bms7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jaHVua3MgPSBzaGFkZXJDaHVua3M7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNoYWRlclBhc3NJbmZvID0gU2hhZGVyUGFzcy5nZXQodGhpcy5kZXZpY2UpLmdldEJ5SW5kZXgob3B0aW9ucy5wYXNzKTtcbiAgICAgICAgdGhpcy5zaGFkb3dQYXNzID0gdGhpcy5zaGFkZXJQYXNzSW5mby5pc1NoYWRvdztcblxuICAgICAgICB0aGlzLmxpZ2h0aW5nID0gKG9wdGlvbnMubGlnaHRzLmxlbmd0aCA+IDApIHx8IG9wdGlvbnMuZGlyTGlnaHRNYXBFbmFibGVkIHx8IG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkO1xuICAgICAgICB0aGlzLnJlZmxlY3Rpb25zID0gISFvcHRpb25zLnJlZmxlY3Rpb25Tb3VyY2U7XG4gICAgICAgIHRoaXMubmVlZHNOb3JtYWwgPVxuICAgICAgICAgICAgdGhpcy5saWdodGluZyB8fFxuICAgICAgICAgICAgdGhpcy5yZWZsZWN0aW9ucyB8fFxuICAgICAgICAgICAgb3B0aW9ucy51c2VTcGVjdWxhciB8fFxuICAgICAgICAgICAgb3B0aW9ucy5hbWJpZW50U0ggfHxcbiAgICAgICAgICAgIG9wdGlvbnMudXNlSGVpZ2h0cyB8fFxuICAgICAgICAgICAgb3B0aW9ucy5lbmFibGVHR1hTcGVjdWxhciB8fFxuICAgICAgICAgICAgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkICYmICF0aGlzLnNoYWRvd1Bhc3MpIHx8XG4gICAgICAgICAgICBvcHRpb25zLnVzZUNsZWFyQ29hdE5vcm1hbHM7XG4gICAgICAgIHRoaXMubmVlZHNOb3JtYWwgPSB0aGlzLm5lZWRzTm9ybWFsICYmICF0aGlzLnNoYWRvd1Bhc3M7XG4gICAgICAgIHRoaXMubmVlZHNTY2VuZUNvbG9yID0gb3B0aW9ucy51c2VEeW5hbWljUmVmcmFjdGlvbjtcbiAgICAgICAgdGhpcy5uZWVkc1NjcmVlblNpemUgPSBvcHRpb25zLnVzZUR5bmFtaWNSZWZyYWN0aW9uO1xuICAgICAgICB0aGlzLm5lZWRzVHJhbnNmb3JtcyA9IG9wdGlvbnMudXNlRHluYW1pY1JlZnJhY3Rpb247XG5cbiAgICAgICAgLy8gZ2VuZXJhdGVkIGJ5IHZzaGFkZXJcbiAgICAgICAgdGhpcy52YXJ5aW5ncyA9IFwiXCI7XG4gICAgICAgIHRoaXMudmFyeWluZ0RlZmluZXMgPSBcIlwiO1xuICAgICAgICB0aGlzLnZzaGFkZXIgPSBudWxsO1xuXG4gICAgICAgIC8vIHN1cHBsaWVkIGJ5IGNhbGxlclxuICAgICAgICB0aGlzLmZyb250ZW5kRGVjbCA9IG51bGw7XG4gICAgICAgIHRoaXMuZnJvbnRlbmRDb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5mcm9udGVuZEZ1bmMgPSBudWxsO1xuICAgICAgICB0aGlzLmxpZ2h0aW5nVXYgPSBudWxsO1xuXG4gICAgICAgIC8vIGRlZmluZXMgc2V0IGJ5IHRoZSBzaGFkZXIgZ2VuZXJhdGlvblxuICAgICAgICB0aGlzLmRlZmluZXMgPSBbXTtcblxuICAgICAgICAvLyBnZW5lcmF0ZWQgYnkgZnNoYWRlclxuICAgICAgICB0aGlzLmZzaGFkZXIgPSBudWxsO1xuICAgIH1cblxuICAgIF92c0FkZEJhc2VDb2RlKGNvZGUsIGNodW5rcywgb3B0aW9ucykge1xuICAgICAgICBjb2RlICs9IGNodW5rcy5iYXNlVlM7XG4gICAgICAgIGlmIChvcHRpb25zLm5pbmVTbGljZWRNb2RlID09PSBTUFJJVEVfUkVOREVSTU9ERV9TTElDRUQgfHxcbiAgICAgICAgICAgIG9wdGlvbnMubmluZVNsaWNlZE1vZGUgPT09IFNQUklURV9SRU5ERVJNT0RFX1RJTEVEKSB7XG4gICAgICAgICAgICBjb2RlICs9IGNodW5rcy5iYXNlTmluZVNsaWNlZFZTO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2RlO1xuICAgIH1cblxuICAgIF92c0FkZFRyYW5zZm9ybUNvZGUoY29kZSwgZGV2aWNlLCBjaHVua3MsIG9wdGlvbnMpIHtcbiAgICAgICAgY29kZSArPSB0aGlzLmNodW5rcy50cmFuc2Zvcm1WUztcbiAgICAgICAgcmV0dXJuIGNvZGU7XG4gICAgfVxuXG4gICAgX3NldE1hcFRyYW5zZm9ybShjb2RlcywgbmFtZSwgaWQsIHV2KSB7XG4gICAgICAgIGNvbnN0IGNoZWNrSWQgPSBpZCArIHV2ICogMTAwO1xuICAgICAgICBpZiAoIWNvZGVzWzNdW2NoZWNrSWRdKSB7XG4gICAgICAgICAgICAvLyB1cGxvYWQgYSAzeDIgbWF0cml4IGFuZCBtYW51YWxseSBwZXJmb3JtIHRoZSBtdWx0aXBsaWNhdGlvblxuICAgICAgICAgICAgY29uc3QgdmFyTmFtZSA9IGB0ZXh0dXJlXyR7bmFtZX1NYXBUcmFuc2Zvcm1gO1xuICAgICAgICAgICAgY29kZXNbMF0gKz0gYHVuaWZvcm0gdmVjMyAke3Zhck5hbWV9MDtcXG5gO1xuICAgICAgICAgICAgY29kZXNbMF0gKz0gYHVuaWZvcm0gdmVjMyAke3Zhck5hbWV9MTtcXG5gO1xuICAgICAgICAgICAgY29kZXNbMV0gKz0gYHZhcnlpbmcgdmVjMiB2VVYke3V2fV8ke2lkfTtcXG5gO1xuICAgICAgICAgICAgY29kZXNbMl0gKz0gYCAgIHZVViR7dXZ9XyR7aWR9ID0gdmVjMihkb3QodmVjMyh1diR7dXZ9LCAxKSwgJHt2YXJOYW1lfTApLCBkb3QodmVjMyh1diR7dXZ9LCAxKSwgJHt2YXJOYW1lfTEpKTtcXG5gO1xuICAgICAgICAgICAgY29kZXNbM11bY2hlY2tJZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2RlcztcbiAgICB9XG5cbiAgICAvLyBBZGQgXCJCYXNlXCIgQ29kZSBzZWN0aW9uIHRvIGZyYWdtZW50IHNoYWRlci5cbiAgICBfZnNHZXRCYXNlQ29kZSgpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgY2h1bmtzID0gdGhpcy5jaHVua3M7XG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmNodW5rcy5iYXNlUFM7XG4gICAgICAgIGlmIChvcHRpb25zLm5pbmVTbGljZWRNb2RlID09PSBTUFJJVEVfUkVOREVSTU9ERV9TTElDRUQpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBjaHVua3MuYmFzZU5pbmVTbGljZWRQUztcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLm5pbmVTbGljZWRNb2RlID09PSBTUFJJVEVfUkVOREVSTU9ERV9USUxFRCkge1xuICAgICAgICAgICAgcmVzdWx0ICs9IGNodW5rcy5iYXNlTmluZVNsaWNlZFRpbGVkUFM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvLyBBZGQgXCJTdGFydFwiIENvZGUgc2VjdGlvbiB0byBmcmFnbWVudCBzaGFkZXIuXG4gICAgX2ZzR2V0U3RhcnRDb2RlKGNvZGUsIGRldmljZSwgY2h1bmtzLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBjaHVua3Muc3RhcnRQUztcbiAgICAgICAgaWYgKG9wdGlvbnMubmluZVNsaWNlZE1vZGUgPT09IFNQUklURV9SRU5ERVJNT0RFX1NMSUNFRCkge1xuICAgICAgICAgICAgcmVzdWx0ICs9IGNodW5rcy5zdGFydE5pbmVTbGljZWRQUztcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLm5pbmVTbGljZWRNb2RlID09PSBTUFJJVEVfUkVOREVSTU9ERV9USUxFRCkge1xuICAgICAgICAgICAgcmVzdWx0ICs9IGNodW5rcy5zdGFydE5pbmVTbGljZWRUaWxlZFBTO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgX2dldExpZ2h0U291cmNlU2hhcGVTdHJpbmcoc2hhcGUpIHtcbiAgICAgICAgc3dpdGNoIChzaGFwZSkge1xuICAgICAgICAgICAgY2FzZSBMSUdIVFNIQVBFX1JFQ1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdSZWN0JztcbiAgICAgICAgICAgIGNhc2UgTElHSFRTSEFQRV9ESVNLOlxuICAgICAgICAgICAgICAgIHJldHVybiAnRGlzayc7XG4gICAgICAgICAgICBjYXNlIExJR0hUU0hBUEVfU1BIRVJFOlxuICAgICAgICAgICAgICAgIHJldHVybiAnU3BoZXJlJztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVWZXJ0ZXhTaGFkZXIodXNlVXYsIHVzZVVubW9kaWZpZWRVdiwgbWFwVHJhbnNmb3Jtcykge1xuICAgICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLmRldmljZTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgY2h1bmtzID0gdGhpcy5jaHVua3M7XG5cbiAgICAgICAgbGV0IGNvZGUgPSAnJztcbiAgICAgICAgbGV0IGNvZGVCb2R5ID0gJyc7XG5cbiAgICAgICAgLy8gY29kZSArPSBjaHVua3MuYmFzZVZTO1xuICAgICAgICBjb2RlID0gdGhpcy5fdnNBZGRCYXNlQ29kZShjb2RlLCBjaHVua3MsIG9wdGlvbnMpO1xuXG4gICAgICAgIGNvZGVCb2R5ICs9IFwiICAgdlBvc2l0aW9uVyAgICA9IGdldFdvcmxkUG9zaXRpb24oKTtcXG5cIjtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBhc3MgPT09IFNIQURFUl9ERVBUSCkge1xuICAgICAgICAgICAgY29kZSArPSAndmFyeWluZyBmbG9hdCB2RGVwdGg7XFxuJztcbiAgICAgICAgICAgIGNvZGUgKz0gJyNpZm5kZWYgVklFV01BVFJJWFxcbic7XG4gICAgICAgICAgICBjb2RlICs9ICcjZGVmaW5lIFZJRVdNQVRSSVhcXG4nO1xuICAgICAgICAgICAgY29kZSArPSAndW5pZm9ybSBtYXQ0IG1hdHJpeF92aWV3O1xcbic7XG4gICAgICAgICAgICBjb2RlICs9ICcjZW5kaWZcXG4nO1xuICAgICAgICAgICAgY29kZSArPSAnI2lmbmRlZiBDQU1FUkFQTEFORVNcXG4nO1xuICAgICAgICAgICAgY29kZSArPSAnI2RlZmluZSBDQU1FUkFQTEFORVNcXG4nO1xuICAgICAgICAgICAgY29kZSArPSAndW5pZm9ybSB2ZWM0IGNhbWVyYV9wYXJhbXM7XFxuXFxuJztcbiAgICAgICAgICAgIGNvZGUgKz0gJyNlbmRpZlxcbic7XG4gICAgICAgICAgICBjb2RlQm9keSArPSBcIiAgICB2RGVwdGggPSAtKG1hdHJpeF92aWV3ICogdmVjNCh2UG9zaXRpb25XLDEuMCkpLnogKiBjYW1lcmFfcGFyYW1zLng7XFxuXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnVzZUluc3RhbmNpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5pbnN0YW5jZV9saW5lMSA9IFNFTUFOVElDX0FUVFIxMjtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5pbnN0YW5jZV9saW5lMiA9IFNFTUFOVElDX0FUVFIxMztcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5pbnN0YW5jZV9saW5lMyA9IFNFTUFOVElDX0FUVFIxNDtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5pbnN0YW5jZV9saW5lNCA9IFNFTUFOVElDX0FUVFIxNTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5pbnN0YW5jZV9saW5lNSA9IFNFTUFOVElDX0FUVFIxMTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5pbnN0YW5jZV9saW5lNiA9IFNFTUFOVElDX0FUVFIxMDtcbiAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLmluc3RhbmNpbmdWUztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm5lZWRzTm9ybWFsKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudmVydGV4X25vcm1hbCA9IFNFTUFOVElDX05PUk1BTDtcbiAgICAgICAgICAgIGNvZGVCb2R5ICs9IFwiICAgdk5vcm1hbFcgPSBnZXROb3JtYWwoKTtcXG5cIjtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVmbGVjdGlvblNvdXJjZSA9PT0gJ3NwaGVyZU1hcCcgJiYgZGV2aWNlLmZyYWdtZW50VW5pZm9ybXNDb3VudCA8PSAxNikge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLnZpZXdOb3JtYWxWUztcbiAgICAgICAgICAgICAgICBjb2RlQm9keSArPSBcIiAgIHZOb3JtYWxWICAgID0gZ2V0Vmlld05vcm1hbCgpO1xcblwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5oYXNUYW5nZW50cyAmJiAob3B0aW9ucy51c2VIZWlnaHRzIHx8IG9wdGlvbnMudXNlTm9ybWFscyB8fCBvcHRpb25zLmVuYWJsZUdHWFNwZWN1bGFyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy52ZXJ0ZXhfdGFuZ2VudCA9IFNFTUFOVElDX1RBTkdFTlQ7XG4gICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3MudGFuZ2VudEJpbm9ybWFsVlM7XG4gICAgICAgICAgICAgICAgY29kZUJvZHkgKz0gXCIgICB2VGFuZ2VudFcgICA9IGdldFRhbmdlbnQoKTtcXG5cIjtcbiAgICAgICAgICAgICAgICBjb2RlQm9keSArPSBcIiAgIHZCaW5vcm1hbFcgID0gZ2V0Qmlub3JtYWwoKTtcXG5cIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5lbmFibGVHR1hTcGVjdWxhciB8fCAhZGV2aWNlLmV4dFN0YW5kYXJkRGVyaXZhdGl2ZXMpIHtcbiAgICAgICAgICAgICAgICBjb2RlQm9keSArPSBcIiAgIHZPYmplY3RTcGFjZVVwVyA9IG5vcm1hbGl6ZShkTm9ybWFsTWF0cml4ICogdmVjMygwLCAxLCAwKSk7XFxuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtYXhVdlNldHMgPSAyO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4VXZTZXRzOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh1c2VVdltpXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlc1tcInZlcnRleF90ZXhDb29yZFwiICsgaV0gPSBcIlRFWENPT1JEXCIgKyBpO1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzW1widXZcIiArIGkgKyBcIlZTXCJdO1xuICAgICAgICAgICAgICAgIGNvZGVCb2R5ICs9IFwiICAgdmVjMiB1dlwiICsgaSArIFwiID0gZ2V0VXZcIiArIGkgKyBcIigpO1xcblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVzZVVubW9kaWZpZWRVdltpXSkge1xuICAgICAgICAgICAgICAgIGNvZGVCb2R5ICs9IFwiICAgdlV2XCIgKyBpICsgXCIgPSB1dlwiICsgaSArIFwiO1xcblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29kZXMgPSBbY29kZSwgdGhpcy52YXJ5aW5ncywgY29kZUJvZHksIFtdXTtcblxuICAgICAgICBtYXBUcmFuc2Zvcm1zLmZvckVhY2goKG1hcFRyYW5zZm9ybSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fc2V0TWFwVHJhbnNmb3JtKGNvZGVzLCBtYXBUcmFuc2Zvcm0ubmFtZSwgbWFwVHJhbnNmb3JtLmlkLCBtYXBUcmFuc2Zvcm0udXYpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb2RlID0gY29kZXNbMF07XG4gICAgICAgIHRoaXMudmFyeWluZ3MgPSBjb2Rlc1sxXTtcbiAgICAgICAgY29kZUJvZHkgPSBjb2Rlc1syXTtcblxuICAgICAgICBpZiAob3B0aW9ucy52ZXJ0ZXhDb2xvcnMpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy52ZXJ0ZXhfY29sb3IgPSBTRU1BTlRJQ19DT0xPUjtcbiAgICAgICAgICAgIGNvZGVCb2R5ICs9IFwiICAgdlZlcnRleENvbG9yID0gdmVydGV4X2NvbG9yO1xcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlTXNkZiAmJiBvcHRpb25zLm1zZGZUZXh0QXR0cmlidXRlKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudmVydGV4X291dGxpbmVQYXJhbWV0ZXJzID0gU0VNQU5USUNfQVRUUjg7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudmVydGV4X3NoYWRvd1BhcmFtZXRlcnMgPSBTRU1BTlRJQ19BVFRSOTtcblxuICAgICAgICAgICAgY29kZUJvZHkgKz0gXCIgICAgdW5wYWNrTXNkZlBhcmFtcygpO1xcblwiO1xuXG4gICAgICAgICAgICBjb2RlICs9IGNodW5rcy5tc2RmVlM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtb3JwaGluZ1xuICAgICAgICBpZiAob3B0aW9ucy51c2VNb3JwaFBvc2l0aW9uIHx8IG9wdGlvbnMudXNlTW9ycGhOb3JtYWwpIHtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlTW9ycGhUZXh0dXJlQmFzZWQpIHtcblxuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIjZGVmaW5lIE1PUlBISU5HX1RFWFRVUkVfQkFTRURcXG5cIjtcblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZU1vcnBoUG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgTU9SUEhJTkdfVEVYVFVSRV9CQVNFRF9QT1NJVElPTlxcblwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZU1vcnBoTm9ybWFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIjZGVmaW5lIE1PUlBISU5HX1RFWFRVUkVfQkFTRURfTk9STUFMXFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gdmVydGV4IGlkcyBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX3ZlcnRleF9pZCA9IFNFTUFOVElDX0FUVFIxNTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb3JwaElkVHlwZSA9IGRldmljZS5pc1dlYkdQVSA/ICd1aW50JyA6ICdmbG9hdCc7XG4gICAgICAgICAgICAgICAgY29kZSArPSBgYXR0cmlidXRlICR7bW9ycGhJZFR5cGV9IG1vcnBoX3ZlcnRleF9pZDtcXG5gO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgLy8gc2V0IHVwIDggc2xvdHMgZm9yIG1vcnBoaW5nLiB0aGVzZSBhcmUgc3VwcG9ydGVkIGNvbWJpbmF0aW9uczogUFBQUFBQUFAsIE5OTk5OTk5OLCBQUFBQTk5OTlxuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIjZGVmaW5lIE1PUlBISU5HXFxuXCI7XG5cbiAgICAgICAgICAgICAgICAvLyBmaXJzdCA0IHNsb3RzIGFyZSBlaXRoZXIgcG9zaXRpb24gb3Igbm9ybWFsXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlTW9ycGhQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfcG9zMCA9IFNFTUFOVElDX0FUVFI4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfcG9zMSA9IFNFTUFOVElDX0FUVFI5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfcG9zMiA9IFNFTUFOVElDX0FUVFIxMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX3BvczMgPSBTRU1BTlRJQ19BVFRSMTE7XG5cbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgTU9SUEhJTkdfUE9TMDNcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX3BvczA7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9wb3MxO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfcG9zMjtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX3BvczM7XFxuXCI7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMudXNlTW9ycGhOb3JtYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX25ybTAgPSBTRU1BTlRJQ19BVFRSODtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX25ybTEgPSBTRU1BTlRJQ19BVFRSOTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX25ybTIgPSBTRU1BTlRJQ19BVFRSMTA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF9ucm0zID0gU0VNQU5USUNfQVRUUjExO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIjZGVmaW5lIE1PUlBISU5HX05STTAzXFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9ucm0wO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfbnJtMTtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX25ybTI7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9ucm0zO1xcblwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIG5leHQgNCBzbG90cyBhcmUgZWl0aGVyIHBvc2l0aW9uIG9yIG5vcm1hbFxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy51c2VNb3JwaE5vcm1hbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfcG9zNCA9IFNFTUFOVElDX0FUVFIxMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX3BvczUgPSBTRU1BTlRJQ19BVFRSMTM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF9wb3M2ID0gU0VNQU5USUNfQVRUUjE0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfcG9zNyA9IFNFTUFOVElDX0FUVFIxNTtcblxuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBNT1JQSElOR19QT1M0N1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfcG9zNDtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX3BvczU7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9wb3M2O1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfcG9zNztcXG5cIjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfbnJtNCA9IFNFTUFOVElDX0FUVFIxMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX25ybTUgPSBTRU1BTlRJQ19BVFRSMTM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF9ucm02ID0gU0VNQU5USUNfQVRUUjE0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfbnJtNyA9IFNFTUFOVElDX0FUVFIxNTtcblxuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBNT1JQSElOR19OUk00N1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfbnJtNDtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX25ybTU7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9ucm02O1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfbnJtNztcXG5cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5za2luKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudmVydGV4X2JvbmVXZWlnaHRzID0gU0VNQU5USUNfQkxFTkRXRUlHSFQ7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudmVydGV4X2JvbmVJbmRpY2VzID0gU0VNQU5USUNfQkxFTkRJTkRJQ0VTO1xuICAgICAgICAgICAgY29kZSArPSBTaGFkZXJHZW5lcmF0b3Iuc2tpbkNvZGUoZGV2aWNlLCBjaHVua3MpO1xuICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgU0tJTlxcblwiO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMudXNlSW5zdGFuY2luZykge1xuICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgSU5TVEFOQ0lOR1xcblwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnNjcmVlblNwYWNlKSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBTQ1JFRU5TUEFDRVxcblwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnBpeGVsU25hcCkge1xuICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgUElYRUxTTkFQXFxuXCI7XG4gICAgICAgIH1cblxuICAgICAgICBjb2RlID0gdGhpcy5fdnNBZGRUcmFuc2Zvcm1Db2RlKGNvZGUsIGRldmljZSwgY2h1bmtzLCBvcHRpb25zKTtcblxuICAgICAgICBpZiAodGhpcy5uZWVkc05vcm1hbCkge1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3Mubm9ybWFsVlM7XG4gICAgICAgIH1cblxuICAgICAgICBjb2RlICs9IFwiXFxuXCI7XG4gICAgICAgIGNvZGUgKz0gY2h1bmtzLnN0YXJ0VlM7XG4gICAgICAgIGNvZGUgKz0gY29kZUJvZHk7XG4gICAgICAgIGNvZGUgKz0gY2h1bmtzLmVuZFZTO1xuICAgICAgICBjb2RlICs9IFwifVwiO1xuXG4gICAgICAgIC8vIGJ1aWxkIHZhcnlpbmdzXG4gICAgICAgIE9iamVjdC5rZXlzKGJ1aWx0aW5WYXJ5aW5ncykuZm9yRWFjaCgodikgPT4ge1xuICAgICAgICAgICAgaWYgKGNvZGUuaW5kZXhPZih2KSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YXJ5aW5ncyArPSBgdmFyeWluZyAke2J1aWx0aW5WYXJ5aW5nc1t2XX0gJHt2fTtcXG5gO1xuICAgICAgICAgICAgICAgIHRoaXMudmFyeWluZ0RlZmluZXMgKz0gYCNkZWZpbmUgVkFSWUlOR18ke3YudG9VcHBlckNhc2UoKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzaGFkZXJQYXNzRGVmaW5lcyA9IHRoaXMuc2hhZGVyUGFzc0luZm8uc2hhZGVyRGVmaW5lcztcbiAgICAgICAgdGhpcy52c2hhZGVyID0gc2hhZGVyUGFzc0RlZmluZXMgKyB0aGlzLnZhcnlpbmdzICsgY29kZTtcbiAgICB9XG5cbiAgICBfZnNHZXRCZWdpbkNvZGUoKSB7XG5cbiAgICAgICAgbGV0IGNvZGUgPSB0aGlzLnNoYWRlclBhc3NJbmZvLnNoYWRlckRlZmluZXM7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRlZmluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvZGUgKz0gYCNkZWZpbmUgJHt0aGlzLmRlZmluZXNbaV19XFxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb2RlO1xuICAgIH1cblxuICAgIF9mc0dldFBpY2tQYXNzQ29kZSgpIHtcbiAgICAgICAgbGV0IGNvZGUgPSB0aGlzLl9mc0dldEJlZ2luQ29kZSgpO1xuICAgICAgICBjb2RlICs9IFwidW5pZm9ybSB2ZWM0IHVDb2xvcjtcXG5cIjtcbiAgICAgICAgY29kZSArPSB0aGlzLnZhcnlpbmdzO1xuICAgICAgICBjb2RlICs9IHRoaXMudmFyeWluZ0RlZmluZXM7XG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZERlY2w7XG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZENvZGU7XG4gICAgICAgIGNvZGUgKz0gU2hhZGVyR2VuZXJhdG9yLmJlZ2luKCk7XG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZEZ1bmM7XG4gICAgICAgIGNvZGUgKz0gXCIgICAgZ2xfRnJhZ0NvbG9yID0gdUNvbG9yO1xcblwiO1xuICAgICAgICBjb2RlICs9IFNoYWRlckdlbmVyYXRvci5lbmQoKTtcbiAgICAgICAgcmV0dXJuIGNvZGU7XG4gICAgfVxuXG4gICAgX2ZzR2V0RGVwdGhQYXNzQ29kZSgpIHtcbiAgICAgICAgY29uc3QgY2h1bmtzID0gdGhpcy5jaHVua3M7XG5cbiAgICAgICAgbGV0IGNvZGUgPSB0aGlzLl9mc0dldEJlZ2luQ29kZSgpO1xuXG4gICAgICAgIGNvZGUgKz0gJ3ZhcnlpbmcgZmxvYXQgdkRlcHRoO1xcbic7XG4gICAgICAgIGNvZGUgKz0gdGhpcy52YXJ5aW5ncztcbiAgICAgICAgY29kZSArPSB0aGlzLnZhcnlpbmdEZWZpbmVzO1xuICAgICAgICBjb2RlICs9IGNodW5rcy5wYWNrRGVwdGhQUztcbiAgICAgICAgY29kZSArPSB0aGlzLmZyb250ZW5kRGVjbDtcbiAgICAgICAgY29kZSArPSB0aGlzLmZyb250ZW5kQ29kZTtcbiAgICAgICAgY29kZSArPSBTaGFkZXJHZW5lcmF0b3IuYmVnaW4oKTtcbiAgICAgICAgY29kZSArPSB0aGlzLmZyb250ZW5kRnVuYztcbiAgICAgICAgY29kZSArPSBcIiAgICBnbF9GcmFnQ29sb3IgPSBwYWNrRmxvYXQodkRlcHRoKTtcXG5cIjtcbiAgICAgICAgY29kZSArPSBTaGFkZXJHZW5lcmF0b3IuZW5kKCk7XG5cbiAgICAgICAgcmV0dXJuIGNvZGU7XG4gICAgfVxuXG4gICAgX2ZzR2V0U2hhZG93UGFzc0NvZGUoKSB7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMuZGV2aWNlO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBjaHVua3MgPSB0aGlzLmNodW5rcztcbiAgICAgICAgY29uc3QgdmFyeWluZ3MgPSB0aGlzLnZhcnlpbmdzO1xuXG4gICAgICAgIGNvbnN0IGxpZ2h0VHlwZSA9IHRoaXMuc2hhZGVyUGFzc0luZm8ubGlnaHRUeXBlO1xuICAgICAgICBsZXQgc2hhZG93VHlwZSA9IHRoaXMuc2hhZGVyUGFzc0luZm8uc2hhZG93VHlwZTtcblxuICAgICAgICAvLyBJZiBub3QgYSBkaXJlY3Rpb25hbCBsaWdodCBhbmQgdXNpbmcgY2x1c3RlcmVkLCBmYWxsIGJhY2sgdG8gdXNpbmcgUENGM3gzIGlmIHNoYWRvdyB0eXBlIGlzbid0IHN1cHBvcnRlZFxuICAgICAgICBpZiAobGlnaHRUeXBlICE9PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwgJiYgb3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmIChzaGFkb3dUeXBlID09PSBTSEFET1dfVlNNOCB8fCBzaGFkb3dUeXBlID09PSBTSEFET1dfVlNNMTYgfHwgc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTMyIHx8IHNoYWRvd1R5cGUgPT09IFNIQURPV19QQ1NTKSB7XG4gICAgICAgICAgICAgICAgc2hhZG93VHlwZSA9IFNIQURPV19QQ0YzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNvZGUgPSB0aGlzLl9mc0dldEJlZ2luQ29kZSgpO1xuXG4gICAgICAgIGlmIChkZXZpY2UuZXh0U3RhbmRhcmREZXJpdmF0aXZlcyAmJiAhZGV2aWNlLndlYmdsMiAmJiAhZGV2aWNlLmlzV2ViR1BVKSB7XG4gICAgICAgICAgICBjb2RlICs9ICd1bmlmb3JtIHZlYzIgcG9seWdvbk9mZnNldDtcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNoYWRvd1R5cGUgPT09IFNIQURPV19WU00zMikge1xuICAgICAgICAgICAgaWYgKGRldmljZS50ZXh0dXJlRmxvYXRIaWdoUHJlY2lzaW9uKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSAnI2RlZmluZSBWU01fRVhQT05FTlQgMTUuMFxcblxcbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gJyNkZWZpbmUgVlNNX0VYUE9ORU5UIDUuNTRcXG5cXG4nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNoYWRvd1R5cGUgPT09IFNIQURPV19WU00xNikge1xuICAgICAgICAgICAgY29kZSArPSAnI2RlZmluZSBWU01fRVhQT05FTlQgNS41NFxcblxcbic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlnaHRUeXBlICE9PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gJ3VuaWZvcm0gdmVjMyB2aWV3X3Bvc2l0aW9uO1xcbic7XG4gICAgICAgICAgICBjb2RlICs9ICd1bmlmb3JtIGZsb2F0IGxpZ2h0X3JhZGl1cztcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgY29kZSArPSB2YXJ5aW5ncztcbiAgICAgICAgY29kZSArPSB0aGlzLnZhcnlpbmdEZWZpbmVzO1xuICAgICAgICBjb2RlICs9IHRoaXMuZnJvbnRlbmREZWNsO1xuICAgICAgICBjb2RlICs9IHRoaXMuZnJvbnRlbmRDb2RlO1xuXG4gICAgICAgIGNvbnN0IG1heVBhY2tEZXB0aCA9IHNoYWRvd1R5cGUgPT09IFNIQURPV19QQ0YxIHx8IHNoYWRvd1R5cGUgPT09IFNIQURPV19QQ0YzIHx8IHNoYWRvd1R5cGUgPT09IFNIQURPV19QQ0Y1IHx8IHNoYWRvd1R5cGUgPT09IFNIQURPV19QQ1NTO1xuICAgICAgICBjb25zdCBtdXN0UGFja0RlcHRoID0gKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX09NTkkgJiYgc2hhZG93VHlwZSAhPT0gU0hBRE9XX1BDU1MgJiYgIW9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkKTtcbiAgICAgICAgY29uc3QgdXNlUGFja2VkRGVwdGggPSBtYXlQYWNrRGVwdGggJiYgIWRldmljZS5zdXBwb3J0c0RlcHRoU2hhZG93IHx8IG11c3RQYWNrRGVwdGg7XG4gICAgICAgIGlmICh1c2VQYWNrZWREZXB0aCkge1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3MucGFja0RlcHRoUFM7XG4gICAgICAgIH0gZWxzZSBpZiAoc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTgpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gXCJ2ZWMyIGVuY29kZUZsb2F0UkcoIGZsb2F0IHYgKSB7XFxuXCI7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIHZlYzIgZW5jID0gdmVjMigxLjAsIDI1NS4wKSAqIHY7XFxuXCI7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIGVuYyA9IGZyYWN0KGVuYyk7XFxuXCI7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIGVuYyAtPSBlbmMueXkgKiB2ZWMyKDEuMC8yNTUuMCwgMS4wLzI1NS4wKTtcXG5cIjtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgcmV0dXJuIGVuYztcXG5cIjtcbiAgICAgICAgICAgIGNvZGUgKz0gXCJ9XFxuXFxuXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2hhZG93VHlwZSA9PT0gU0hBRE9XX1BDU1MpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gc2hhZGVyQ2h1bmtzLmxpbmVhcml6ZURlcHRoUFM7XG4gICAgICAgIH1cblxuICAgICAgICBjb2RlICs9IFNoYWRlckdlbmVyYXRvci5iZWdpbigpO1xuXG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZEZ1bmM7XG5cbiAgICAgICAgY29uc3QgaXNWc20gPSBzaGFkb3dUeXBlID09PSBTSEFET1dfVlNNOCB8fCBzaGFkb3dUeXBlID09PSBTSEFET1dfVlNNMTYgfHwgc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTMyO1xuICAgICAgICBjb25zdCBhcHBseVNsb3BlU2NhbGVCaWFzID0gIWRldmljZS53ZWJnbDIgJiYgZGV2aWNlLmV4dFN0YW5kYXJkRGVyaXZhdGl2ZXMgJiYgIWRldmljZS5pc1dlYkdQVTtcblxuICAgICAgICAvLyBVc2UgcGVyc3BlY3RpdmUgZGVwdGggZm9yOlxuICAgICAgICAvLyBEaXJlY3Rpb25hbDogQWx3YXlzIHNpbmNlIGxpZ2h0IGhhcyBubyBwb3NpdGlvblxuICAgICAgICAvLyBTcG90OiBJZiBub3QgdXNpbmcgVlNNXG4gICAgICAgIC8vIFBvaW50OiBOZXZlclxuICAgICAgICBjb25zdCB1c2VQZXJzcGVjdGl2ZURlcHRoID0gbGlnaHRUeXBlID09PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwgfHwgKCFpc1ZzbSAmJiBsaWdodFR5cGUgPT09IExJR0hUVFlQRV9TUE9UKTtcblxuICAgICAgICAvLyBGbGFnIGlmIHdlIGFyZSB1c2luZyBub24tc3RhbmRhcmQgZGVwdGgsIGkuZSBnbF9GcmFnQ29vcmQuelxuICAgICAgICBsZXQgaGFzTW9kaWZpZWREZXB0aCA9IGZhbHNlO1xuICAgICAgICBpZiAodXNlUGVyc3BlY3RpdmVEZXB0aCkge1xuICAgICAgICAgICAgY29kZSArPSBcIiAgICBmbG9hdCBkZXB0aCA9IGdsX0ZyYWdDb29yZC56O1xcblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29kZSArPSBcIiAgICBmbG9hdCBkZXB0aCA9IG1pbihkaXN0YW5jZSh2aWV3X3Bvc2l0aW9uLCB2UG9zaXRpb25XKSAvIGxpZ2h0X3JhZGl1cywgMC45OTk5OSk7XFxuXCI7XG4gICAgICAgICAgICBoYXNNb2RpZmllZERlcHRoID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhcHBseVNsb3BlU2NhbGVCaWFzKSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIGZsb2F0IG1pblZhbHVlID0gMi4zMzc0MzcwNTAwMTUzMTg2ZS0xMDsgLy8oMS4wIC8gMjU1LjApIC8gKDI1Ni4wICogMjU2LjAgKiAyNTYuMCk7XFxuXCI7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIGRlcHRoICs9IHBvbHlnb25PZmZzZXQueCAqIG1heChhYnMoZEZkeChkZXB0aCkpLCBhYnMoZEZkeShkZXB0aCkpKSArIG1pblZhbHVlICogcG9seWdvbk9mZnNldC55O1xcblwiO1xuICAgICAgICAgICAgaGFzTW9kaWZpZWREZXB0aCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlUGFja2VkRGVwdGgpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZ2xfRnJhZ0NvbG9yID0gcGFja0Zsb2F0KGRlcHRoKTtcXG5cIjtcbiAgICAgICAgfSBlbHNlIGlmICghaXNWc20pIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cG9ydFIzMiA9IHNoYWRvd1R5cGUgPT09IFNIQURPV19QQ1NTO1xuXG4gICAgICAgICAgICBpZiAoZXhwb3J0UjMyKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBnbF9GcmFnQ29sb3IuciA9IGRlcHRoO1xcblwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIC8vIElmIHdlIGVuZCB1cCB1c2luZyBtb2RpZmllZCBkZXB0aCwgaXQgbmVlZHMgdG8gYmUgZXhwbGljaXRseSB3cml0dGVuIHRvIGdsX0ZyYWdEZXB0aFxuICAgICAgICAgICAgICAgIGlmIChoYXNNb2RpZmllZERlcHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZ2xfRnJhZ0RlcHRoID0gZGVwdGg7XFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApO1xcblwiOyAvLyBqdXN0IHRoZSBzaW1wbGVzdCBjb2RlLCBjb2xvciBpcyBub3Qgd3JpdHRlbiBhbnl3YXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzaGFkb3dUeXBlID09PSBTSEFET1dfVlNNOCkge1xuICAgICAgICAgICAgY29kZSArPSBcIiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGVuY29kZUZsb2F0UkcoZGVwdGgpLCBlbmNvZGVGbG9hdFJHKGRlcHRoKmRlcHRoKSk7XFxuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2RlICs9IGNodW5rcy5zdG9yZUVWU01QUztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvZGUgKz0gU2hhZGVyR2VuZXJhdG9yLmVuZCgpO1xuXG4gICAgICAgIHJldHVybiBjb2RlO1xuICAgIH1cblxuICAgIC8vIHRoZSBiaWcgb25lXG4gICAgX2ZzR2V0TGl0UGFzc0NvZGUoKSB7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMuZGV2aWNlO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBjaHVua3MgPSB0aGlzLmNodW5rcztcblxuICAgICAgICBjb25zdCBkZWNsID0gbmV3IENodW5rQnVpbGRlcigpO1xuICAgICAgICBjb25zdCBmdW5jID0gbmV3IENodW5rQnVpbGRlcigpO1xuICAgICAgICBjb25zdCBiYWNrZW5kID0gbmV3IENodW5rQnVpbGRlcigpO1xuICAgICAgICBjb25zdCBjb2RlID0gbmV3IENodW5rQnVpbGRlcigpO1xuXG4gICAgICAgIGlmIChvcHRpb25zLm9wYWNpdHlGYWRlc1NwZWN1bGFyID09PSBmYWxzZSkge1xuICAgICAgICAgICAgZGVjbC5hcHBlbmQoJ3VuaWZvcm0gZmxvYXQgbWF0ZXJpYWxfYWxwaGFGYWRlOycpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lcy5wdXNoKFwiTElUX1NQRUNVTEFSXCIpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5yZWZsZWN0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5lcy5wdXNoKFwiTElUX1JFRkxFQ1RJT05TXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy51c2VDbGVhckNvYXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmluZXMucHVzaChcIkxJVF9DTEVBUkNPQVRcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZyZXNuZWxNb2RlbCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmluZXMucHVzaChcIkxJVF9TUEVDVUxBUl9GUkVTTkVMXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBlbmFibGUgY29uc2VydmUgZW5lcmd5IHBhdGggaW4gY2x1c3RlcmVkIGNodW5rXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jb25zZXJ2ZUVuZXJneSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5lcy5wdXNoKFwiTElUX0NPTlNFUlZFX0VORVJHWVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU2hlZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmluZXMucHVzaChcIkxJVF9TSEVFTlwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlSXJpZGVzY2VuY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmluZXMucHVzaChcIkxJVF9JUklERVNDRU5DRVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZSQUdNRU5UIFNIQURFUiBJTlBVVFM6IFVOSUZPUk1TXG4gICAgICAgIGNvbnN0IHNoYWRvd1R5cGVVc2VkID0gW107XG4gICAgICAgIGxldCBudW1TaGFkb3dMaWdodHMgPSAwO1xuICAgICAgICBsZXQgc2hhZG93ZWREaXJlY3Rpb25hbExpZ2h0VXNlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgdXNlVnNtID0gZmFsc2U7XG4gICAgICAgIGxldCB1c2VQY3NzID0gZmFsc2U7XG5cbiAgICAgICAgbGV0IGhhc0FyZWFMaWdodHMgPSBvcHRpb25zLmxpZ2h0cy5zb21lKGZ1bmN0aW9uIChsaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIGxpZ2h0Ll9zaGFwZSAmJiBsaWdodC5fc2hhcGUgIT09IExJR0hUU0hBUEVfUFVOQ1RVQUw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGlmIGNsdXN0ZXJlZCBsaWdodGluZyBoYXMgYXJlYSBsaWdodHMgZW5hYmxlZCwgaXQgYWx3YXlzIHJ1bnMgaW4gJ2FyZWEgbGlnaHRzIG1vZGUnXG4gICAgICAgIC8vIFRPRE86IG1heWJlIHdlIHNob3VsZCBhbHdheXMgdXNlIGl0IGFuZCByZW1vdmUgdGhlIG90aGVyIHdheT9cbiAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkICYmIG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdBcmVhTGlnaHRzRW5hYmxlZCkge1xuICAgICAgICAgICAgaGFzQXJlYUxpZ2h0cyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYXJlYUx1dHNQcmVjaXNpb24gPSAnaGlnaHAnO1xuICAgICAgICBpZiAoZGV2aWNlLmFyZWFMaWdodEx1dEZvcm1hdCA9PT0gUElYRUxGT1JNQVRfUkdCQTgpIHtcbiAgICAgICAgICAgIC8vIHVzZSBvZmZzZXQgYW5kIHNjYWxlIGZvciByZ2I4IGZvcm1hdCBsdXRzXG4gICAgICAgICAgICBkZWNsLmFwcGVuZChcIiNkZWZpbmUgQVJFQV9SOF9HOF9COF9BOF9MVVRTXCIpO1xuICAgICAgICAgICAgYXJlYUx1dHNQcmVjaXNpb24gPSAnbG93cCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzQXJlYUxpZ2h0cyB8fCBvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCIjZGVmaW5lIEFSRUFfTElHSFRTXCIpO1xuICAgICAgICAgICAgZGVjbC5hcHBlbmQoYHVuaWZvcm0gJHthcmVhTHV0c1ByZWNpc2lvbn0gc2FtcGxlcjJEIGFyZWFMaWdodHNMdXRUZXgxO2ApO1xuICAgICAgICAgICAgZGVjbC5hcHBlbmQoYHVuaWZvcm0gJHthcmVhTHV0c1ByZWNpc2lvbn0gc2FtcGxlcjJEIGFyZWFMaWdodHNMdXRUZXgyO2ApO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25zLmxpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbGlnaHQgPSBvcHRpb25zLmxpZ2h0c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGxpZ2h0VHlwZSA9IGxpZ2h0Ll90eXBlO1xuXG4gICAgICAgICAgICAvLyBza2lwIHVuaWZvcm0gZ2VuZXJhdGlvbiBmb3IgbG9jYWwgbGlnaHRzIGlmIGNsdXN0ZXJlZCBsaWdodGluZyBpcyBlbmFibGVkXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQgJiYgbGlnaHRUeXBlICE9PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGxpZ2h0U2hhcGUgPSAoaGFzQXJlYUxpZ2h0cyAmJiBsaWdodC5fc2hhcGUpID8gbGlnaHQuX3NoYXBlIDogTElHSFRTSEFQRV9QVU5DVFVBTDtcblxuICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIHZlYzMgbGlnaHRcIiArIGkgKyBcIl9jb2xvcjtcIik7XG5cbiAgICAgICAgICAgIGlmIChsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1BDU1MgJiYgbGlnaHQuY2FzdFNoYWRvd3MgJiYgIW9wdGlvbnMubm9TaGFkb3cpIHtcbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChgdW5pZm9ybSBmbG9hdCBsaWdodCR7aX1fc2hhZG93U2VhcmNoQXJlYTtgKTtcbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChgdW5pZm9ybSB2ZWM0IGxpZ2h0JHtpfV9jYW1lcmFQYXJhbXM7YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSB2ZWMzIGxpZ2h0XCIgKyBpICsgXCJfZGlyZWN0aW9uO1wiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIHZlYzMgbGlnaHRcIiArIGkgKyBcIl9wb3NpdGlvbjtcIik7XG4gICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIGZsb2F0IGxpZ2h0XCIgKyBpICsgXCJfcmFkaXVzO1wiKTtcbiAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfU1BPVCkge1xuICAgICAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gdmVjMyBsaWdodFwiICsgaSArIFwiX2RpcmVjdGlvbjtcIik7XG4gICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBmbG9hdCBsaWdodFwiICsgaSArIFwiX2lubmVyQ29uZUFuZ2xlO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIGZsb2F0IGxpZ2h0XCIgKyBpICsgXCJfb3V0ZXJDb25lQW5nbGU7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaWdodFNoYXBlICE9PSBMSUdIVFNIQVBFX1BVTkNUVUFMKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSB2ZWMzIGxpZ2h0XCIgKyBpICsgXCJfcG9zaXRpb247XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gdmVjMyBsaWdodFwiICsgaSArIFwiX2hhbGZXaWR0aDtcIik7XG4gICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIHZlYzMgbGlnaHRcIiArIGkgKyBcIl9oYWxmSGVpZ2h0O1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaWdodC5jYXN0U2hhZG93cyAmJiAhb3B0aW9ucy5ub1NoYWRvdykge1xuICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBtYXQ0IGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWF0cml4O1wiKTtcbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gZmxvYXQgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dJbnRlbnNpdHk7XCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0aW9uYWwgKGNhc2NhZGVkKSBzaGFkb3dzXG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBtYXQ0IGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWF0cml4UGFsZXR0ZVs0XTtcIik7XG4gICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBmbG9hdCBsaWdodFwiICsgaSArIFwiX3NoYWRvd0Nhc2NhZGVEaXN0YW5jZXNbNF07XCIpO1xuICAgICAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gZmxvYXQgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dDYXNjYWRlQ291bnQ7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gdmVjNCBsaWdodFwiICsgaSArIFwiX3NoYWRvd1BhcmFtcztcIik7IC8vIFdpZHRoLCBoZWlnaHQsIGJpYXMsIHJhZGl1c1xuICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgICAgICAgICBzaGFkb3dlZERpcmVjdGlvbmFsTGlnaHRVc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX09NTkkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIHNhbXBsZXJDdWJlIGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWFwO1wiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHQuX2lzUGNmICYmIGRldmljZS5zdXBwb3J0c0RlcHRoU2hhZG93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gc2FtcGxlcjJEU2hhZG93IGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWFwO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBzYW1wbGVyMkQgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dNYXA7XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG51bVNoYWRvd0xpZ2h0cysrO1xuICAgICAgICAgICAgICAgIHNoYWRvd1R5cGVVc2VkW2xpZ2h0Ll9zaGFkb3dUeXBlXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0Ll9pc1ZzbSkgdXNlVnNtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAobGlnaHQuX3NoYWRvd1R5cGUgPT09IFNIQURPV19QQ1NTKSB1c2VQY3NzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaWdodC5fY29va2llKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0Ll9jb29raWUuX2N1YmVtYXApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX09NTkkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBzYW1wbGVyQ3ViZSBsaWdodFwiICsgaSArIFwiX2Nvb2tpZTtcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gZmxvYXQgbGlnaHRcIiArIGkgKyBcIl9jb29raWVJbnRlbnNpdHk7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaWdodC5jYXN0U2hhZG93cyB8fCBvcHRpb25zLm5vU2hhZG93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIG1hdDQgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dNYXRyaXg7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBzYW1wbGVyMkQgbGlnaHRcIiArIGkgKyBcIl9jb29raWU7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIGZsb2F0IGxpZ2h0XCIgKyBpICsgXCJfY29va2llSW50ZW5zaXR5O1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGlnaHQuY2FzdFNoYWRvd3MgfHwgb3B0aW9ucy5ub1NoYWRvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBtYXQ0IGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWF0cml4O1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWdodC5fY29va2llVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIHZlYzQgbGlnaHRcIiArIGkgKyBcIl9jb29raWVNYXRyaXg7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSB2ZWMyIGxpZ2h0XCIgKyBpICsgXCJfY29va2llT2Zmc2V0O1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRCTlxuICAgICAgICBjb25zdCBoYXNUQk4gPSB0aGlzLm5lZWRzTm9ybWFsICYmIChvcHRpb25zLnVzZU5vcm1hbHMgfHwgb3B0aW9ucy51c2VDbGVhckNvYXROb3JtYWxzIHx8IChvcHRpb25zLmVuYWJsZUdHWFNwZWN1bGFyICYmICFvcHRpb25zLnVzZUhlaWdodHMpKTtcblxuICAgICAgICBpZiAoaGFzVEJOKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5oYXNUYW5nZW50cykge1xuICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKG9wdGlvbnMuZmFzdFRibiA/IGNodW5rcy5UQk5mYXN0UFMgOiBjaHVua3MuVEJOUFMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZGV2aWNlLmV4dFN0YW5kYXJkRGVyaXZhdGl2ZXMgJiYgKG9wdGlvbnMudXNlTm9ybWFscyB8fCBvcHRpb25zLnVzZUNsZWFyQ29hdE5vcm1hbHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5UQk5kZXJpdmF0aXZlUFMucmVwbGFjZSgvXFwkVVYvZywgdGhpcy5saWdodGluZ1V2KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLlRCTk9iamVjdFNwYWNlUFMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZJWE1FOiBvbmx5IGFkZCB0aGVzZSB3aGVuIG5lZWRlZFxuICAgICAgICBmdW5jLmFwcGVuZChjaHVua3Muc3BoZXJpY2FsUFMpO1xuICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuZGVjb2RlUFMpO1xuICAgICAgICBmdW5jLmFwcGVuZChTaGFkZXJHZW5lcmF0b3IuZ2FtbWFDb2RlKG9wdGlvbnMuZ2FtbWEsIGNodW5rcykpO1xuICAgICAgICBmdW5jLmFwcGVuZChTaGFkZXJHZW5lcmF0b3IudG9uZW1hcENvZGUob3B0aW9ucy50b25lTWFwLCBjaHVua3MpKTtcbiAgICAgICAgZnVuYy5hcHBlbmQoU2hhZGVyR2VuZXJhdG9yLmZvZ0NvZGUob3B0aW9ucy5mb2csIGNodW5rcykpO1xuXG4gICAgICAgIC8vIGZyb250ZW5kXG4gICAgICAgIGZ1bmMuYXBwZW5kKHRoaXMuZnJvbnRlbmRDb2RlKTtcblxuICAgICAgICBpZiAob3B0aW9ucy51c2VDdWJlTWFwUm90YXRpb24pIHtcbiAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwiI2RlZmluZSBDVUJFTUFQX1JPVEFUSU9OXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubmVlZHNOb3JtYWwpIHtcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5jdWJlTWFwUm90YXRlUFMpO1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQob3B0aW9ucy5jdWJlTWFwUHJvamVjdGlvbiA+IDAgPyBjaHVua3MuY3ViZU1hcFByb2plY3RCb3hQUyA6IGNodW5rcy5jdWJlTWFwUHJvamVjdE5vbmVQUyk7XG4gICAgICAgICAgICBmdW5jLmFwcGVuZChvcHRpb25zLnNreWJveEludGVuc2l0eSA/IGNodW5rcy5lbnZNdWx0aXBseVBTIDogY2h1bmtzLmVudkNvbnN0UFMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCh0aGlzLmxpZ2h0aW5nICYmIG9wdGlvbnMudXNlU3BlY3VsYXIpIHx8IHRoaXMucmVmbGVjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZU1ldGFsbmVzcykge1xuICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5tZXRhbG5lc3NNb2R1bGF0ZVBTKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZnJlc25lbE1vZGVsID09PSBGUkVTTkVMX1NDSExJQ0spIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuZnJlc25lbFNjaGxpY2tQUyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUlyaWRlc2NlbmNlKSB7XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLmlyaWRlc2NlbmNlRGlmZnJhY3Rpb25QUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy51c2VBbykge1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLmFvRGlmZnVzZU9jY1BTKTtcbiAgICAgICAgICAgIHN3aXRjaCAob3B0aW9ucy5vY2NsdWRlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFNQRUNPQ0NfQU86XG4gICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKG9wdGlvbnMub2NjbHVkZVNwZWN1bGFyRmxvYXQgPyBjaHVua3MuYW9TcGVjT2NjU2ltcGxlUFMgOiBjaHVua3MuYW9TcGVjT2NjQ29uc3RTaW1wbGVQUyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgU1BFQ09DQ19HTE9TU0RFUEVOREVOVDpcbiAgICAgICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQob3B0aW9ucy5vY2NsdWRlU3BlY3VsYXJGbG9hdCA/IGNodW5rcy5hb1NwZWNPY2NQUyA6IGNodW5rcy5hb1NwZWNPY2NDb25zdFBTKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5yZWZsZWN0aW9uU291cmNlID09PSAnZW52QXRsYXNIUScpIHtcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKG9wdGlvbnMuZml4U2VhbXMgPyBjaHVua3MuZml4Q3ViZW1hcFNlYW1zU3RyZXRjaFBTIDogY2h1bmtzLmZpeEN1YmVtYXBTZWFtc05vbmVQUyk7XG4gICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuZW52QXRsYXNQUyk7XG4gICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MucmVmbGVjdGlvbkVudkhRUFNcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwkREVDT0RFX0NVQkVNQVAvZywgQ2h1bmtVdGlscy5kZWNvZGVGdW5jKG9wdGlvbnMucmVmbGVjdGlvbkN1YmVtYXBFbmNvZGluZykpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcJERFQ09ERS9nLCBDaHVua1V0aWxzLmRlY29kZUZ1bmMob3B0aW9ucy5yZWZsZWN0aW9uRW5jb2RpbmcpKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlZmxlY3Rpb25Tb3VyY2UgPT09ICdlbnZBdGxhcycpIHtcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5lbnZBdGxhc1BTKTtcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5yZWZsZWN0aW9uRW52UFMucmVwbGFjZSgvXFwkREVDT0RFL2csIENodW5rVXRpbHMuZGVjb2RlRnVuYyhvcHRpb25zLnJlZmxlY3Rpb25FbmNvZGluZykpKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlZmxlY3Rpb25Tb3VyY2UgPT09ICdjdWJlTWFwJykge1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQob3B0aW9ucy5maXhTZWFtcyA/IGNodW5rcy5maXhDdWJlbWFwU2VhbXNTdHJldGNoUFMgOiBjaHVua3MuZml4Q3ViZW1hcFNlYW1zTm9uZVBTKTtcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5yZWZsZWN0aW9uQ3ViZVBTLnJlcGxhY2UoL1xcJERFQ09ERS9nLCBDaHVua1V0aWxzLmRlY29kZUZ1bmMob3B0aW9ucy5yZWZsZWN0aW9uRW5jb2RpbmcpKSk7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZWZsZWN0aW9uU291cmNlID09PSAnc3BoZXJlTWFwJykge1xuICAgICAgICAgICAgY29uc3Qgc2NvZGUgPSBkZXZpY2UuZnJhZ21lbnRVbmlmb3Jtc0NvdW50ID4gMTYgPyBjaHVua3MucmVmbGVjdGlvblNwaGVyZVBTIDogY2h1bmtzLnJlZmxlY3Rpb25TcGhlcmVMb3dQUztcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKHNjb2RlLnJlcGxhY2UoL1xcJERFQ09ERS9nLCBDaHVua1V0aWxzLmRlY29kZUZ1bmMob3B0aW9ucy5yZWZsZWN0aW9uRW5jb2RpbmcpKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5yZWZsZWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlQ2xlYXJDb2F0KSB7XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLnJlZmxlY3Rpb25DQ1BTKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZVNoZWVuKSB7XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLnJlZmxlY3Rpb25TaGVlblBTKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnVzZVJlZnJhY3Rpb24pIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUR5bmFtaWNSZWZyYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLnJlZnJhY3Rpb25EeW5hbWljUFMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlZmxlY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLnJlZnJhY3Rpb25DdWJlUFMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlU2hlZW4pIHtcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5saWdodFNoZWVuUFMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2x1c3RlcmVkIGxpZ2h0aW5nXG4gICAgICAgIGlmIChvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCkge1xuXG4gICAgICAgICAgICAvLyBpbmNsdWRlIHRoaXMgYmVmb3JlIHNoYWRvdyAvIGNvb2tpZSBjb2RlXG4gICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuY2x1c3RlcmVkTGlnaHRVdGlsc1BTKTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nQ29va2llc0VuYWJsZWQpXG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLmNsdXN0ZXJlZExpZ2h0Q29va2llc1BTKTtcblxuICAgICAgICAgICAgLy8gaW5jbHVkZSBzaGFkb3cgY2h1bmtzIGNsdXN0ZXJlZCBsaWdodHMgc3VwcG9ydFxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdTaGFkb3dzRW5hYmxlZCAmJiAhb3B0aW9ucy5ub1NoYWRvdykge1xuICAgICAgICAgICAgICAgIHNoYWRvd1R5cGVVc2VkW1NIQURPV19QQ0YzXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2hhZG93VHlwZVVzZWRbU0hBRE9XX1BDRjVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzaGFkb3dUeXBlVXNlZFtTSEFET1dfUENTU10gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG51bVNoYWRvd0xpZ2h0cyA+IDAgfHwgb3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmIChzaGFkb3dlZERpcmVjdGlvbmFsTGlnaHRVc2VkKSB7XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLnNoYWRvd0Nhc2NhZGVzUFMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNoYWRvd1R5cGVVc2VkW1NIQURPV19QQ0YxXSB8fCBzaGFkb3dUeXBlVXNlZFtTSEFET1dfUENGM10pIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3Muc2hhZG93U3RhbmRhcmRQUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hhZG93VHlwZVVzZWRbU0hBRE9XX1BDRjVdICYmIChkZXZpY2Uud2ViZ2wyIHx8IGRldmljZS5pc1dlYkdQVSkpIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3Muc2hhZG93U3RhbmRhcmRHTDJQUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlVnNtKSB7XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLnNoYWRvd1ZTTV9jb21tb25QUyk7XG4gICAgICAgICAgICAgICAgaWYgKHNoYWRvd1R5cGVVc2VkW1NIQURPV19WU004XSkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3Muc2hhZG93VlNNOFBTKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNoYWRvd1R5cGVVc2VkW1NIQURPV19WU00xNl0pIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoZGV2aWNlLmV4dFRleHR1cmVIYWxmRmxvYXRMaW5lYXIgPyBjaHVua3Muc2hhZG93RVZTTVBTLnJlcGxhY2UoL1xcJC9nLCBcIjE2XCIpIDogY2h1bmtzLnNoYWRvd0VWU01uUFMucmVwbGFjZSgvXFwkL2csIFwiMTZcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2hhZG93VHlwZVVzZWRbU0hBRE9XX1ZTTTMyXSkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChkZXZpY2UuZXh0VGV4dHVyZUZsb2F0TGluZWFyID8gY2h1bmtzLnNoYWRvd0VWU01QUy5yZXBsYWNlKC9cXCQvZywgXCIzMlwiKSA6IGNodW5rcy5zaGFkb3dFVlNNblBTLnJlcGxhY2UoL1xcJC9nLCBcIjMyXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlUGNzcykge1xuICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5saW5lYXJpemVEZXB0aFBTKTtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3Muc2hhZG93UENTU1BTKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEoZGV2aWNlLndlYmdsMiB8fCBkZXZpY2UuZXh0U3RhbmRhcmREZXJpdmF0aXZlcyB8fCBkZXZpY2UuaXNXZWJHUFUpKSB7XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLmJpYXNDb25zdFBTKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmVuYWJsZUdHWFNwZWN1bGFyKSBmdW5jLmFwcGVuZChcInVuaWZvcm0gZmxvYXQgbWF0ZXJpYWxfYW5pc290cm9weTtcIik7XG5cbiAgICAgICAgaWYgKHRoaXMubGlnaHRpbmcpIHtcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5saWdodERpZmZ1c2VMYW1iZXJ0UFMpO1xuICAgICAgICAgICAgaWYgKGhhc0FyZWFMaWdodHMgfHwgb3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0FyZWFMaWdodHNFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLmx0Y1BTKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB1c2VPbGRBbWJpZW50ID0gZmFsc2U7XG4gICAgICAgIGlmIChvcHRpb25zLnVzZVNwZWN1bGFyKSB7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmxpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQob3B0aW9ucy5zaGFkaW5nTW9kZWwgPT09IFNQRUNVTEFSX1BIT05HID8gY2h1bmtzLmxpZ2h0U3BlY3VsYXJQaG9uZ1BTIDogKG9wdGlvbnMuZW5hYmxlR0dYU3BlY3VsYXIgPyBjaHVua3MubGlnaHRTcGVjdWxhckFuaXNvR0dYUFMgOiBjaHVua3MubGlnaHRTcGVjdWxhckJsaW5uUFMpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmZyZXNuZWxNb2RlbCAmJiAhdGhpcy5yZWZsZWN0aW9ucyAmJiAhb3B0aW9ucy5kaWZmdXNlTWFwRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSB2ZWMzIG1hdGVyaWFsX2FtYmllbnQ7XCIpO1xuICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwiI2RlZmluZSBMSVRfT0xEX0FNQklFTlRcIik7XG4gICAgICAgICAgICAgICAgdXNlT2xkQW1iaWVudCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuY29tYmluZVBTKTtcblxuICAgICAgICAvLyBsaWdodG1hcCBzdXBwb3J0XG4gICAgICAgIGlmIChvcHRpb25zLmxpZ2h0TWFwRW5hYmxlZCkge1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQoKG9wdGlvbnMudXNlU3BlY3VsYXIgJiYgb3B0aW9ucy5kaXJMaWdodE1hcEVuYWJsZWQpID8gY2h1bmtzLmxpZ2h0bWFwRGlyQWRkUFMgOiBjaHVua3MubGlnaHRtYXBBZGRQUyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhZGRBbWJpZW50ID0gIW9wdGlvbnMubGlnaHRNYXBFbmFibGVkIHx8IG9wdGlvbnMubGlnaHRNYXBXaXRob3V0QW1iaWVudDtcblxuICAgICAgICBpZiAoYWRkQW1iaWVudCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYW1iaWVudFNvdXJjZSA9PT0gJ2FtYmllbnRTSCcpIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuYW1iaWVudFNIUFMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmFtYmllbnRTb3VyY2UgPT09ICdlbnZBdGxhcycpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yZWZsZWN0aW9uU291cmNlICE9PSAnZW52QXRsYXMnICYmIG9wdGlvbnMucmVmbGVjdGlvblNvdXJjZSAhPT0gJ2VudkF0bGFzSFEnKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5lbnZBdGxhc1BTKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLmFtYmllbnRFbnZQUy5yZXBsYWNlKC9cXCRERUNPREUvZywgQ2h1bmtVdGlscy5kZWNvZGVGdW5jKG9wdGlvbnMuYW1iaWVudEVuY29kaW5nKSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuYW1iaWVudENvbnN0YW50UFMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlQW1iaWVudFRpbnQgJiYgIXVzZU9sZEFtYmllbnQpIHtcbiAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSB2ZWMzIG1hdGVyaWFsX2FtYmllbnQ7XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlTXNkZikge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLm1zZGZUZXh0QXR0cmlidXRlKSB7XG4gICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCIjZGVmaW5lIFVOSUZPUk1fVEVYVF9QQVJBTUVURVJTXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLm1zZGZQUyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5uZWVkc05vcm1hbCkge1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLnZpZXdEaXJQUyk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy51c2VTcGVjdWxhcikge1xuICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKChvcHRpb25zLmVuYWJsZUdHWFNwZWN1bGFyKSA/IGNodW5rcy5yZWZsRGlyQW5pc29QUyA6IGNodW5rcy5yZWZsRGlyUFMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhhc1BvaW50TGlnaHRzID0gZmFsc2U7XG4gICAgICAgIGxldCB1c2VzTGluZWFyRmFsbG9mZiA9IGZhbHNlO1xuICAgICAgICBsZXQgdXNlc0ludlNxdWFyZWRGYWxsb2ZmID0gZmFsc2U7XG4gICAgICAgIGxldCB1c2VzU3BvdCA9IGZhbHNlO1xuICAgICAgICBsZXQgdXNlc0Nvb2tpZSA9IGZhbHNlO1xuICAgICAgICBsZXQgdXNlc0Nvb2tpZU5vdztcblxuICAgICAgICAvLyBjbHVzdGVyZWQgbGlnaHRpbmdcbiAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkICYmIHRoaXMubGlnaHRpbmcpIHtcblxuICAgICAgICAgICAgdXNlc1Nwb3QgPSB0cnVlO1xuICAgICAgICAgICAgaGFzUG9pbnRMaWdodHMgPSB0cnVlO1xuICAgICAgICAgICAgdXNlc0xpbmVhckZhbGxvZmYgPSB0cnVlO1xuICAgICAgICAgICAgdXNlc0Nvb2tpZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5mbG9hdFVucGFja2luZ1BTKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGlnaHRNYXNrRHluYW1pYylcbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcIiNkZWZpbmUgQ0xVU1RFUl9NRVNIX0RZTkFNSUNfTElHSFRTXCIpO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0Nvb2tpZXNFbmFibGVkKVxuICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwiI2RlZmluZSBDTFVTVEVSX0NPT0tJRVNcIik7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ1NoYWRvd3NFbmFibGVkICYmICFvcHRpb25zLm5vU2hhZG93KSB7XG4gICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCIjZGVmaW5lIENMVVNURVJfU0hBRE9XU1wiKTtcbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcIiNkZWZpbmUgQ0xVU1RFUl9TSEFET1dfVFlQRV9cIiArIHNoYWRvd1R5cGVUb1N0cmluZ1tvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nU2hhZG93VHlwZV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0FyZWFMaWdodHNFbmFibGVkKVxuICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwiI2RlZmluZSBDTFVTVEVSX0FSRUFMSUdIVFNcIik7XG5cbiAgICAgICAgICAgIGRlY2wuYXBwZW5kKExpZ2h0c0J1ZmZlci5zaGFkZXJEZWZpbmVzKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdTaGFkb3dzRW5hYmxlZCAmJiAhb3B0aW9ucy5ub1NoYWRvdykge1xuICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5jbHVzdGVyZWRMaWdodFNoYWRvd3NQUyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5jbHVzdGVyZWRMaWdodFBTKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnR3b1NpZGVkTGlnaHRpbmcpIHtcbiAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBmbG9hdCB0d29TaWRlZExpZ2h0aW5nTmVnU2NhbGVGYWN0b3I7XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRlJBR01FTlQgU0hBREVSIEJPRFlcblxuICAgICAgICBjb2RlLmFwcGVuZCh0aGlzLl9mc0dldFN0YXJ0Q29kZShjb2RlLCBkZXZpY2UsIGNodW5rcywgb3B0aW9ucykpO1xuXG4gICAgICAgIGlmICh0aGlzLm5lZWRzTm9ybWFsKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy50d29TaWRlZExpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoXCIgICAgZFZlcnRleE5vcm1hbFcgPSBub3JtYWxpemUoZ2xfRnJvbnRGYWNpbmcgPyB2Tm9ybWFsVyAqIHR3b1NpZGVkTGlnaHRpbmdOZWdTY2FsZUZhY3RvciA6IC12Tm9ybWFsVyAqIHR3b1NpZGVkTGlnaHRpbmdOZWdTY2FsZUZhY3Rvcik7XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChcIiAgICBkVmVydGV4Tm9ybWFsVyA9IG5vcm1hbGl6ZSh2Tm9ybWFsVyk7XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoKG9wdGlvbnMudXNlSGVpZ2h0cyB8fCBvcHRpb25zLnVzZU5vcm1hbHMpICYmIG9wdGlvbnMuaGFzVGFuZ2VudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50d29TaWRlZExpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKFwiICAgIGRUYW5nZW50VyA9IGdsX0Zyb250RmFjaW5nID8gdlRhbmdlbnRXICogdHdvU2lkZWRMaWdodGluZ05lZ1NjYWxlRmFjdG9yIDogLXZUYW5nZW50VyAqIHR3b1NpZGVkTGlnaHRpbmdOZWdTY2FsZUZhY3RvcjtcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKFwiICAgIGRCaW5vcm1hbFcgPSBnbF9Gcm9udEZhY2luZyA/IHZCaW5vcm1hbFcgKiB0d29TaWRlZExpZ2h0aW5nTmVnU2NhbGVGYWN0b3IgOiAtdkJpbm9ybWFsVyAqIHR3b1NpZGVkTGlnaHRpbmdOZWdTY2FsZUZhY3RvcjtcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoXCIgICAgZFRhbmdlbnRXID0gdlRhbmdlbnRXO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoXCIgICAgZEJpbm9ybWFsVyA9IHZCaW5vcm1hbFc7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29kZS5hcHBlbmQoXCIgICAgZ2V0Vmlld0RpcigpO1wiKTtcbiAgICAgICAgICAgIGlmIChoYXNUQk4pIHtcbiAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChcIiAgICBnZXRUQk4oZFRhbmdlbnRXLCBkQmlub3JtYWxXLCBkVmVydGV4Tm9ybWFsVyk7XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW52b2tlIGZyb250ZW5kIGZ1bmN0aW9uc1xuICAgICAgICBjb2RlLmFwcGVuZCh0aGlzLmZyb250ZW5kRnVuYyk7XG5cbiAgICAgICAgLy8gdHJhbnNmb3JtIHRhbmdlbnQgc3BhY2Ugbm9ybWFscyB0byB3b3JsZCBzcGFjZVxuICAgICAgICBpZiAodGhpcy5uZWVkc05vcm1hbCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBnZXRSZWZsRGlyKGxpdEFyZ3Nfd29ybGROb3JtYWwsIGRWaWV3RGlyVywgbGl0QXJnc19nbG9zcywgZFRCTik7XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy51c2VDbGVhckNvYXQpIHtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBjY1JlZmxEaXJXID0gbm9ybWFsaXplKC1yZWZsZWN0KGRWaWV3RGlyVywgbGl0QXJnc19jbGVhcmNvYXRfd29ybGROb3JtYWwpKTtcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKHRoaXMubGlnaHRpbmcgJiYgb3B0aW9ucy51c2VTcGVjdWxhcikgfHwgdGhpcy5yZWZsZWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlTWV0YWxuZXNzKSB7XG4gICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgZmxvYXQgZjAgPSAxLjAgLyBsaXRBcmdzX2lvcjsgZjAgPSAoZjAgLSAxLjApIC8gKGYwICsgMS4wKTsgZjAgKj0gZjA7XCIpO1xuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGxpdEFyZ3Nfc3BlY3VsYXJpdHkgPSBnZXRTcGVjdWxhck1vZHVsYXRlKGxpdEFyZ3Nfc3BlY3VsYXJpdHksIGxpdEFyZ3NfYWxiZWRvLCBsaXRBcmdzX21ldGFsbmVzcywgZjApO1wiKTtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBsaXRBcmdzX2FsYmVkbyA9IGdldEFsYmVkb01vZHVsYXRlKGxpdEFyZ3NfYWxiZWRvLCBsaXRBcmdzX21ldGFsbmVzcyk7XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy51c2VJcmlkZXNjZW5jZSkge1xuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIHZlYzMgaXJpZGVzY2VuY2VGcmVzbmVsID0gZ2V0SXJpZGVzY2VuY2Uoc2F0dXJhdGUoZG90KGRWaWV3RGlyVywgbGl0QXJnc193b3JsZE5vcm1hbCkpLCBsaXRBcmdzX3NwZWN1bGFyaXR5LCBsaXRBcmdzX2lyaWRlc2NlbmNlX3RoaWNrbmVzcyk7XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFkZEFtYmllbnQpIHtcbiAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGFkZEFtYmllbnQobGl0QXJnc193b3JsZE5vcm1hbCk7XCIpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29uc2VydmVFbmVyZ3kgJiYgb3B0aW9ucy51c2VTcGVjdWxhcikge1xuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGAgICBkRGlmZnVzZUxpZ2h0ID0gZERpZmZ1c2VMaWdodCAqICgxLjAgLSBsaXRBcmdzX3NwZWN1bGFyaXR5KTtgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbW92ZSBhbWJpZW50IGNvbG9yIG91dCBvZiBkaWZmdXNlICh1c2VkIGJ5IExpZ2h0bWFwcGVyLCB0byBtdWx0aXBseSBhbWJpZW50IGNvbG9yIGJ5IGFjY3VtdWxhdGVkIEFPKVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2VwYXJhdGVBbWJpZW50KSB7XG4gICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoYFxuICAgICAgICAgICAgICAgICAgICB2ZWMzIGRBbWJpZW50TGlnaHQgPSBkRGlmZnVzZUxpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBkRGlmZnVzZUxpZ2h0ID0gdmVjMygwKTtcbiAgICAgICAgICAgICAgICBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnVzZUFtYmllbnRUaW50ICYmICF1c2VPbGRBbWJpZW50KSB7XG4gICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkRGlmZnVzZUxpZ2h0ICo9IG1hdGVyaWFsX2FtYmllbnQ7XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlQW8gJiYgIW9wdGlvbnMub2NjbHVkZURpcmVjdCkge1xuICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgb2NjbHVkZURpZmZ1c2UobGl0QXJnc19hbyk7XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMubGlnaHRNYXBFbmFibGVkKSB7XG4gICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgICAgIGFkZExpZ2h0TWFwKFxuICAgICAgICAgICAgICAgIGxpdEFyZ3NfbGlnaHRtYXAsIFxuICAgICAgICAgICAgICAgIGxpdEFyZ3NfbGlnaHRtYXBEaXIsIFxuICAgICAgICAgICAgICAgIGxpdEFyZ3Nfd29ybGROb3JtYWwsIFxuICAgICAgICAgICAgICAgIGRWaWV3RGlyVywgXG4gICAgICAgICAgICAgICAgZFJlZmxEaXJXLCBcbiAgICAgICAgICAgICAgICBsaXRBcmdzX2dsb3NzLCBcbiAgICAgICAgICAgICAgICBsaXRBcmdzX3NwZWN1bGFyaXR5LCBcbiAgICAgICAgICAgICAgICBkVmVydGV4Tm9ybWFsVyxcbiAgICAgICAgICAgICAgICBkVEJOXG4gICAgICAgICAgICAjaWYgZGVmaW5lZChMSVRfSVJJREVTQ0VOQ0UpXG4gICAgICAgICAgICAgICAgLCBpcmlkZXNjZW5jZUZyZXNuZWwsXG4gICAgICAgICAgICAgICAgbGl0QXJnc19pcmlkZXNjZW5jZV9pbnRlbnNpdHlcbiAgICAgICAgICAgICNlbmRpZlxuICAgICAgICAgICAgICAgICk7YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5saWdodGluZyB8fCB0aGlzLnJlZmxlY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWZsZWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUNsZWFyQ29hdCkge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBhZGRSZWZsZWN0aW9uQ0MoY2NSZWZsRGlyVywgbGl0QXJnc19jbGVhcmNvYXRfZ2xvc3MpO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZnJlc25lbE1vZGVsID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgY2NGcmVzbmVsID0gZ2V0RnJlc25lbENDKGRvdChkVmlld0RpclcsIGxpdEFyZ3NfY2xlYXJjb2F0X3dvcmxkTm9ybWFsKSk7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgY2NSZWZsZWN0aW9uLnJnYiAqPSBjY0ZyZXNuZWw7XCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgY2NGcmVzbmVsID0gMC4wO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VTcGVjdWxhcml0eUZhY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBjY1JlZmxlY3Rpb24ucmdiICo9IGxpdEFyZ3Nfc3BlY3VsYXJpdHlGYWN0b3I7XCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZVNoZWVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGFkZFJlZmxlY3Rpb25TaGVlbihsaXRBcmdzX3dvcmxkTm9ybWFsLCBkVmlld0RpclcsIGxpdEFyZ3Nfc2hlZW5fZ2xvc3MpO1wiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBGcmVzbmVsIGhhcyB0byBiZSBhcHBsaWVkIHRvIHJlZmxlY3Rpb25zXG4gICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgYWRkUmVmbGVjdGlvbihkUmVmbERpclcsIGxpdEFyZ3NfZ2xvc3MpO1wiKTtcblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmZyZXNuZWxNb2RlbCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoYCAgICBkUmVmbGVjdGlvbi5yZ2IgKj0gXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRGcmVzbmVsKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdChkVmlld0RpclcsIGxpdEFyZ3Nfd29ybGROb3JtYWwpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXRBcmdzX2dsb3NzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXRBcmdzX3NwZWN1bGFyaXR5XG4gICAgICAgICAgICAgICAgICAgICAgICAjaWYgZGVmaW5lZChMSVRfSVJJREVTQ0VOQ0UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBpcmlkZXNjZW5jZUZyZXNuZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGl0QXJnc19pcmlkZXNjZW5jZV9pbnRlbnNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICNlbmRpZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7YCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgZFJlZmxlY3Rpb24ucmdiICo9IGxpdEFyZ3Nfc3BlY3VsYXJpdHk7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VTcGVjdWxhcml0eUZhY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkUmVmbGVjdGlvbi5yZ2IgKj0gbGl0QXJnc19zcGVjdWxhcml0eUZhY3RvcjtcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaGFzQXJlYUxpZ2h0cykge1xuICAgICAgICAgICAgICAgIC8vIHNwZWN1bGFyIGhhcyB0byBiZSBhY2N1bXVsYXRlZCBkaWZmZXJlbnRseSBpZiB3ZSB3YW50IGFyZWEgbGlnaHRzIHRvIGxvb2sgY29ycmVjdFxuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGRTcGVjdWxhckxpZ2h0ICo9IGxpdEFyZ3Nfc3BlY3VsYXJpdHk7XCIpO1xuICAgICAgICAgICAgICAgIC8vIGNvZGUgKz0gXCIgICAgZmxvYXQgcm91Z2huZXNzID0gbWF4KCgxLjAgLSBkR2xvc3NpbmVzcykgKiAoMS4wIC0gZEdsb3NzaW5lc3MpLCAwLjAwMSk7XFxuXCI7XG5cbiAgICAgICAgICAgICAgICAvLyBldmFsdWF0ZSBtYXRlcmlhbCBiYXNlZCBhcmVhIGxpZ2h0cyBkYXRhLCBzaGFyZWQgYnkgYWxsIGFyZWEgbGlnaHRzXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgY2FsY0xUQ0xpZ2h0VmFsdWVzKGxpdEFyZ3NfZ2xvc3MsIGxpdEFyZ3Nfd29ybGROb3JtYWwsIGRWaWV3RGlyVywgbGl0QXJnc19zcGVjdWxhcml0eSwgbGl0QXJnc19jbGVhcmNvYXRfZ2xvc3MsIGxpdEFyZ3NfY2xlYXJjb2F0X3dvcmxkTm9ybWFsLCBsaXRBcmdzX2NsZWFyY29hdF9zcGVjdWxhcml0eSk7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25zLmxpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpZ2h0ID0gb3B0aW9ucy5saWdodHNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgbGlnaHRUeXBlID0gbGlnaHQuX3R5cGU7XG5cbiAgICAgICAgICAgICAgICAvLyBpZiBjbHVzdGVyZWQgbGlnaHRzIGFyZSB1c2VkLCBza2lwIG5vcm1hbCBsaWdodHMgb3RoZXIgdGhhbiBkaXJlY3Rpb25hbFxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCAmJiBsaWdodFR5cGUgIT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGNvZGUgaXMgbm90IGRlY291cGxlZCB0byBzZXBhcmF0ZSBzaGFkZXIgZmlsZXMsIGJlY2F1c2UgbW9zdCBvZiBpdCBjYW4gYmUgYWN0dWFsbHkgY2hhbmdlZCB0byBhY2hpZXZlIGRpZmZlcmVudCBiZWhhdmlvcnMgbGlrZTpcbiAgICAgICAgICAgICAgICAvLyAtIGRpZmZlcmVudCBmYWxsb2Zmc1xuICAgICAgICAgICAgICAgIC8vIC0gZGlmZmVyZW50IHNoYWRvdyBjb29yZHMgKG9tbmkgc2hhZG93cyB3aWxsIHVzZSBkcmFzdGljYWxseSBkaWZmZXJlbnQgZ2VuU2hhZG93Q29vcmQpXG4gICAgICAgICAgICAgICAgLy8gLSBkaWZmZXJlbnQgc2hhZG93IGZpbHRlciBtb2Rlc1xuICAgICAgICAgICAgICAgIC8vIC0gZGlmZmVyZW50IGxpZ2h0IHNvdXJjZSBzaGFwZXNcblxuICAgICAgICAgICAgICAgIC8vIGdldExpZ2h0RGlmZnVzZSBhbmQgZ2V0TGlnaHRTcGVjdWxhciBpcyBCUkRGIGl0c2VsZi5cblxuICAgICAgICAgICAgICAgIHVzZXNDb29raWVOb3cgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxpZ2h0U2hhcGUgPSAoaGFzQXJlYUxpZ2h0cyAmJiBsaWdodC5fc2hhcGUpID8gbGlnaHQuc2hhcGUgOiBMSUdIVFNIQVBFX1BVTkNUVUFMO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoYXBlU3RyaW5nID0gKGhhc0FyZWFMaWdodHMgJiYgbGlnaHQuX3NoYXBlKSA/IHRoaXMuX2dldExpZ2h0U291cmNlU2hhcGVTdHJpbmcobGlnaHRTaGFwZSkgOiAnJztcblxuICAgICAgICAgICAgICAgIGlmIChsaWdodFNoYXBlICE9PSBMSUdIVFNIQVBFX1BVTkNUVUFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGNhbGNcIiArIHNoYXBlU3RyaW5nICsgXCJMaWdodFZhbHVlcyhsaWdodFwiICsgaSArIFwiX3Bvc2l0aW9uLCBsaWdodFwiICsgaSArIFwiX2hhbGZXaWR0aCwgbGlnaHRcIiArIGkgKyBcIl9oYWxmSGVpZ2h0KTtcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpcmVjdGlvbmFsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGRMaWdodERpck5vcm1XID0gbGlnaHRcIiArIGkgKyBcIl9kaXJlY3Rpb247XCIpO1xuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW4gPSAxLjA7XCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0Ll9jb29raWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9TUE9UICYmICFsaWdodC5fY29va2llLl9jdWJlbWFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlc0Nvb2tpZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlc0Nvb2tpZU5vdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX09NTkkgJiYgbGlnaHQuX2Nvb2tpZS5fY3ViZW1hcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNDb29raWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNDb29raWVOb3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgZ2V0TGlnaHREaXJQb2ludChsaWdodFwiICsgaSArIFwiX3Bvc2l0aW9uKTtcIik7XG4gICAgICAgICAgICAgICAgICAgIGhhc1BvaW50TGlnaHRzID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlc0Nvb2tpZU5vdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW4zID0gZ2V0Q29va2llMkRcIiArIChsaWdodC5fY29va2llRmFsbG9mZiA/IFwiXCIgOiBcIkNsaXBcIikgKyAobGlnaHQuX2Nvb2tpZVRyYW5zZm9ybSA/IFwiWGZvcm1cIiA6IFwiXCIpICsgXCIobGlnaHRcIiArIGkgKyBcIl9jb29raWUsIGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWF0cml4LCBsaWdodFwiICsgaSArIFwiX2Nvb2tpZUludGVuc2l0eVwiICsgKGxpZ2h0Ll9jb29raWVUcmFuc2Zvcm0gPyBcIiwgbGlnaHRcIiArIGkgKyBcIl9jb29raWVNYXRyaXgsIGxpZ2h0XCIgKyBpICsgXCJfY29va2llT2Zmc2V0XCIgOiBcIlwiKSArIFwiKS5cIiArIGxpZ2h0Ll9jb29raWVDaGFubmVsICsgXCI7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW4zID0gZ2V0Q29va2llQ3ViZShsaWdodFwiICsgaSArIFwiX2Nvb2tpZSwgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dNYXRyaXgsIGxpZ2h0XCIgKyBpICsgXCJfY29va2llSW50ZW5zaXR5KS5cIiArIGxpZ2h0Ll9jb29raWVDaGFubmVsICsgXCI7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0U2hhcGUgPT09IExJR0hUU0hBUEVfUFVOQ1RVQUwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWdodC5fZmFsbG9mZk1vZGUgPT09IExJR0hURkFMTE9GRl9MSU5FQVIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW4gPSBnZXRGYWxsb2ZmTGluZWFyKGxpZ2h0XCIgKyBpICsgXCJfcmFkaXVzLCBkTGlnaHREaXJXKTtcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlc0xpbmVhckZhbGxvZmYgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW4gPSBnZXRGYWxsb2ZmSW52U3F1YXJlZChsaWdodFwiICsgaSArIFwiX3JhZGl1cywgZExpZ2h0RGlyVyk7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNJbnZTcXVhcmVkRmFsbG9mZiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub24gcHVuY3R1YWwgbGlnaHRzIG9ubHkgZ2V0cyB0aGUgcmFuZ2Ugd2luZG93IGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGRBdHRlbiA9IGdldEZhbGxvZmZXaW5kb3cobGlnaHRcIiArIGkgKyBcIl9yYWRpdXMsIGRMaWdodERpclcpO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNJbnZTcXVhcmVkRmFsbG9mZiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBpZiAoZEF0dGVuID4gMC4wMDAwMSkge1wiKTsgLy8gQlJBTkNIIFNUQVJUXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHVzZXNDb29raWVOb3cgJiYgIWxpZ2h0Ll9jb29raWVGYWxsb2ZmKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGRBdHRlbiAqPSBnZXRTcG90RWZmZWN0KGxpZ2h0XCIgKyBpICsgXCJfZGlyZWN0aW9uLCBsaWdodFwiICsgaSArIFwiX2lubmVyQ29uZUFuZ2xlLCBsaWdodFwiICsgaSArIFwiX291dGVyQ29uZUFuZ2xlLCBkTGlnaHREaXJOb3JtVyk7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNTcG90ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGRpZmZ1c2UgbGlnaHRpbmcgLSBMVEMgbGlnaHRzIGRvIG5vdCBtaXggZGlmZnVzZSBsaWdodGluZyBpbnRvIGF0dGVudWF0aW9uIHRoYXQgYWZmZWN0cyBzcGVjdWxhclxuICAgICAgICAgICAgICAgIGlmIChsaWdodFNoYXBlICE9PSBMSUdIVFNIQVBFX1BVTkNUVUFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTkI6IEEgYmV0dGVyIGFwcm94aW1hdGlvbiBwZXJoYXBzIHVzaW5nIHdyYXAgbGlnaHRpbmcgY291bGQgYmUgaW1wbGVtZW50ZWQgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgZEF0dGVuRCA9IGdldExpZ2h0RGlmZnVzZShsaXRBcmdzX3dvcmxkTm9ybWFsLCBkVmlld0RpclcsIGRMaWdodERpclcsIGRMaWdodERpck5vcm1XKTtcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAxNi4wIGlzIGEgY29uc3RhbnQgdGhhdCBpcyBpbiBnZXRGYWxsb2ZmSW52U3F1YXJlZCgpXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW5EID0gZ2V0XCIgKyBzaGFwZVN0cmluZyArIFwiTGlnaHREaWZmdXNlKGxpdEFyZ3Nfd29ybGROb3JtYWwsIGRWaWV3RGlyVywgZExpZ2h0RGlyVywgZExpZ2h0RGlyTm9ybVcpICogMTYuMDtcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW4gKj0gZ2V0TGlnaHREaWZmdXNlKGxpdEFyZ3Nfd29ybGROb3JtYWwsIGRWaWV3RGlyVywgZExpZ2h0RGlyVywgZExpZ2h0RGlyTm9ybVcpO1wiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobGlnaHQuY2FzdFNoYWRvd3MgJiYgIW9wdGlvbnMubm9TaGFkb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGNzc1NoYWRvd3MgPSBsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1BDU1M7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZzbVNoYWRvd3MgPSBsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTggfHwgbGlnaHQuX3NoYWRvd1R5cGUgPT09IFNIQURPV19WU00xNiB8fCBsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTMyO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwY2ZTaGFkb3dzID0gbGlnaHQuX3NoYWRvd1R5cGUgPT09IFNIQURPV19QQ0YxIHx8IGxpZ2h0Ll9zaGFkb3dUeXBlID09PSBTSEFET1dfUENGMyB8fCBsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1BDRjU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzaGFkb3dSZWFkTW9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxldCBldnNtRXhwO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGxpZ2h0Ll9zaGFkb3dUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFNIQURPV19WU004OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd1JlYWRNb2RlID0gXCJWU004XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZzbUV4cCA9IFwiMC4wXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFNIQURPV19WU00xNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dSZWFkTW9kZSA9IFwiVlNNMTZcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldnNtRXhwID0gXCI1LjU0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFNIQURPV19WU00zMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dSZWFkTW9kZSA9IFwiVlNNMzJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGV2aWNlLnRleHR1cmVGbG9hdEhpZ2hQcmVjaXNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZzbUV4cCA9IFwiMTUuMFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2c21FeHAgPSBcIjUuNTRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFNIQURPV19QQ0YxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd1JlYWRNb2RlID0gXCJQQ0YxeDFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgU0hBRE9XX1BDRjU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93UmVhZE1vZGUgPSBcIlBDRjV4NVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTSEFET1dfUENTUzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dSZWFkTW9kZSA9IFwiUENTU1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTSEFET1dfUENGMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93UmVhZE1vZGUgPSBcIlBDRjN4M1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoYWRvd1JlYWRNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHQuX25vcm1hbE9mZnNldEJpYXMgJiYgIWxpZ2h0Ll9pc1ZzbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKFwiI2RlZmluZSBTSEFET1dfU0FNUExFX05PUk1BTF9PRkZTRVRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChcIiNkZWZpbmUgU0hBRE9XX1NBTVBMRV9PUlRIT1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocGNmU2hhZG93cyB8fCBwY3NzU2hhZG93cykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2Uud2ViZ2wyIHx8IGRldmljZS5leHRTdGFuZGFyZERlcml2YXRpdmVzIHx8IGRldmljZS5pc1dlYkdQVSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKFwiI2RlZmluZSBTSEFET1dfU0FNUExFX1NPVVJDRV9aQlVGRkVSXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX09NTkkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChcIiNkZWZpbmUgU0hBRE9XX1NBTVBMRV9QT0lOVFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHNoYWRvdyBjb29yZCBzYW1wbGVyIGZ1bmN0aW9uIGZvciB0aGlzIGxpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb29yZENvZGUgPSBjaHVua3Muc2hhZG93U2FtcGxlQ29vcmRQUztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNvb3JkQ29kZS5yZXBsYWNlKFwiJExJR0hUXCIsIGkpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRvIHVuZGVmaW5lIHRoZSBzaGFkb3cgc2FtcGxlciBkZWZpbmVzXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChcIiN1bmRlZiBTSEFET1dfU0FNUExFX05PUk1BTF9PRkZTRVRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChcIiN1bmRlZiBTSEFET1dfU0FNUExFX09SVEhPXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoXCIjdW5kZWYgU0hBRE9XX1NBTVBMRV9TT1VSQ0VfWkJVRkZFUlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKFwiI3VuZGVmIFNIQURPV19TQU1QTEVfUE9JTlRcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzaGFkb3dNYXRyaXggPSBgbGlnaHQke2l9X3NoYWRvd01hdHJpeGA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwgJiYgbGlnaHQubnVtQ2FzY2FkZXMgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcHV0ZSB3aGljaCBjYXNjYWRlIG1hdHJpeCBuZWVkcyB0byBiZSB1c2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoYCAgICBnZXRTaGFkb3dDYXNjYWRlTWF0cml4KGxpZ2h0JHtpfV9zaGFkb3dNYXRyaXhQYWxldHRlLCBsaWdodCR7aX1fc2hhZG93Q2FzY2FkZURpc3RhbmNlcywgbGlnaHQke2l9X3NoYWRvd0Nhc2NhZGVDb3VudCk7YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93TWF0cml4ID0gYGNhc2NhZGVTaGFkb3dNYXRgO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgICAgIGRTaGFkb3dDb29yZCA9IGdldFNoYWRvd1NhbXBsZUNvb3JkJHtpfSgke3NoYWRvd01hdHJpeH0sIGxpZ2h0JHtpfV9zaGFkb3dQYXJhbXMsIHZQb3NpdGlvblcsIGRMaWdodFBvc1csIGRMaWdodERpclcsIGRMaWdodERpck5vcm1XLCBkVmVydGV4Tm9ybWFsVyk7YCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhZGUgc2hhZG93IGF0IGVkZ2VzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgICAgIGZhZGVTaGFkb3cobGlnaHQke2l9X3NoYWRvd0Nhc2NhZGVEaXN0YW5jZXMpO2ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hhZG93Q29vcmRBcmdzID0gYFNIQURPV01BUF9QQVNTKGxpZ2h0JHtpfV9zaGFkb3dNYXApLCBkU2hhZG93Q29vcmQsIGxpZ2h0JHtpfV9zaGFkb3dQYXJhbXNgO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodnNtU2hhZG93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZTTVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0Nvb3JkQXJncyA9IGAke3NoYWRvd0Nvb3JkQXJnc30sICR7ZXZzbUV4cH0sIGRMaWdodERpcldgO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwY3NzU2hhZG93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwZW51bWJyYVNpemVBcmcgPSBgdmVjMihsaWdodCR7aX1fc2hhZG93U2VhcmNoQXJlYSlgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFNoYXBlICE9PSBMSUdIVFNIQVBFX1BVTkNUVUFMKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbnVtYnJhU2l6ZUFyZyA9IGB2ZWMyKGxlbmd0aChsaWdodCR7aX1faGFsZldpZHRoKSwgbGVuZ3RoKGxpZ2h0JHtpfV9oYWxmSGVpZ2h0KSkgKiBsaWdodCR7aX1fc2hhZG93U2VhcmNoQXJlYWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0Nvb3JkQXJncyA9IGAke3NoYWRvd0Nvb3JkQXJnc30sIGxpZ2h0JHtpfV9jYW1lcmFQYXJhbXMsICR7cGVudW1icmFTaXplQXJnfSwgZExpZ2h0RGlyV2A7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9PTU5JKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93UmVhZE1vZGUgPSBgUG9pbnQke3NoYWRvd1JlYWRNb2RlfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwY3NzU2hhZG93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dDb29yZEFyZ3MgPSBgJHtzaGFkb3dDb29yZEFyZ3N9LCBkTGlnaHREaXJXYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dSZWFkTW9kZSA9IGBTcG90JHtzaGFkb3dSZWFkTW9kZX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgICAgIGZsb2F0IHNoYWRvdyR7aX0gPSBnZXRTaGFkb3cke3NoYWRvd1JlYWRNb2RlfSgke3NoYWRvd0Nvb3JkQXJnc30pO2ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoYCAgICBkQXR0ZW4gKj0gbWl4KDEuMCwgc2hhZG93JHtpfSwgbGlnaHQke2l9X3NoYWRvd0ludGVuc2l0eSk7YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYWNrZW5kLmFwcGVuZChgICAgIGRBdHRlbiAqPSBtaXgoMS4wLCBzaGFkb3cke2l9LCBzaGFkb3cke2l9ICogbGlnaHQke2l9X3NoYWRvd0ludGVuc2l0eSk7YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYWNrZW5kLmFwcGVuZChgICAgIGRBdHRlbiAqPSBtaXgoMS4wLCAwLjAsIGNsYW1wKHNoYWRvdyR7aX0gKiBsaWdodCR7aX1fc2hhZG93SW50ZW5zaXR5LCAwLjAsIDEuMCkpO2ApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0U2hhcGUgIT09IExJR0hUU0hBUEVfUFVOQ1RVQUwpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBhcmVhIGxpZ2h0IC0gdGhleSBkbyBub3QgbWl4IGRpZmZ1c2UgbGlnaHRpbmcgaW50byBzcGVjdWxhciBhdHRlbnVhdGlvblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jb25zZXJ2ZUVuZXJneSAmJiBvcHRpb25zLnVzZVNwZWN1bGFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkRGlmZnVzZUxpZ2h0ICs9ICgoZEF0dGVuRCAqIGRBdHRlbikgKiBsaWdodFwiICsgaSArIFwiX2NvbG9yXCIgKyAodXNlc0Nvb2tpZU5vdyA/IFwiICogZEF0dGVuM1wiIDogXCJcIikgKyBcIikgKiAoMS4wIC0gZExUQ1NwZWNGcmVzKTtcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkRGlmZnVzZUxpZ2h0ICs9IChkQXR0ZW5EICogZEF0dGVuKSAqIGxpZ2h0XCIgKyBpICsgXCJfY29sb3JcIiArICh1c2VzQ29va2llTm93ID8gXCIgKiBkQXR0ZW4zXCIgOiBcIlwiKSArIFwiO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gcHVuY3R1YWwgbGlnaHRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0FyZWFMaWdodHMgJiYgb3B0aW9ucy5jb25zZXJ2ZUVuZXJneSAmJiBvcHRpb25zLnVzZVNwZWN1bGFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkRGlmZnVzZUxpZ2h0ICs9IChkQXR0ZW4gKiBsaWdodFwiICsgaSArIFwiX2NvbG9yXCIgKyAodXNlc0Nvb2tpZU5vdyA/IFwiICogZEF0dGVuM1wiIDogXCJcIikgKyBcIikgKiAoMS4wIC0gbGl0QXJnc19zcGVjdWxhcml0eSk7XCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgZERpZmZ1c2VMaWdodCArPSBkQXR0ZW4gKiBsaWdodFwiICsgaSArIFwiX2NvbG9yXCIgKyAodXNlc0Nvb2tpZU5vdyA/IFwiICogZEF0dGVuM1wiIDogXCJcIikgKyBcIjtcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VTcGVjdWxhcikge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkSGFsZkRpclcgPSBub3JtYWxpemUoLWRMaWdodERpck5vcm1XICsgZFZpZXdEaXJXKTtcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gc3BlY3VsYXIgLyBjbGVhciBjb2F0XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0LmFmZmVjdFNwZWN1bGFyaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFNoYXBlICE9PSBMSUdIVFNIQVBFX1BVTkNUVUFMKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFyZWEgbGlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUNsZWFyQ29hdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGAgICAgY2NTcGVjdWxhckxpZ2h0ICs9IGNjTFRDU3BlY0ZyZXMgKiBnZXQke3NoYXBlU3RyaW5nfUxpZ2h0U3BlY3VsYXIobGl0QXJnc19jbGVhcmNvYXRfd29ybGROb3JtYWwsIGRWaWV3RGlyVykgKiBkQXR0ZW4gKiBsaWdodCR7aX1fY29sb3JgICsgKHVzZXNDb29raWVOb3cgPyBcIiAqIGRBdHRlbjNcIiA6IFwiXCIpICsgXCI7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgICAgIGRTcGVjdWxhckxpZ2h0ICs9IGRMVENTcGVjRnJlcyAqIGdldCR7c2hhcGVTdHJpbmd9TGlnaHRTcGVjdWxhcihsaXRBcmdzX3dvcmxkTm9ybWFsLCBkVmlld0RpclcpICogZEF0dGVuICogbGlnaHQke2l9X2NvbG9yYCArICh1c2VzQ29va2llTm93ID8gXCIgKiBkQXR0ZW4zXCIgOiBcIlwiKSArIFwiO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGNGcmVzbmVsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwgJiYgb3B0aW9ucy5mcmVzbmVsTW9kZWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsY0ZyZXNuZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBMVEMgbGlnaHRzIGFyZSBwcmVzZW50LCBzcGVjdWxhciBtdXN0IGJlIGFjY3VtdWxhdGVkIHdpdGggc3BlY3VsYXJpdHkgKHNwZWN1bGFyaXR5IGlzIHByZSBtdWx0aXBsaWVkIGJ5IHB1bmN0dWFsIGxpZ2h0IGZyZXNuZWwpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VDbGVhckNvYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgICAgIGNjU3BlY3VsYXJMaWdodCArPSBnZXRMaWdodFNwZWN1bGFyKGRIYWxmRGlyVywgY2NSZWZsRGlyVywgbGl0QXJnc19jbGVhcmNvYXRfd29ybGROb3JtYWwsIGRWaWV3RGlyVywgZExpZ2h0RGlyTm9ybVcsIGxpdEFyZ3NfY2xlYXJjb2F0X2dsb3NzLCBkVEJOKSAqIGRBdHRlbiAqIGxpZ2h0JHtpfV9jb2xvcmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodXNlc0Nvb2tpZU5vdyA/IFwiICogZEF0dGVuM1wiIDogXCJcIikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2FsY0ZyZXNuZWwgPyBcIiAqIGdldEZyZXNuZWxDQyhkb3QoZFZpZXdEaXJXLCBkSGFsZkRpclcpKTtcIiA6IFwiO1wiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VTaGVlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGAgICAgc1NwZWN1bGFyTGlnaHQgKz0gZ2V0TGlnaHRTcGVjdWxhclNoZWVuKGRIYWxmRGlyVywgbGl0QXJnc193b3JsZE5vcm1hbCwgZFZpZXdEaXJXLCBkTGlnaHREaXJOb3JtVywgbGl0QXJnc19zaGVlbl9nbG9zcykgKiBkQXR0ZW4gKiBsaWdodCR7aX1fY29sb3JgICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHVzZXNDb29raWVOb3cgPyBcIiAqIGRBdHRlbjM7XCIgOiBcIjtcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgICAgIGRTcGVjdWxhckxpZ2h0ICs9IGdldExpZ2h0U3BlY3VsYXIoZEhhbGZEaXJXLCBkUmVmbERpclcsIGxpdEFyZ3Nfd29ybGROb3JtYWwsIGRWaWV3RGlyVywgZExpZ2h0RGlyTm9ybVcsIGxpdEFyZ3NfZ2xvc3MsIGRUQk4pICogZEF0dGVuICogbGlnaHQke2l9X2NvbG9yYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1c2VzQ29va2llTm93ID8gXCIgKiBkQXR0ZW4zXCIgOiBcIlwiKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjYWxjRnJlc25lbCA/IGAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGdldEZyZXNuZWwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90KGRWaWV3RGlyVywgZEhhbGZEaXJXKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGl0QXJnc19nbG9zcywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGl0QXJnc19zcGVjdWxhcml0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI2lmIGRlZmluZWQoTElUX0lSSURFU0NFTkNFKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgaXJpZGVzY2VuY2VGcmVzbmVsLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXRBcmdzX2lyaWRlc2NlbmNlX2ludGVuc2l0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI2VuZGlmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO2AgOiBgKiBsaXRBcmdzX3NwZWN1bGFyaXR5O2ApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgIT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICB9XCIpOyAvLyBCUkFOQ0ggRU5EXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBjbHVzdGVyZWQgbGlnaHRpbmdcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCAmJiB0aGlzLmxpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgICAgdXNlc0xpbmVhckZhbGxvZmYgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHVzZXNJbnZTcXVhcmVkRmFsbG9mZiA9IHRydWU7XG4gICAgICAgICAgICAgICAgaGFzUG9pbnRMaWdodHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGAgICAgYWRkQ2x1c3RlcmVkTGlnaHRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpdEFyZ3Nfd29ybGROb3JtYWwsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRWaWV3RGlyVywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZFJlZmxEaXJXLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjaWYgZGVmaW5lZChMSVRfQ0xFQVJDT0FUKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjUmVmbERpclcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNlbmRpZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpdEFyZ3NfZ2xvc3MsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpdEFyZ3Nfc3BlY3VsYXJpdHksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRWZXJ0ZXhOb3JtYWxXLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkVEJOLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI2lmIGRlZmluZWQoTElUX0lSSURFU0NFTkNFKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlyaWRlc2NlbmNlRnJlc25lbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI2VuZGlmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGl0QXJnc19jbGVhcmNvYXRfd29ybGROb3JtYWwsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpdEFyZ3NfY2xlYXJjb2F0X2dsb3NzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpdEFyZ3Nfc2hlZW5fZ2xvc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGl0QXJnc19pcmlkZXNjZW5jZV9pbnRlbnNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChoYXNBcmVhTGlnaHRzKSB7XG4gICAgICAgICAgICAgICAgLy8gc3BlY3VsYXIgaGFzIHRvIGJlIGFjY3VtdWxhdGVkIGRpZmZlcmVudGx5IGlmIHdlIHdhbnQgYXJlYSBsaWdodHMgdG8gbG9vayBjb3JyZWN0XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlQ2xlYXJDb2F0KSB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGxpdEFyZ3NfY2xlYXJjb2F0X3NwZWN1bGFyaXR5ID0gMS4wO1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgbGl0QXJnc19zcGVjdWxhcml0eSA9IHZlYzMoMSk7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlUmVmcmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGAgICAgYWRkUmVmcmFjdGlvbihcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpdEFyZ3Nfd29ybGROb3JtYWwsIFxuICAgICAgICAgICAgICAgICAgICAgICAgZFZpZXdEaXJXLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpdEFyZ3NfdGhpY2tuZXNzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpdEFyZ3NfZ2xvc3MsIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGl0QXJnc19zcGVjdWxhcml0eSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXRBcmdzX2FsYmVkbywgXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXRBcmdzX3RyYW5zbWlzc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpdEFyZ3NfaW9yXG4gICAgICAgICAgICAgICAgICAgICNpZiBkZWZpbmVkKExJVF9JUklERVNDRU5DRSlcbiAgICAgICAgICAgICAgICAgICAgICAgICwgaXJpZGVzY2VuY2VGcmVzbmVsLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpdEFyZ3NfaXJpZGVzY2VuY2VfaW50ZW5zaXR5XG4gICAgICAgICAgICAgICAgICAgICNlbmRpZlxuICAgICAgICAgICAgICAgICAgICApO2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlQW8pIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm9jY2x1ZGVEaXJlY3QpIHtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBvY2NsdWRlRGlmZnVzZShsaXRBcmdzX2FvKTtcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5vY2NsdWRlU3BlY3VsYXIgPT09IFNQRUNPQ0NfQU8gfHwgb3B0aW9ucy5vY2NsdWRlU3BlY3VsYXIgPT09IFNQRUNPQ0NfR0xPU1NERVBFTkRFTlQpIHtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBvY2NsdWRlU3BlY3VsYXIobGl0QXJnc19nbG9zcywgbGl0QXJnc19hbywgbGl0QXJnc193b3JsZE5vcm1hbCwgZFZpZXdEaXJXKTtcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy51c2VTcGVjdWxhcml0eUZhY3Rvcikge1xuICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgZFNwZWN1bGFyTGlnaHQgKj0gbGl0QXJnc19zcGVjdWxhcml0eUZhY3RvcjtcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5vcGFjaXR5RmFkZXNTcGVjdWxhciA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmJsZW5kVHlwZSA9PT0gQkxFTkRfTk9STUFMIHx8IG9wdGlvbnMuYmxlbmRUeXBlID09PSBCTEVORF9QUkVNVUxUSVBMSUVEKSB7XG4gICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCJmbG9hdCBzcGVjTHVtID0gZG90KChkU3BlY3VsYXJMaWdodCArIGRSZWZsZWN0aW9uLnJnYiAqIGRSZWZsZWN0aW9uLmEpLCB2ZWMzKCAwLjIxMjYsIDAuNzE1MiwgMC4wNzIyICkpO1wiKTtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiNpZmRlZiBMSVRfQ0xFQVJDT0FUXFxuIHNwZWNMdW0gKz0gZG90KGNjU3BlY3VsYXJMaWdodCAqIGxpdEFyZ3NfY2xlYXJjb2F0X3NwZWN1bGFyaXR5ICsgY2NSZWZsZWN0aW9uLnJnYiAqIGxpdEFyZ3NfY2xlYXJjb2F0X3NwZWN1bGFyaXR5LCB2ZWMzKCAwLjIxMjYsIDAuNzE1MiwgMC4wNzIyICkpO1xcbiNlbmRpZlwiKTtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcImxpdEFyZ3Nfb3BhY2l0eSA9IGNsYW1wKGxpdEFyZ3Nfb3BhY2l0eSArIGdhbW1hQ29ycmVjdElucHV0KHNwZWNMdW0pLCAwLjAsIDEuMCk7XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCJsaXRBcmdzX29wYWNpdHkgKj0gbWF0ZXJpYWxfYWxwaGFGYWRlO1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJhY2tlbmQuYXBwZW5kKGNodW5rcy5lbmRQUyk7XG4gICAgICAgIGlmIChvcHRpb25zLmJsZW5kVHlwZSA9PT0gQkxFTkRfTk9STUFMIHx8IG9wdGlvbnMuYmxlbmRUeXBlID09PSBCTEVORF9BRERJVElWRUFMUEhBIHx8IG9wdGlvbnMuYWxwaGFUb0NvdmVyYWdlKSB7XG4gICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChjaHVua3Mub3V0cHV0QWxwaGFQUyk7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5ibGVuZFR5cGUgPT09IEJMRU5EX1BSRU1VTFRJUExJRUQpIHtcbiAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGNodW5rcy5vdXRwdXRBbHBoYVByZW11bFBTKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGNodW5rcy5vdXRwdXRBbHBoYU9wYXF1ZVBTKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnVzZU1zZGYpIHtcbiAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGdsX0ZyYWdDb2xvciA9IGFwcGx5TXNkZihnbF9GcmFnQ29sb3IpO1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJhY2tlbmQuYXBwZW5kKGNodW5rcy5vdXRwdXRQUyk7XG4gICAgICAgIGJhY2tlbmQuYXBwZW5kKGNodW5rcy5kZWJ1Z091dHB1dFBTKTtcblxuICAgICAgICBpZiAoaGFzUG9pbnRMaWdodHMpIHtcbiAgICAgICAgICAgIGZ1bmMucHJlcGVuZChjaHVua3MubGlnaHREaXJQb2ludFBTKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlc0xpbmVhckZhbGxvZmYpIHtcbiAgICAgICAgICAgIGZ1bmMucHJlcGVuZChjaHVua3MuZmFsbG9mZkxpbmVhclBTKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlc0ludlNxdWFyZWRGYWxsb2ZmKSB7XG4gICAgICAgICAgICBmdW5jLnByZXBlbmQoY2h1bmtzLmZhbGxvZmZJbnZTcXVhcmVkUFMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VzU3BvdCkge1xuICAgICAgICAgICAgZnVuYy5wcmVwZW5kKGNodW5rcy5zcG90UFMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VzQ29va2llICYmICFvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgLy8gbm9uLWNsdXN0ZXJlZCBsaWdodHMgY29va2llIGNvZGVcbiAgICAgICAgICAgIGZ1bmMucHJlcGVuZChjaHVua3MuY29va2llUFMpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzdHJ1Y3RDb2RlID0gXCJcIjtcblxuICAgICAgICBjb25zdCBiYWNrZW5kQ29kZSA9IGB2b2lkIGV2YWx1YXRlQmFja2VuZCgpIHtcXG4ke2JhY2tlbmQuY29kZX1cXG59YDtcbiAgICAgICAgZnVuYy5hcHBlbmQoYmFja2VuZENvZGUpO1xuXG4gICAgICAgIGNvZGUuYXBwZW5kKGNodW5rcy5kZWJ1Z1Byb2Nlc3NGcm9udGVuZFBTKTtcblxuICAgICAgICBjb2RlLmFwcGVuZChcIiAgICBldmFsdWF0ZUJhY2tlbmQoKTtcIik7XG5cbiAgICAgICAgY29kZS5hcHBlbmQoU2hhZGVyR2VuZXJhdG9yLmVuZCgpKTtcblxuICAgICAgICBjb25zdCBtZXJnZWRDb2RlID0gZGVjbC5jb2RlICsgZnVuYy5jb2RlICsgY29kZS5jb2RlO1xuXG4gICAgICAgIC8vIExpZ2h0IGlucHV0c1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRUQk5cIikpIHN0cnVjdENvZGUgKz0gXCJtYXQzIGRUQk47XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiZFZlcnRleE5vcm1hbFdcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGRWZXJ0ZXhOb3JtYWxXO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRUYW5nZW50V1wiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZFRhbmdlbnRXO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRCaW5vcm1hbFdcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGRCaW5vcm1hbFc7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiZFZpZXdEaXJXXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBkVmlld0Rpclc7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiZFJlZmxEaXJXXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBkUmVmbERpclc7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiZEhhbGZEaXJXXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBkSGFsZkRpclc7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiY2NSZWZsRGlyV1wiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgY2NSZWZsRGlyVztcXG5cIjtcblxuICAgICAgICAvLyBQZXItbGlnaHQgdGVtcG9yYXJpZXNcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJkTGlnaHREaXJOb3JtV1wiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZExpZ2h0RGlyTm9ybVc7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiZExpZ2h0RGlyV1wiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZExpZ2h0RGlyVztcXG5cIjtcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJkTGlnaHRQb3NXXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBkTGlnaHRQb3NXO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRTaGFkb3dDb29yZFwiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZFNoYWRvd0Nvb3JkO1xcblwiO1xuXG4gICAgICAgIC8vIE91dHB1dHNcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJkUmVmbGVjdGlvblwiKSkgc3RydWN0Q29kZSArPSBcInZlYzQgZFJlZmxlY3Rpb247XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiZERpZmZ1c2VMaWdodFwiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZERpZmZ1c2VMaWdodDtcXG5cIjtcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJkU3BlY3VsYXJMaWdodFwiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZFNwZWN1bGFyTGlnaHQ7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiZEF0dGVuXCIpKSBzdHJ1Y3RDb2RlICs9IFwiZmxvYXQgZEF0dGVuO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRBdHRlbkRcIikpIHN0cnVjdENvZGUgKz0gXCJmbG9hdCBkQXR0ZW5EO1xcblwiOyAvLyBzZXBhcmF0ZSBkaWZmdXNlIGF0dGVudWF0aW9uIGZvciBub24tcHVuY3R1YWwgbGlnaHQgc291cmNlc1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRBdHRlbjNcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGRBdHRlbjM7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiZE1zZGZcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWM0IGRNc2RmO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImNjRnJlc25lbFwiKSkgc3RydWN0Q29kZSArPSBcImZsb2F0IGNjRnJlc25lbDtcXG5cIjtcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJjY1JlZmxlY3Rpb25cIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGNjUmVmbGVjdGlvbjtcXG5cIjtcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJjY1NwZWN1bGFyTGlnaHRcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGNjU3BlY3VsYXJMaWdodDtcXG5cIjtcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJjY1NwZWN1bGFyaXR5Tm9GcmVzXCIpKSBzdHJ1Y3RDb2RlICs9IFwiZmxvYXQgY2NTcGVjdWxhcml0eU5vRnJlcztcXG5cIjtcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJzU3BlY3VsYXJMaWdodFwiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgc1NwZWN1bGFyTGlnaHQ7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwic1JlZmxlY3Rpb25cIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIHNSZWZsZWN0aW9uO1xcblwiO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2ZzR2V0QmVnaW5Db2RlKCkgK1xuICAgICAgICAgICAgdGhpcy52YXJ5aW5ncyArXG4gICAgICAgICAgICB0aGlzLnZhcnlpbmdEZWZpbmVzICtcbiAgICAgICAgICAgIHRoaXMuX2ZzR2V0QmFzZUNvZGUoKSArXG4gICAgICAgICAgICBzdHJ1Y3RDb2RlICtcbiAgICAgICAgICAgIHRoaXMuZnJvbnRlbmREZWNsICtcbiAgICAgICAgICAgIG1lcmdlZENvZGU7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBmcmFnbWVudCBzaGFkZXIuIFBsZWFzZSBtYWtlIHN1cmUgdG8gdXBkYXRlIHNyYy9kZXByZWNhdGVkL2RlcHJlY2F0ZWQuanMgaW5cbiAgICAgKiBjYXNlIGB0aGlzLmZzaGFkZXJgIGRvZXMgbm90IGxvbmdlciBjb250YWluIHRoZSBlbnRpcmUgZnJhZ21lbnQgc2hhZGVyIG9uY2UgdGhpcyBmdW5jdGlvblxuICAgICAqIGlzIGRvbmUgYmVjYXVzZSB3ZSBoYW5kbGUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgdGhlcmUgZm9yIG9sZCBzaGFkZXJzLiBUaGlzIGFsbG93cyB1c1xuICAgICAqIHRvIGhhdmUgZGVwcmVjYXRpb24tZnJlZSB0cmVlIHNoYWtpbmcgd2hpbGUgc3RpbGwgZml4aW5nIHNoYWRlcnMgZm9yIGZ1bGwgYnVpbGRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZyb250ZW5kRGVjbCAtIEZyb250ZW5kIGRlY2xhcmF0aW9ucyBsaWtlIGBmbG9hdCBkQWxwaGE7YFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmcm9udGVuZENvZGUgLSBGcm9udGVuZCBjb2RlIGNvbnRhaW5pbmcgYGdldE9wYWNpdHkoKWAgZXRjLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmcm9udGVuZEZ1bmMgLSBFLmcuIGBldmFsdWF0ZUZyb250ZW5kKCk7YFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsaWdodGluZ1V2IC0gRS5nLiBgdlV2MGBcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgZ2VuZXJhdGVGcmFnbWVudFNoYWRlcihmcm9udGVuZERlY2wsIGZyb250ZW5kQ29kZSwgZnJvbnRlbmRGdW5jLCBsaWdodGluZ1V2KSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICAgICAgdGhpcy5mcm9udGVuZERlY2wgPSBmcm9udGVuZERlY2w7XG4gICAgICAgIHRoaXMuZnJvbnRlbmRDb2RlID0gZnJvbnRlbmRDb2RlO1xuICAgICAgICB0aGlzLmZyb250ZW5kRnVuYyA9IGZyb250ZW5kRnVuYztcbiAgICAgICAgdGhpcy5saWdodGluZ1V2ID0gbGlnaHRpbmdVdjtcblxuICAgICAgICBpZiAob3B0aW9ucy5wYXNzID09PSBTSEFERVJfUElDSykge1xuICAgICAgICAgICAgdGhpcy5mc2hhZGVyID0gdGhpcy5fZnNHZXRQaWNrUGFzc0NvZGUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnBhc3MgPT09IFNIQURFUl9ERVBUSCkge1xuICAgICAgICAgICAgdGhpcy5mc2hhZGVyID0gdGhpcy5fZnNHZXREZXB0aFBhc3NDb2RlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zaGFkb3dQYXNzKSB7XG4gICAgICAgICAgICB0aGlzLmZzaGFkZXIgPSB0aGlzLl9mc0dldFNoYWRvd1Bhc3NDb2RlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5jdXN0b21GcmFnbWVudFNoYWRlcikge1xuICAgICAgICAgICAgdGhpcy5mc2hhZGVyID0gdGhpcy5fZnNHZXRCZWdpbkNvZGUoKSArIG9wdGlvbnMuY3VzdG9tRnJhZ21lbnRTaGFkZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZzaGFkZXIgPSB0aGlzLl9mc0dldExpdFBhc3NDb2RlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVDb21wYXRpYmlsaXR5Py4oKTtcbiAgICB9XG5cbiAgICBnZXREZWZpbml0aW9uKCkge1xuICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gU2hhZGVyVXRpbHMuY3JlYXRlRGVmaW5pdGlvbih0aGlzLmRldmljZSwge1xuICAgICAgICAgICAgbmFtZTogJ0xpdFNoYWRlcicsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB0aGlzLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICB2ZXJ0ZXhDb2RlOiB0aGlzLnZzaGFkZXIsXG4gICAgICAgICAgICBmcmFnbWVudENvZGU6IHRoaXMuZnNoYWRlclxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5zaGFkZXJQYXNzSW5mby5pc0ZvcndhcmQpIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24udGFnID0gU0hBREVSVEFHX01BVEVSSUFMO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgfVxufVxuXG5leHBvcnQgeyBMaXRTaGFkZXIgfTtcbiJdLCJuYW1lcyI6WyJidWlsdGluQXR0cmlidXRlcyIsInZlcnRleF9ub3JtYWwiLCJTRU1BTlRJQ19OT1JNQUwiLCJ2ZXJ0ZXhfdGFuZ2VudCIsIlNFTUFOVElDX1RBTkdFTlQiLCJ2ZXJ0ZXhfdGV4Q29vcmQwIiwiU0VNQU5USUNfVEVYQ09PUkQwIiwidmVydGV4X3RleENvb3JkMSIsIlNFTUFOVElDX1RFWENPT1JEMSIsInZlcnRleF9jb2xvciIsIlNFTUFOVElDX0NPTE9SIiwidmVydGV4X2JvbmVXZWlnaHRzIiwiU0VNQU5USUNfQkxFTkRXRUlHSFQiLCJ2ZXJ0ZXhfYm9uZUluZGljZXMiLCJTRU1BTlRJQ19CTEVORElORElDRVMiLCJidWlsdGluVmFyeWluZ3MiLCJ2VmVydGV4Q29sb3IiLCJ2UG9zaXRpb25XIiwidk5vcm1hbFYiLCJ2Tm9ybWFsVyIsInZUYW5nZW50VyIsInZCaW5vcm1hbFciLCJ2T2JqZWN0U3BhY2VVcFciLCJ2VXYwIiwidlV2MSIsIkxpdFNoYWRlciIsImNvbnN0cnVjdG9yIiwiZGV2aWNlIiwib3B0aW9ucyIsImF0dHJpYnV0ZXMiLCJ2ZXJ0ZXhfcG9zaXRpb24iLCJTRU1BTlRJQ19QT1NJVElPTiIsInVzZXJBdHRyaWJ1dGVzIiwic2VtYW50aWMiLCJuYW1lIiwiT2JqZWN0IiwiZW50cmllcyIsImNodW5rcyIsInVzZXJDaHVua3MiLCJ2YWxpZGF0ZVVzZXJDaHVua3MiLCJjcmVhdGUiLCJzaGFkZXJDaHVua3MiLCJjaHVua05hbWUiLCJoYXNPd25Qcm9wZXJ0eSIsImNodW5rIiwiYSIsImluZGV4T2YiLCJzaGFkZXJQYXNzSW5mbyIsIlNoYWRlclBhc3MiLCJnZXQiLCJnZXRCeUluZGV4IiwicGFzcyIsInNoYWRvd1Bhc3MiLCJpc1NoYWRvdyIsImxpZ2h0aW5nIiwibGlnaHRzIiwibGVuZ3RoIiwiZGlyTGlnaHRNYXBFbmFibGVkIiwiY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkIiwicmVmbGVjdGlvbnMiLCJyZWZsZWN0aW9uU291cmNlIiwibmVlZHNOb3JtYWwiLCJ1c2VTcGVjdWxhciIsImFtYmllbnRTSCIsInVzZUhlaWdodHMiLCJlbmFibGVHR1hTcGVjdWxhciIsInVzZUNsZWFyQ29hdE5vcm1hbHMiLCJuZWVkc1NjZW5lQ29sb3IiLCJ1c2VEeW5hbWljUmVmcmFjdGlvbiIsIm5lZWRzU2NyZWVuU2l6ZSIsIm5lZWRzVHJhbnNmb3JtcyIsInZhcnlpbmdzIiwidmFyeWluZ0RlZmluZXMiLCJ2c2hhZGVyIiwiZnJvbnRlbmREZWNsIiwiZnJvbnRlbmRDb2RlIiwiZnJvbnRlbmRGdW5jIiwibGlnaHRpbmdVdiIsImRlZmluZXMiLCJmc2hhZGVyIiwiX3ZzQWRkQmFzZUNvZGUiLCJjb2RlIiwiYmFzZVZTIiwibmluZVNsaWNlZE1vZGUiLCJTUFJJVEVfUkVOREVSTU9ERV9TTElDRUQiLCJTUFJJVEVfUkVOREVSTU9ERV9USUxFRCIsImJhc2VOaW5lU2xpY2VkVlMiLCJfdnNBZGRUcmFuc2Zvcm1Db2RlIiwidHJhbnNmb3JtVlMiLCJfc2V0TWFwVHJhbnNmb3JtIiwiY29kZXMiLCJpZCIsInV2IiwiY2hlY2tJZCIsInZhck5hbWUiLCJfZnNHZXRCYXNlQ29kZSIsInJlc3VsdCIsImJhc2VQUyIsImJhc2VOaW5lU2xpY2VkUFMiLCJiYXNlTmluZVNsaWNlZFRpbGVkUFMiLCJfZnNHZXRTdGFydENvZGUiLCJzdGFydFBTIiwic3RhcnROaW5lU2xpY2VkUFMiLCJzdGFydE5pbmVTbGljZWRUaWxlZFBTIiwiX2dldExpZ2h0U291cmNlU2hhcGVTdHJpbmciLCJzaGFwZSIsIkxJR0hUU0hBUEVfUkVDVCIsIkxJR0hUU0hBUEVfRElTSyIsIkxJR0hUU0hBUEVfU1BIRVJFIiwiZ2VuZXJhdGVWZXJ0ZXhTaGFkZXIiLCJ1c2VVdiIsInVzZVVubW9kaWZpZWRVdiIsIm1hcFRyYW5zZm9ybXMiLCJjb2RlQm9keSIsIlNIQURFUl9ERVBUSCIsInVzZUluc3RhbmNpbmciLCJpbnN0YW5jZV9saW5lMSIsIlNFTUFOVElDX0FUVFIxMiIsImluc3RhbmNlX2xpbmUyIiwiU0VNQU5USUNfQVRUUjEzIiwiaW5zdGFuY2VfbGluZTMiLCJTRU1BTlRJQ19BVFRSMTQiLCJpbnN0YW5jZV9saW5lNCIsIlNFTUFOVElDX0FUVFIxNSIsImluc3RhbmNlX2xpbmU1IiwiU0VNQU5USUNfQVRUUjExIiwiaW5zdGFuY2VfbGluZTYiLCJTRU1BTlRJQ19BVFRSMTAiLCJpbnN0YW5jaW5nVlMiLCJmcmFnbWVudFVuaWZvcm1zQ291bnQiLCJ2aWV3Tm9ybWFsVlMiLCJoYXNUYW5nZW50cyIsInVzZU5vcm1hbHMiLCJ0YW5nZW50Qmlub3JtYWxWUyIsImV4dFN0YW5kYXJkRGVyaXZhdGl2ZXMiLCJtYXhVdlNldHMiLCJpIiwiZm9yRWFjaCIsIm1hcFRyYW5zZm9ybSIsInZlcnRleENvbG9ycyIsInVzZU1zZGYiLCJtc2RmVGV4dEF0dHJpYnV0ZSIsInZlcnRleF9vdXRsaW5lUGFyYW1ldGVycyIsIlNFTUFOVElDX0FUVFI4IiwidmVydGV4X3NoYWRvd1BhcmFtZXRlcnMiLCJTRU1BTlRJQ19BVFRSOSIsIm1zZGZWUyIsInVzZU1vcnBoUG9zaXRpb24iLCJ1c2VNb3JwaE5vcm1hbCIsInVzZU1vcnBoVGV4dHVyZUJhc2VkIiwibW9ycGhfdmVydGV4X2lkIiwibW9ycGhJZFR5cGUiLCJpc1dlYkdQVSIsIm1vcnBoX3BvczAiLCJtb3JwaF9wb3MxIiwibW9ycGhfcG9zMiIsIm1vcnBoX3BvczMiLCJtb3JwaF9ucm0wIiwibW9ycGhfbnJtMSIsIm1vcnBoX25ybTIiLCJtb3JwaF9ucm0zIiwibW9ycGhfcG9zNCIsIm1vcnBoX3BvczUiLCJtb3JwaF9wb3M2IiwibW9ycGhfcG9zNyIsIm1vcnBoX25ybTQiLCJtb3JwaF9ucm01IiwibW9ycGhfbnJtNiIsIm1vcnBoX25ybTciLCJza2luIiwiU2hhZGVyR2VuZXJhdG9yIiwic2tpbkNvZGUiLCJzY3JlZW5TcGFjZSIsInBpeGVsU25hcCIsIm5vcm1hbFZTIiwic3RhcnRWUyIsImVuZFZTIiwia2V5cyIsInYiLCJ0b1VwcGVyQ2FzZSIsInNoYWRlclBhc3NEZWZpbmVzIiwic2hhZGVyRGVmaW5lcyIsIl9mc0dldEJlZ2luQ29kZSIsIl9mc0dldFBpY2tQYXNzQ29kZSIsImJlZ2luIiwiZW5kIiwiX2ZzR2V0RGVwdGhQYXNzQ29kZSIsInBhY2tEZXB0aFBTIiwiX2ZzR2V0U2hhZG93UGFzc0NvZGUiLCJsaWdodFR5cGUiLCJzaGFkb3dUeXBlIiwiTElHSFRUWVBFX0RJUkVDVElPTkFMIiwiU0hBRE9XX1ZTTTgiLCJTSEFET1dfVlNNMTYiLCJTSEFET1dfVlNNMzIiLCJTSEFET1dfUENTUyIsIlNIQURPV19QQ0YzIiwid2ViZ2wyIiwidGV4dHVyZUZsb2F0SGlnaFByZWNpc2lvbiIsIm1heVBhY2tEZXB0aCIsIlNIQURPV19QQ0YxIiwiU0hBRE9XX1BDRjUiLCJtdXN0UGFja0RlcHRoIiwiTElHSFRUWVBFX09NTkkiLCJ1c2VQYWNrZWREZXB0aCIsInN1cHBvcnRzRGVwdGhTaGFkb3ciLCJsaW5lYXJpemVEZXB0aFBTIiwiaXNWc20iLCJhcHBseVNsb3BlU2NhbGVCaWFzIiwidXNlUGVyc3BlY3RpdmVEZXB0aCIsIkxJR0hUVFlQRV9TUE9UIiwiaGFzTW9kaWZpZWREZXB0aCIsImV4cG9ydFIzMiIsInN0b3JlRVZTTVBTIiwiX2ZzR2V0TGl0UGFzc0NvZGUiLCJkZWNsIiwiQ2h1bmtCdWlsZGVyIiwiZnVuYyIsImJhY2tlbmQiLCJvcGFjaXR5RmFkZXNTcGVjdWxhciIsImFwcGVuZCIsInB1c2giLCJ1c2VDbGVhckNvYXQiLCJmcmVzbmVsTW9kZWwiLCJjb25zZXJ2ZUVuZXJneSIsInVzZVNoZWVuIiwidXNlSXJpZGVzY2VuY2UiLCJzaGFkb3dUeXBlVXNlZCIsIm51bVNoYWRvd0xpZ2h0cyIsInNoYWRvd2VkRGlyZWN0aW9uYWxMaWdodFVzZWQiLCJ1c2VWc20iLCJ1c2VQY3NzIiwiaGFzQXJlYUxpZ2h0cyIsInNvbWUiLCJsaWdodCIsIl9zaGFwZSIsIkxJR0hUU0hBUEVfUFVOQ1RVQUwiLCJjbHVzdGVyZWRMaWdodGluZ0FyZWFMaWdodHNFbmFibGVkIiwiYXJlYUx1dHNQcmVjaXNpb24iLCJhcmVhTGlnaHRMdXRGb3JtYXQiLCJQSVhFTEZPUk1BVF9SR0JBOCIsIl90eXBlIiwibGlnaHRTaGFwZSIsIl9zaGFkb3dUeXBlIiwiY2FzdFNoYWRvd3MiLCJub1NoYWRvdyIsIl9pc1BjZiIsIl9pc1ZzbSIsIl9jb29raWUiLCJfY3ViZW1hcCIsIl9jb29raWVUcmFuc2Zvcm0iLCJoYXNUQk4iLCJmYXN0VGJuIiwiVEJOZmFzdFBTIiwiVEJOUFMiLCJUQk5kZXJpdmF0aXZlUFMiLCJyZXBsYWNlIiwiVEJOT2JqZWN0U3BhY2VQUyIsInNwaGVyaWNhbFBTIiwiZGVjb2RlUFMiLCJnYW1tYUNvZGUiLCJnYW1tYSIsInRvbmVtYXBDb2RlIiwidG9uZU1hcCIsImZvZ0NvZGUiLCJmb2ciLCJ1c2VDdWJlTWFwUm90YXRpb24iLCJjdWJlTWFwUm90YXRlUFMiLCJjdWJlTWFwUHJvamVjdGlvbiIsImN1YmVNYXBQcm9qZWN0Qm94UFMiLCJjdWJlTWFwUHJvamVjdE5vbmVQUyIsInNreWJveEludGVuc2l0eSIsImVudk11bHRpcGx5UFMiLCJlbnZDb25zdFBTIiwidXNlTWV0YWxuZXNzIiwibWV0YWxuZXNzTW9kdWxhdGVQUyIsIkZSRVNORUxfU0NITElDSyIsImZyZXNuZWxTY2hsaWNrUFMiLCJpcmlkZXNjZW5jZURpZmZyYWN0aW9uUFMiLCJ1c2VBbyIsImFvRGlmZnVzZU9jY1BTIiwib2NjbHVkZVNwZWN1bGFyIiwiU1BFQ09DQ19BTyIsIm9jY2x1ZGVTcGVjdWxhckZsb2F0IiwiYW9TcGVjT2NjU2ltcGxlUFMiLCJhb1NwZWNPY2NDb25zdFNpbXBsZVBTIiwiU1BFQ09DQ19HTE9TU0RFUEVOREVOVCIsImFvU3BlY09jY1BTIiwiYW9TcGVjT2NjQ29uc3RQUyIsImZpeFNlYW1zIiwiZml4Q3ViZW1hcFNlYW1zU3RyZXRjaFBTIiwiZml4Q3ViZW1hcFNlYW1zTm9uZVBTIiwiZW52QXRsYXNQUyIsInJlZmxlY3Rpb25FbnZIUVBTIiwiQ2h1bmtVdGlscyIsImRlY29kZUZ1bmMiLCJyZWZsZWN0aW9uQ3ViZW1hcEVuY29kaW5nIiwicmVmbGVjdGlvbkVuY29kaW5nIiwicmVmbGVjdGlvbkVudlBTIiwicmVmbGVjdGlvbkN1YmVQUyIsInNjb2RlIiwicmVmbGVjdGlvblNwaGVyZVBTIiwicmVmbGVjdGlvblNwaGVyZUxvd1BTIiwicmVmbGVjdGlvbkNDUFMiLCJyZWZsZWN0aW9uU2hlZW5QUyIsInVzZVJlZnJhY3Rpb24iLCJyZWZyYWN0aW9uRHluYW1pY1BTIiwicmVmcmFjdGlvbkN1YmVQUyIsImxpZ2h0U2hlZW5QUyIsImNsdXN0ZXJlZExpZ2h0VXRpbHNQUyIsImNsdXN0ZXJlZExpZ2h0aW5nQ29va2llc0VuYWJsZWQiLCJjbHVzdGVyZWRMaWdodENvb2tpZXNQUyIsImNsdXN0ZXJlZExpZ2h0aW5nU2hhZG93c0VuYWJsZWQiLCJzaGFkb3dDYXNjYWRlc1BTIiwic2hhZG93U3RhbmRhcmRQUyIsInNoYWRvd1N0YW5kYXJkR0wyUFMiLCJzaGFkb3dWU01fY29tbW9uUFMiLCJzaGFkb3dWU004UFMiLCJleHRUZXh0dXJlSGFsZkZsb2F0TGluZWFyIiwic2hhZG93RVZTTVBTIiwic2hhZG93RVZTTW5QUyIsImV4dFRleHR1cmVGbG9hdExpbmVhciIsInNoYWRvd1BDU1NQUyIsImJpYXNDb25zdFBTIiwibGlnaHREaWZmdXNlTGFtYmVydFBTIiwibHRjUFMiLCJ1c2VPbGRBbWJpZW50Iiwic2hhZGluZ01vZGVsIiwiU1BFQ1VMQVJfUEhPTkciLCJsaWdodFNwZWN1bGFyUGhvbmdQUyIsImxpZ2h0U3BlY3VsYXJBbmlzb0dHWFBTIiwibGlnaHRTcGVjdWxhckJsaW5uUFMiLCJkaWZmdXNlTWFwRW5hYmxlZCIsImNvbWJpbmVQUyIsImxpZ2h0TWFwRW5hYmxlZCIsImxpZ2h0bWFwRGlyQWRkUFMiLCJsaWdodG1hcEFkZFBTIiwiYWRkQW1iaWVudCIsImxpZ2h0TWFwV2l0aG91dEFtYmllbnQiLCJhbWJpZW50U291cmNlIiwiYW1iaWVudFNIUFMiLCJhbWJpZW50RW52UFMiLCJhbWJpZW50RW5jb2RpbmciLCJhbWJpZW50Q29uc3RhbnRQUyIsInVzZUFtYmllbnRUaW50IiwibXNkZlBTIiwidmlld0RpclBTIiwicmVmbERpckFuaXNvUFMiLCJyZWZsRGlyUFMiLCJoYXNQb2ludExpZ2h0cyIsInVzZXNMaW5lYXJGYWxsb2ZmIiwidXNlc0ludlNxdWFyZWRGYWxsb2ZmIiwidXNlc1Nwb3QiLCJ1c2VzQ29va2llIiwidXNlc0Nvb2tpZU5vdyIsImZsb2F0VW5wYWNraW5nUFMiLCJsaWdodE1hc2tEeW5hbWljIiwic2hhZG93VHlwZVRvU3RyaW5nIiwiY2x1c3RlcmVkTGlnaHRpbmdTaGFkb3dUeXBlIiwiTGlnaHRzQnVmZmVyIiwiY2x1c3RlcmVkTGlnaHRTaGFkb3dzUFMiLCJjbHVzdGVyZWRMaWdodFBTIiwidHdvU2lkZWRMaWdodGluZyIsInNlcGFyYXRlQW1iaWVudCIsIm9jY2x1ZGVEaXJlY3QiLCJ1c2VTcGVjdWxhcml0eUZhY3RvciIsInNoYXBlU3RyaW5nIiwiX2Nvb2tpZUZhbGxvZmYiLCJfY29va2llQ2hhbm5lbCIsIl9mYWxsb2ZmTW9kZSIsIkxJR0hURkFMTE9GRl9MSU5FQVIiLCJwY3NzU2hhZG93cyIsInZzbVNoYWRvd3MiLCJwY2ZTaGFkb3dzIiwic2hhZG93UmVhZE1vZGUiLCJldnNtRXhwIiwiX25vcm1hbE9mZnNldEJpYXMiLCJjb29yZENvZGUiLCJzaGFkb3dTYW1wbGVDb29yZFBTIiwic2hhZG93TWF0cml4IiwibnVtQ2FzY2FkZXMiLCJzaGFkb3dDb29yZEFyZ3MiLCJwZW51bWJyYVNpemVBcmciLCJhZmZlY3RTcGVjdWxhcml0eSIsImNhbGNGcmVzbmVsIiwiYmxlbmRUeXBlIiwiQkxFTkRfTk9STUFMIiwiQkxFTkRfUFJFTVVMVElQTElFRCIsImVuZFBTIiwiQkxFTkRfQURESVRJVkVBTFBIQSIsImFscGhhVG9Db3ZlcmFnZSIsIm91dHB1dEFscGhhUFMiLCJvdXRwdXRBbHBoYVByZW11bFBTIiwib3V0cHV0QWxwaGFPcGFxdWVQUyIsIm91dHB1dFBTIiwiZGVidWdPdXRwdXRQUyIsInByZXBlbmQiLCJsaWdodERpclBvaW50UFMiLCJmYWxsb2ZmTGluZWFyUFMiLCJmYWxsb2ZmSW52U3F1YXJlZFBTIiwic3BvdFBTIiwiY29va2llUFMiLCJzdHJ1Y3RDb2RlIiwiYmFja2VuZENvZGUiLCJkZWJ1Z1Byb2Nlc3NGcm9udGVuZFBTIiwibWVyZ2VkQ29kZSIsImluY2x1ZGVzIiwiZ2VuZXJhdGVGcmFnbWVudFNoYWRlciIsIl90aGlzJGhhbmRsZUNvbXBhdGliaSIsIlNIQURFUl9QSUNLIiwiY3VzdG9tRnJhZ21lbnRTaGFkZXIiLCJoYW5kbGVDb21wYXRpYmlsaXR5IiwiY2FsbCIsImdldERlZmluaXRpb24iLCJkZWZpbml0aW9uIiwiU2hhZGVyVXRpbHMiLCJjcmVhdGVEZWZpbml0aW9uIiwidmVydGV4Q29kZSIsImZyYWdtZW50Q29kZSIsImlzRm9yd2FyZCIsInRhZyIsIlNIQURFUlRBR19NQVRFUklBTCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUE4QkEsTUFBTUEsaUJBQWlCLEdBQUc7QUFDdEJDLEVBQUFBLGFBQWEsRUFBRUMsZUFBZTtBQUM5QkMsRUFBQUEsY0FBYyxFQUFFQyxnQkFBZ0I7QUFDaENDLEVBQUFBLGdCQUFnQixFQUFFQyxrQkFBa0I7QUFDcENDLEVBQUFBLGdCQUFnQixFQUFFQyxrQkFBa0I7QUFDcENDLEVBQUFBLFlBQVksRUFBRUMsY0FBYztBQUM1QkMsRUFBQUEsa0JBQWtCLEVBQUVDLG9CQUFvQjtBQUN4Q0MsRUFBQUEsa0JBQWtCLEVBQUVDLHFCQUFBQTtBQUN4QixDQUFDLENBQUE7QUFFRCxNQUFNQyxlQUFlLEdBQUc7QUFDcEJDLEVBQUFBLFlBQVksRUFBRSxNQUFNO0FBQ3BCQyxFQUFBQSxVQUFVLEVBQUUsTUFBTTtBQUNsQkMsRUFBQUEsUUFBUSxFQUFFLE1BQU07QUFDaEJDLEVBQUFBLFFBQVEsRUFBRSxNQUFNO0FBQ2hCQyxFQUFBQSxTQUFTLEVBQUUsTUFBTTtBQUNqQkMsRUFBQUEsVUFBVSxFQUFFLE1BQU07QUFDbEJDLEVBQUFBLGVBQWUsRUFBRSxNQUFNO0FBQ3ZCQyxFQUFBQSxJQUFJLEVBQUUsTUFBTTtBQUNaQyxFQUFBQSxJQUFJLEVBQUUsTUFBQTtBQUNWLENBQUMsQ0FBQTtBQUVELE1BQU1DLFNBQVMsQ0FBQztBQUNaQyxFQUFBQSxXQUFXQSxDQUFDQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtBQUN6QjtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtJQUNRLElBQUksQ0FBQ0QsTUFBTSxHQUFHQSxNQUFNLENBQUE7SUFDcEIsSUFBSSxDQUFDQyxPQUFPLEdBQUdBLE9BQU8sQ0FBQTs7QUFFdEI7SUFDQSxJQUFJLENBQUNDLFVBQVUsR0FBRztBQUNkQyxNQUFBQSxlQUFlLEVBQUVDLGlCQUFBQTtLQUNwQixDQUFBO0lBRUQsSUFBSUgsT0FBTyxDQUFDSSxjQUFjLEVBQUU7QUFDeEIsTUFBQSxLQUFLLE1BQU0sQ0FBQ0MsUUFBUSxFQUFFQyxJQUFJLENBQUMsSUFBSUMsTUFBTSxDQUFDQyxPQUFPLENBQUNSLE9BQU8sQ0FBQ0ksY0FBYyxDQUFDLEVBQUU7QUFDbkUsUUFBQSxJQUFJLENBQUNILFVBQVUsQ0FBQ0ssSUFBSSxDQUFDLEdBQUdELFFBQVEsQ0FBQTtBQUNwQyxPQUFBO0FBQ0osS0FBQTtJQUVBLElBQUlMLE9BQU8sQ0FBQ1MsTUFBTSxFQUFFO0FBQ2hCLE1BQUEsTUFBTUMsVUFBVSxHQUFHVixPQUFPLENBQUNTLE1BQU0sQ0FBQTtNQUdqQ0Usa0JBQWtCLENBQUNELFVBQVUsQ0FBQyxDQUFBO01BRzlCLElBQUksQ0FBQ0QsTUFBTSxHQUFHRixNQUFNLENBQUNLLE1BQU0sQ0FBQ0MsWUFBWSxDQUFDLENBQUE7QUFDekMsTUFBQSxLQUFLLE1BQU1DLFNBQVMsSUFBSUQsWUFBWSxFQUFFO0FBQ2xDLFFBQUEsSUFBSUgsVUFBVSxDQUFDSyxjQUFjLENBQUNELFNBQVMsQ0FBQyxFQUFFO0FBQ3RDLFVBQUEsTUFBTUUsS0FBSyxHQUFHTixVQUFVLENBQUNJLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLFVBQUEsS0FBSyxNQUFNRyxDQUFDLElBQUk3QyxpQkFBaUIsRUFBRTtBQUMvQixZQUFBLElBQUlBLGlCQUFpQixDQUFDMkMsY0FBYyxDQUFDRSxDQUFDLENBQUMsSUFBSUQsS0FBSyxDQUFDRSxPQUFPLENBQUNELENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRTtjQUM5RCxJQUFJLENBQUNoQixVQUFVLENBQUNnQixDQUFDLENBQUMsR0FBRzdDLGlCQUFpQixDQUFDNkMsQ0FBQyxDQUFDLENBQUE7QUFDN0MsYUFBQTtBQUNKLFdBQUE7QUFDQSxVQUFBLElBQUksQ0FBQ1IsTUFBTSxDQUFDSyxTQUFTLENBQUMsR0FBR0UsS0FBSyxDQUFBO0FBQ2xDLFNBQUE7QUFDSixPQUFBO0FBQ0osS0FBQyxNQUFNO01BQ0gsSUFBSSxDQUFDUCxNQUFNLEdBQUdJLFlBQVksQ0FBQTtBQUM5QixLQUFBO0FBRUEsSUFBQSxJQUFJLENBQUNNLGNBQWMsR0FBR0MsVUFBVSxDQUFDQyxHQUFHLENBQUMsSUFBSSxDQUFDdEIsTUFBTSxDQUFDLENBQUN1QixVQUFVLENBQUN0QixPQUFPLENBQUN1QixJQUFJLENBQUMsQ0FBQTtBQUMxRSxJQUFBLElBQUksQ0FBQ0MsVUFBVSxHQUFHLElBQUksQ0FBQ0wsY0FBYyxDQUFDTSxRQUFRLENBQUE7QUFFOUMsSUFBQSxJQUFJLENBQUNDLFFBQVEsR0FBSTFCLE9BQU8sQ0FBQzJCLE1BQU0sQ0FBQ0MsTUFBTSxHQUFHLENBQUMsSUFBSzVCLE9BQU8sQ0FBQzZCLGtCQUFrQixJQUFJN0IsT0FBTyxDQUFDOEIsd0JBQXdCLENBQUE7QUFDN0csSUFBQSxJQUFJLENBQUNDLFdBQVcsR0FBRyxDQUFDLENBQUMvQixPQUFPLENBQUNnQyxnQkFBZ0IsQ0FBQTtBQUM3QyxJQUFBLElBQUksQ0FBQ0MsV0FBVyxHQUNaLElBQUksQ0FBQ1AsUUFBUSxJQUNiLElBQUksQ0FBQ0ssV0FBVyxJQUNoQi9CLE9BQU8sQ0FBQ2tDLFdBQVcsSUFDbkJsQyxPQUFPLENBQUNtQyxTQUFTLElBQ2pCbkMsT0FBTyxDQUFDb0MsVUFBVSxJQUNsQnBDLE9BQU8sQ0FBQ3FDLGlCQUFpQixJQUN4QnJDLE9BQU8sQ0FBQzhCLHdCQUF3QixJQUFJLENBQUMsSUFBSSxDQUFDTixVQUFXLElBQ3REeEIsT0FBTyxDQUFDc0MsbUJBQW1CLENBQUE7SUFDL0IsSUFBSSxDQUFDTCxXQUFXLEdBQUcsSUFBSSxDQUFDQSxXQUFXLElBQUksQ0FBQyxJQUFJLENBQUNULFVBQVUsQ0FBQTtBQUN2RCxJQUFBLElBQUksQ0FBQ2UsZUFBZSxHQUFHdkMsT0FBTyxDQUFDd0Msb0JBQW9CLENBQUE7QUFDbkQsSUFBQSxJQUFJLENBQUNDLGVBQWUsR0FBR3pDLE9BQU8sQ0FBQ3dDLG9CQUFvQixDQUFBO0FBQ25ELElBQUEsSUFBSSxDQUFDRSxlQUFlLEdBQUcxQyxPQUFPLENBQUN3QyxvQkFBb0IsQ0FBQTs7QUFFbkQ7SUFDQSxJQUFJLENBQUNHLFFBQVEsR0FBRyxFQUFFLENBQUE7SUFDbEIsSUFBSSxDQUFDQyxjQUFjLEdBQUcsRUFBRSxDQUFBO0lBQ3hCLElBQUksQ0FBQ0MsT0FBTyxHQUFHLElBQUksQ0FBQTs7QUFFbkI7SUFDQSxJQUFJLENBQUNDLFlBQVksR0FBRyxJQUFJLENBQUE7SUFDeEIsSUFBSSxDQUFDQyxZQUFZLEdBQUcsSUFBSSxDQUFBO0lBQ3hCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUksQ0FBQTtJQUN4QixJQUFJLENBQUNDLFVBQVUsR0FBRyxJQUFJLENBQUE7O0FBRXRCO0lBQ0EsSUFBSSxDQUFDQyxPQUFPLEdBQUcsRUFBRSxDQUFBOztBQUVqQjtJQUNBLElBQUksQ0FBQ0MsT0FBTyxHQUFHLElBQUksQ0FBQTtBQUN2QixHQUFBO0FBRUFDLEVBQUFBLGNBQWNBLENBQUNDLElBQUksRUFBRTVDLE1BQU0sRUFBRVQsT0FBTyxFQUFFO0lBQ2xDcUQsSUFBSSxJQUFJNUMsTUFBTSxDQUFDNkMsTUFBTSxDQUFBO0lBQ3JCLElBQUl0RCxPQUFPLENBQUN1RCxjQUFjLEtBQUtDLHdCQUF3QixJQUNuRHhELE9BQU8sQ0FBQ3VELGNBQWMsS0FBS0UsdUJBQXVCLEVBQUU7TUFDcERKLElBQUksSUFBSTVDLE1BQU0sQ0FBQ2lELGdCQUFnQixDQUFBO0FBQ25DLEtBQUE7QUFDQSxJQUFBLE9BQU9MLElBQUksQ0FBQTtBQUNmLEdBQUE7RUFFQU0sbUJBQW1CQSxDQUFDTixJQUFJLEVBQUV0RCxNQUFNLEVBQUVVLE1BQU0sRUFBRVQsT0FBTyxFQUFFO0FBQy9DcUQsSUFBQUEsSUFBSSxJQUFJLElBQUksQ0FBQzVDLE1BQU0sQ0FBQ21ELFdBQVcsQ0FBQTtBQUMvQixJQUFBLE9BQU9QLElBQUksQ0FBQTtBQUNmLEdBQUE7RUFFQVEsZ0JBQWdCQSxDQUFDQyxLQUFLLEVBQUV4RCxJQUFJLEVBQUV5RCxFQUFFLEVBQUVDLEVBQUUsRUFBRTtBQUNsQyxJQUFBLE1BQU1DLE9BQU8sR0FBR0YsRUFBRSxHQUFHQyxFQUFFLEdBQUcsR0FBRyxDQUFBO0lBQzdCLElBQUksQ0FBQ0YsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDRyxPQUFPLENBQUMsRUFBRTtBQUNwQjtBQUNBLE1BQUEsTUFBTUMsT0FBTyxHQUFJLENBQVU1RCxRQUFBQSxFQUFBQSxJQUFLLENBQWEsWUFBQSxDQUFBLENBQUE7QUFDN0N3RCxNQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUssQ0FBQSxhQUFBLEVBQWVJLE9BQVEsQ0FBSyxJQUFBLENBQUEsQ0FBQTtBQUN6Q0osTUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFLLENBQUEsYUFBQSxFQUFlSSxPQUFRLENBQUssSUFBQSxDQUFBLENBQUE7TUFDekNKLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSyxtQkFBa0JFLEVBQUcsQ0FBQSxDQUFBLEVBQUdELEVBQUcsQ0FBSSxHQUFBLENBQUEsQ0FBQTtBQUM1Q0QsTUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFLLENBQUEsTUFBQSxFQUFRRSxFQUFHLENBQUdELENBQUFBLEVBQUFBLEVBQUcsQ0FBcUJDLG1CQUFBQSxFQUFBQSxFQUFHLFNBQVFFLE9BQVEsQ0FBQSxlQUFBLEVBQWlCRixFQUFHLENBQUEsTUFBQSxFQUFRRSxPQUFRLENBQU8sTUFBQSxDQUFBLENBQUE7QUFDakhKLE1BQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQ0csT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFBO0FBQzVCLEtBQUE7QUFDQSxJQUFBLE9BQU9ILEtBQUssQ0FBQTtBQUNoQixHQUFBOztBQUVBO0FBQ0FLLEVBQUFBLGNBQWNBLEdBQUc7QUFDYixJQUFBLE1BQU1uRSxPQUFPLEdBQUcsSUFBSSxDQUFDQSxPQUFPLENBQUE7QUFDNUIsSUFBQSxNQUFNUyxNQUFNLEdBQUcsSUFBSSxDQUFDQSxNQUFNLENBQUE7QUFDMUIsSUFBQSxJQUFJMkQsTUFBTSxHQUFHLElBQUksQ0FBQzNELE1BQU0sQ0FBQzRELE1BQU0sQ0FBQTtBQUMvQixJQUFBLElBQUlyRSxPQUFPLENBQUN1RCxjQUFjLEtBQUtDLHdCQUF3QixFQUFFO01BQ3JEWSxNQUFNLElBQUkzRCxNQUFNLENBQUM2RCxnQkFBZ0IsQ0FBQTtBQUNyQyxLQUFDLE1BQU0sSUFBSXRFLE9BQU8sQ0FBQ3VELGNBQWMsS0FBS0UsdUJBQXVCLEVBQUU7TUFDM0RXLE1BQU0sSUFBSTNELE1BQU0sQ0FBQzhELHFCQUFxQixDQUFBO0FBQzFDLEtBQUE7QUFDQSxJQUFBLE9BQU9ILE1BQU0sQ0FBQTtBQUNqQixHQUFBOztBQUVBO0VBQ0FJLGVBQWVBLENBQUNuQixJQUFJLEVBQUV0RCxNQUFNLEVBQUVVLE1BQU0sRUFBRVQsT0FBTyxFQUFFO0FBQzNDLElBQUEsSUFBSW9FLE1BQU0sR0FBRzNELE1BQU0sQ0FBQ2dFLE9BQU8sQ0FBQTtBQUMzQixJQUFBLElBQUl6RSxPQUFPLENBQUN1RCxjQUFjLEtBQUtDLHdCQUF3QixFQUFFO01BQ3JEWSxNQUFNLElBQUkzRCxNQUFNLENBQUNpRSxpQkFBaUIsQ0FBQTtBQUN0QyxLQUFDLE1BQU0sSUFBSTFFLE9BQU8sQ0FBQ3VELGNBQWMsS0FBS0UsdUJBQXVCLEVBQUU7TUFDM0RXLE1BQU0sSUFBSTNELE1BQU0sQ0FBQ2tFLHNCQUFzQixDQUFBO0FBQzNDLEtBQUE7QUFDQSxJQUFBLE9BQU9QLE1BQU0sQ0FBQTtBQUNqQixHQUFBO0VBRUFRLDBCQUEwQkEsQ0FBQ0MsS0FBSyxFQUFFO0FBQzlCLElBQUEsUUFBUUEsS0FBSztBQUNULE1BQUEsS0FBS0MsZUFBZTtBQUNoQixRQUFBLE9BQU8sTUFBTSxDQUFBO0FBQ2pCLE1BQUEsS0FBS0MsZUFBZTtBQUNoQixRQUFBLE9BQU8sTUFBTSxDQUFBO0FBQ2pCLE1BQUEsS0FBS0MsaUJBQWlCO0FBQ2xCLFFBQUEsT0FBTyxRQUFRLENBQUE7QUFDbkIsTUFBQTtBQUNJLFFBQUEsT0FBTyxFQUFFLENBQUE7QUFDakIsS0FBQTtBQUNKLEdBQUE7QUFFQUMsRUFBQUEsb0JBQW9CQSxDQUFDQyxLQUFLLEVBQUVDLGVBQWUsRUFBRUMsYUFBYSxFQUFFO0FBQ3hELElBQUEsTUFBTXJGLE1BQU0sR0FBRyxJQUFJLENBQUNBLE1BQU0sQ0FBQTtBQUMxQixJQUFBLE1BQU1DLE9BQU8sR0FBRyxJQUFJLENBQUNBLE9BQU8sQ0FBQTtBQUM1QixJQUFBLE1BQU1TLE1BQU0sR0FBRyxJQUFJLENBQUNBLE1BQU0sQ0FBQTtJQUUxQixJQUFJNEMsSUFBSSxHQUFHLEVBQUUsQ0FBQTtJQUNiLElBQUlnQyxRQUFRLEdBQUcsRUFBRSxDQUFBOztBQUVqQjtJQUNBaEMsSUFBSSxHQUFHLElBQUksQ0FBQ0QsY0FBYyxDQUFDQyxJQUFJLEVBQUU1QyxNQUFNLEVBQUVULE9BQU8sQ0FBQyxDQUFBO0FBRWpEcUYsSUFBQUEsUUFBUSxJQUFJLDBDQUEwQyxDQUFBO0FBRXRELElBQUEsSUFBSSxJQUFJLENBQUNyRixPQUFPLENBQUN1QixJQUFJLEtBQUsrRCxZQUFZLEVBQUU7QUFDcENqQyxNQUFBQSxJQUFJLElBQUkseUJBQXlCLENBQUE7QUFDakNBLE1BQUFBLElBQUksSUFBSSxzQkFBc0IsQ0FBQTtBQUM5QkEsTUFBQUEsSUFBSSxJQUFJLHNCQUFzQixDQUFBO0FBQzlCQSxNQUFBQSxJQUFJLElBQUksNkJBQTZCLENBQUE7QUFDckNBLE1BQUFBLElBQUksSUFBSSxVQUFVLENBQUE7QUFDbEJBLE1BQUFBLElBQUksSUFBSSx3QkFBd0IsQ0FBQTtBQUNoQ0EsTUFBQUEsSUFBSSxJQUFJLHdCQUF3QixDQUFBO0FBQ2hDQSxNQUFBQSxJQUFJLElBQUksaUNBQWlDLENBQUE7QUFDekNBLE1BQUFBLElBQUksSUFBSSxVQUFVLENBQUE7QUFDbEJnQyxNQUFBQSxRQUFRLElBQUksMkVBQTJFLENBQUE7QUFDM0YsS0FBQTtBQUVBLElBQUEsSUFBSSxJQUFJLENBQUNyRixPQUFPLENBQUN1RixhQUFhLEVBQUU7QUFDNUIsTUFBQSxJQUFJLENBQUN0RixVQUFVLENBQUN1RixjQUFjLEdBQUdDLGVBQWUsQ0FBQTtBQUNoRCxNQUFBLElBQUksQ0FBQ3hGLFVBQVUsQ0FBQ3lGLGNBQWMsR0FBR0MsZUFBZSxDQUFBO0FBQ2hELE1BQUEsSUFBSSxDQUFDMUYsVUFBVSxDQUFDMkYsY0FBYyxHQUFHQyxlQUFlLENBQUE7QUFDaEQsTUFBQSxJQUFJLENBQUM1RixVQUFVLENBQUM2RixjQUFjLEdBQUdDLGVBQWUsQ0FBQTtBQUNoRCxNQUFBLElBQUksQ0FBQzlGLFVBQVUsQ0FBQytGLGNBQWMsR0FBR0MsZUFBZSxDQUFBO0FBQ2hELE1BQUEsSUFBSSxDQUFDaEcsVUFBVSxDQUFDaUcsY0FBYyxHQUFHQyxlQUFlLENBQUE7TUFDaEQ5QyxJQUFJLElBQUk1QyxNQUFNLENBQUMyRixZQUFZLENBQUE7QUFDL0IsS0FBQTtJQUVBLElBQUksSUFBSSxDQUFDbkUsV0FBVyxFQUFFO0FBQ2xCLE1BQUEsSUFBSSxDQUFDaEMsVUFBVSxDQUFDNUIsYUFBYSxHQUFHQyxlQUFlLENBQUE7QUFDL0MrRyxNQUFBQSxRQUFRLElBQUksOEJBQThCLENBQUE7TUFFMUMsSUFBSXJGLE9BQU8sQ0FBQ2dDLGdCQUFnQixLQUFLLFdBQVcsSUFBSWpDLE1BQU0sQ0FBQ3NHLHFCQUFxQixJQUFJLEVBQUUsRUFBRTtRQUNoRmhELElBQUksSUFBSTVDLE1BQU0sQ0FBQzZGLFlBQVksQ0FBQTtBQUMzQmpCLFFBQUFBLFFBQVEsSUFBSSxxQ0FBcUMsQ0FBQTtBQUNyRCxPQUFBO0FBRUEsTUFBQSxJQUFJckYsT0FBTyxDQUFDdUcsV0FBVyxLQUFLdkcsT0FBTyxDQUFDb0MsVUFBVSxJQUFJcEMsT0FBTyxDQUFDd0csVUFBVSxJQUFJeEcsT0FBTyxDQUFDcUMsaUJBQWlCLENBQUMsRUFBRTtBQUNoRyxRQUFBLElBQUksQ0FBQ3BDLFVBQVUsQ0FBQzFCLGNBQWMsR0FBR0MsZ0JBQWdCLENBQUE7UUFDakQ2RSxJQUFJLElBQUk1QyxNQUFNLENBQUNnRyxpQkFBaUIsQ0FBQTtBQUNoQ3BCLFFBQUFBLFFBQVEsSUFBSSxrQ0FBa0MsQ0FBQTtBQUM5Q0EsUUFBQUEsUUFBUSxJQUFJLG1DQUFtQyxDQUFBO09BQ2xELE1BQU0sSUFBSXJGLE9BQU8sQ0FBQ3FDLGlCQUFpQixJQUFJLENBQUN0QyxNQUFNLENBQUMyRyxzQkFBc0IsRUFBRTtBQUNwRXJCLFFBQUFBLFFBQVEsSUFBSSxrRUFBa0UsQ0FBQTtBQUNsRixPQUFBO0FBQ0osS0FBQTtJQUVBLE1BQU1zQixTQUFTLEdBQUcsQ0FBQyxDQUFBO0lBRW5CLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHRCxTQUFTLEVBQUVDLENBQUMsRUFBRSxFQUFFO0FBQ2hDLE1BQUEsSUFBSTFCLEtBQUssQ0FBQzBCLENBQUMsQ0FBQyxFQUFFO1FBQ1YsSUFBSSxDQUFDM0csVUFBVSxDQUFDLGlCQUFpQixHQUFHMkcsQ0FBQyxDQUFDLEdBQUcsVUFBVSxHQUFHQSxDQUFDLENBQUE7UUFDdkR2RCxJQUFJLElBQUk1QyxNQUFNLENBQUMsSUFBSSxHQUFHbUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFBO1FBQy9CdkIsUUFBUSxJQUFJLFlBQVksR0FBR3VCLENBQUMsR0FBRyxVQUFVLEdBQUdBLENBQUMsR0FBRyxPQUFPLENBQUE7QUFDM0QsT0FBQTtBQUNBLE1BQUEsSUFBSXpCLGVBQWUsQ0FBQ3lCLENBQUMsQ0FBQyxFQUFFO1FBQ3BCdkIsUUFBUSxJQUFJLFFBQVEsR0FBR3VCLENBQUMsR0FBRyxPQUFPLEdBQUdBLENBQUMsR0FBRyxLQUFLLENBQUE7QUFDbEQsT0FBQTtBQUNKLEtBQUE7QUFFQSxJQUFBLE1BQU05QyxLQUFLLEdBQUcsQ0FBQ1QsSUFBSSxFQUFFLElBQUksQ0FBQ1YsUUFBUSxFQUFFMEMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxDQUFBO0FBRWpERCxJQUFBQSxhQUFhLENBQUN5QixPQUFPLENBQUVDLFlBQVksSUFBSztBQUNwQyxNQUFBLElBQUksQ0FBQ2pELGdCQUFnQixDQUFDQyxLQUFLLEVBQUVnRCxZQUFZLENBQUN4RyxJQUFJLEVBQUV3RyxZQUFZLENBQUMvQyxFQUFFLEVBQUUrQyxZQUFZLENBQUM5QyxFQUFFLENBQUMsQ0FBQTtBQUNyRixLQUFDLENBQUMsQ0FBQTtBQUVGWCxJQUFBQSxJQUFJLEdBQUdTLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNmLElBQUEsSUFBSSxDQUFDbkIsUUFBUSxHQUFHbUIsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ3hCdUIsSUFBQUEsUUFBUSxHQUFHdkIsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBRW5CLElBQUk5RCxPQUFPLENBQUMrRyxZQUFZLEVBQUU7QUFDdEIsTUFBQSxJQUFJLENBQUM5RyxVQUFVLENBQUNwQixZQUFZLEdBQUdDLGNBQWMsQ0FBQTtBQUM3Q3VHLE1BQUFBLFFBQVEsSUFBSSxtQ0FBbUMsQ0FBQTtBQUNuRCxLQUFBO0FBRUEsSUFBQSxJQUFJckYsT0FBTyxDQUFDZ0gsT0FBTyxJQUFJaEgsT0FBTyxDQUFDaUgsaUJBQWlCLEVBQUU7QUFDOUMsTUFBQSxJQUFJLENBQUNoSCxVQUFVLENBQUNpSCx3QkFBd0IsR0FBR0MsY0FBYyxDQUFBO0FBQ3pELE1BQUEsSUFBSSxDQUFDbEgsVUFBVSxDQUFDbUgsdUJBQXVCLEdBQUdDLGNBQWMsQ0FBQTtBQUV4RGhDLE1BQUFBLFFBQVEsSUFBSSwyQkFBMkIsQ0FBQTtNQUV2Q2hDLElBQUksSUFBSTVDLE1BQU0sQ0FBQzZHLE1BQU0sQ0FBQTtBQUN6QixLQUFBOztBQUVBO0FBQ0EsSUFBQSxJQUFJdEgsT0FBTyxDQUFDdUgsZ0JBQWdCLElBQUl2SCxPQUFPLENBQUN3SCxjQUFjLEVBQUU7TUFFcEQsSUFBSXhILE9BQU8sQ0FBQ3lILG9CQUFvQixFQUFFO0FBRTlCcEUsUUFBQUEsSUFBSSxJQUFJLGtDQUFrQyxDQUFBO1FBRTFDLElBQUlyRCxPQUFPLENBQUN1SCxnQkFBZ0IsRUFBRTtBQUMxQmxFLFVBQUFBLElBQUksSUFBSSwyQ0FBMkMsQ0FBQTtBQUN2RCxTQUFBO1FBRUEsSUFBSXJELE9BQU8sQ0FBQ3dILGNBQWMsRUFBRTtBQUN4Qm5FLFVBQUFBLElBQUksSUFBSSx5Q0FBeUMsQ0FBQTtBQUNyRCxTQUFBOztBQUVBO0FBQ0EsUUFBQSxJQUFJLENBQUNwRCxVQUFVLENBQUN5SCxlQUFlLEdBQUczQixlQUFlLENBQUE7UUFDakQsTUFBTTRCLFdBQVcsR0FBRzVILE1BQU0sQ0FBQzZILFFBQVEsR0FBRyxNQUFNLEdBQUcsT0FBTyxDQUFBO1FBQ3REdkUsSUFBSSxJQUFLLENBQVlzRSxVQUFBQSxFQUFBQSxXQUFZLENBQW9CLG1CQUFBLENBQUEsQ0FBQTtBQUV6RCxPQUFDLE1BQU07QUFFSDtBQUNBdEUsUUFBQUEsSUFBSSxJQUFJLG9CQUFvQixDQUFBOztBQUU1QjtRQUNBLElBQUlyRCxPQUFPLENBQUN1SCxnQkFBZ0IsRUFBRTtBQUMxQixVQUFBLElBQUksQ0FBQ3RILFVBQVUsQ0FBQzRILFVBQVUsR0FBR1YsY0FBYyxDQUFBO0FBQzNDLFVBQUEsSUFBSSxDQUFDbEgsVUFBVSxDQUFDNkgsVUFBVSxHQUFHVCxjQUFjLENBQUE7QUFDM0MsVUFBQSxJQUFJLENBQUNwSCxVQUFVLENBQUM4SCxVQUFVLEdBQUc1QixlQUFlLENBQUE7QUFDNUMsVUFBQSxJQUFJLENBQUNsRyxVQUFVLENBQUMrSCxVQUFVLEdBQUcvQixlQUFlLENBQUE7QUFFNUM1QyxVQUFBQSxJQUFJLElBQUksMEJBQTBCLENBQUE7QUFDbENBLFVBQUFBLElBQUksSUFBSSw4QkFBOEIsQ0FBQTtBQUN0Q0EsVUFBQUEsSUFBSSxJQUFJLDhCQUE4QixDQUFBO0FBQ3RDQSxVQUFBQSxJQUFJLElBQUksOEJBQThCLENBQUE7QUFDdENBLFVBQUFBLElBQUksSUFBSSw4QkFBOEIsQ0FBQTtBQUUxQyxTQUFDLE1BQU0sSUFBSXJELE9BQU8sQ0FBQ3dILGNBQWMsRUFBRTtBQUMvQixVQUFBLElBQUksQ0FBQ3ZILFVBQVUsQ0FBQ2dJLFVBQVUsR0FBR2QsY0FBYyxDQUFBO0FBQzNDLFVBQUEsSUFBSSxDQUFDbEgsVUFBVSxDQUFDaUksVUFBVSxHQUFHYixjQUFjLENBQUE7QUFDM0MsVUFBQSxJQUFJLENBQUNwSCxVQUFVLENBQUNrSSxVQUFVLEdBQUdoQyxlQUFlLENBQUE7QUFDNUMsVUFBQSxJQUFJLENBQUNsRyxVQUFVLENBQUNtSSxVQUFVLEdBQUduQyxlQUFlLENBQUE7QUFFNUM1QyxVQUFBQSxJQUFJLElBQUksMEJBQTBCLENBQUE7QUFDbENBLFVBQUFBLElBQUksSUFBSSw4QkFBOEIsQ0FBQTtBQUN0Q0EsVUFBQUEsSUFBSSxJQUFJLDhCQUE4QixDQUFBO0FBQ3RDQSxVQUFBQSxJQUFJLElBQUksOEJBQThCLENBQUE7QUFDdENBLFVBQUFBLElBQUksSUFBSSw4QkFBOEIsQ0FBQTtBQUMxQyxTQUFBOztBQUVBO0FBQ0EsUUFBQSxJQUFJLENBQUNyRCxPQUFPLENBQUN3SCxjQUFjLEVBQUU7QUFDekIsVUFBQSxJQUFJLENBQUN2SCxVQUFVLENBQUNvSSxVQUFVLEdBQUc1QyxlQUFlLENBQUE7QUFDNUMsVUFBQSxJQUFJLENBQUN4RixVQUFVLENBQUNxSSxVQUFVLEdBQUczQyxlQUFlLENBQUE7QUFDNUMsVUFBQSxJQUFJLENBQUMxRixVQUFVLENBQUNzSSxVQUFVLEdBQUcxQyxlQUFlLENBQUE7QUFDNUMsVUFBQSxJQUFJLENBQUM1RixVQUFVLENBQUN1SSxVQUFVLEdBQUd6QyxlQUFlLENBQUE7QUFFNUMxQyxVQUFBQSxJQUFJLElBQUksMEJBQTBCLENBQUE7QUFDbENBLFVBQUFBLElBQUksSUFBSSw4QkFBOEIsQ0FBQTtBQUN0Q0EsVUFBQUEsSUFBSSxJQUFJLDhCQUE4QixDQUFBO0FBQ3RDQSxVQUFBQSxJQUFJLElBQUksOEJBQThCLENBQUE7QUFDdENBLFVBQUFBLElBQUksSUFBSSw4QkFBOEIsQ0FBQTtBQUMxQyxTQUFDLE1BQU07QUFDSCxVQUFBLElBQUksQ0FBQ3BELFVBQVUsQ0FBQ3dJLFVBQVUsR0FBR2hELGVBQWUsQ0FBQTtBQUM1QyxVQUFBLElBQUksQ0FBQ3hGLFVBQVUsQ0FBQ3lJLFVBQVUsR0FBRy9DLGVBQWUsQ0FBQTtBQUM1QyxVQUFBLElBQUksQ0FBQzFGLFVBQVUsQ0FBQzBJLFVBQVUsR0FBRzlDLGVBQWUsQ0FBQTtBQUM1QyxVQUFBLElBQUksQ0FBQzVGLFVBQVUsQ0FBQzJJLFVBQVUsR0FBRzdDLGVBQWUsQ0FBQTtBQUU1QzFDLFVBQUFBLElBQUksSUFBSSwwQkFBMEIsQ0FBQTtBQUNsQ0EsVUFBQUEsSUFBSSxJQUFJLDhCQUE4QixDQUFBO0FBQ3RDQSxVQUFBQSxJQUFJLElBQUksOEJBQThCLENBQUE7QUFDdENBLFVBQUFBLElBQUksSUFBSSw4QkFBOEIsQ0FBQTtBQUN0Q0EsVUFBQUEsSUFBSSxJQUFJLDhCQUE4QixDQUFBO0FBQzFDLFNBQUE7QUFDSixPQUFBO0FBQ0osS0FBQTtJQUVBLElBQUlyRCxPQUFPLENBQUM2SSxJQUFJLEVBQUU7QUFDZCxNQUFBLElBQUksQ0FBQzVJLFVBQVUsQ0FBQ2xCLGtCQUFrQixHQUFHQyxvQkFBb0IsQ0FBQTtBQUN6RCxNQUFBLElBQUksQ0FBQ2lCLFVBQVUsQ0FBQ2hCLGtCQUFrQixHQUFHQyxxQkFBcUIsQ0FBQTtNQUMxRG1FLElBQUksSUFBSXlGLGVBQWUsQ0FBQ0MsUUFBUSxDQUFDaEosTUFBTSxFQUFFVSxNQUFNLENBQUMsQ0FBQTtBQUNoRDRDLE1BQUFBLElBQUksSUFBSSxnQkFBZ0IsQ0FBQTtBQUM1QixLQUFDLE1BQU0sSUFBSXJELE9BQU8sQ0FBQ3VGLGFBQWEsRUFBRTtBQUM5QmxDLE1BQUFBLElBQUksSUFBSSxzQkFBc0IsQ0FBQTtBQUNsQyxLQUFBO0lBQ0EsSUFBSXJELE9BQU8sQ0FBQ2dKLFdBQVcsRUFBRTtBQUNyQjNGLE1BQUFBLElBQUksSUFBSSx1QkFBdUIsQ0FBQTtBQUNuQyxLQUFBO0lBQ0EsSUFBSXJELE9BQU8sQ0FBQ2lKLFNBQVMsRUFBRTtBQUNuQjVGLE1BQUFBLElBQUksSUFBSSxxQkFBcUIsQ0FBQTtBQUNqQyxLQUFBO0FBRUFBLElBQUFBLElBQUksR0FBRyxJQUFJLENBQUNNLG1CQUFtQixDQUFDTixJQUFJLEVBQUV0RCxNQUFNLEVBQUVVLE1BQU0sRUFBRVQsT0FBTyxDQUFDLENBQUE7SUFFOUQsSUFBSSxJQUFJLENBQUNpQyxXQUFXLEVBQUU7TUFDbEJvQixJQUFJLElBQUk1QyxNQUFNLENBQUN5SSxRQUFRLENBQUE7QUFDM0IsS0FBQTtBQUVBN0YsSUFBQUEsSUFBSSxJQUFJLElBQUksQ0FBQTtJQUNaQSxJQUFJLElBQUk1QyxNQUFNLENBQUMwSSxPQUFPLENBQUE7QUFDdEI5RixJQUFBQSxJQUFJLElBQUlnQyxRQUFRLENBQUE7SUFDaEJoQyxJQUFJLElBQUk1QyxNQUFNLENBQUMySSxLQUFLLENBQUE7QUFDcEIvRixJQUFBQSxJQUFJLElBQUksR0FBRyxDQUFBOztBQUVYO0lBQ0E5QyxNQUFNLENBQUM4SSxJQUFJLENBQUNsSyxlQUFlLENBQUMsQ0FBQzBILE9BQU8sQ0FBRXlDLENBQUMsSUFBSztNQUN4QyxJQUFJakcsSUFBSSxDQUFDbkMsT0FBTyxDQUFDb0ksQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ3RCLElBQUksQ0FBQzNHLFFBQVEsSUFBSyxDQUFVeEQsUUFBQUEsRUFBQUEsZUFBZSxDQUFDbUssQ0FBQyxDQUFFLENBQUdBLENBQUFBLEVBQUFBLENBQUUsQ0FBSSxHQUFBLENBQUEsQ0FBQTtRQUN4RCxJQUFJLENBQUMxRyxjQUFjLElBQUssQ0FBQSxnQkFBQSxFQUFrQjBHLENBQUMsQ0FBQ0MsV0FBVyxFQUFHLENBQUcsRUFBQSxDQUFBLENBQUE7QUFDakUsT0FBQTtBQUNKLEtBQUMsQ0FBQyxDQUFBO0FBRUYsSUFBQSxNQUFNQyxpQkFBaUIsR0FBRyxJQUFJLENBQUNySSxjQUFjLENBQUNzSSxhQUFhLENBQUE7SUFDM0QsSUFBSSxDQUFDNUcsT0FBTyxHQUFHMkcsaUJBQWlCLEdBQUcsSUFBSSxDQUFDN0csUUFBUSxHQUFHVSxJQUFJLENBQUE7QUFDM0QsR0FBQTtBQUVBcUcsRUFBQUEsZUFBZUEsR0FBRztBQUVkLElBQUEsSUFBSXJHLElBQUksR0FBRyxJQUFJLENBQUNsQyxjQUFjLENBQUNzSSxhQUFhLENBQUE7QUFFNUMsSUFBQSxLQUFLLElBQUk3QyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDMUQsT0FBTyxDQUFDdEIsTUFBTSxFQUFFZ0YsQ0FBQyxFQUFFLEVBQUU7TUFDMUN2RCxJQUFJLElBQUssV0FBVSxJQUFJLENBQUNILE9BQU8sQ0FBQzBELENBQUMsQ0FBRSxDQUFHLEVBQUEsQ0FBQSxDQUFBO0FBQzFDLEtBQUE7QUFFQSxJQUFBLE9BQU92RCxJQUFJLENBQUE7QUFDZixHQUFBO0FBRUFzRyxFQUFBQSxrQkFBa0JBLEdBQUc7QUFDakIsSUFBQSxJQUFJdEcsSUFBSSxHQUFHLElBQUksQ0FBQ3FHLGVBQWUsRUFBRSxDQUFBO0FBQ2pDckcsSUFBQUEsSUFBSSxJQUFJLHdCQUF3QixDQUFBO0lBQ2hDQSxJQUFJLElBQUksSUFBSSxDQUFDVixRQUFRLENBQUE7SUFDckJVLElBQUksSUFBSSxJQUFJLENBQUNULGNBQWMsQ0FBQTtJQUMzQlMsSUFBSSxJQUFJLElBQUksQ0FBQ1AsWUFBWSxDQUFBO0lBQ3pCTyxJQUFJLElBQUksSUFBSSxDQUFDTixZQUFZLENBQUE7QUFDekJNLElBQUFBLElBQUksSUFBSXlGLGVBQWUsQ0FBQ2MsS0FBSyxFQUFFLENBQUE7SUFDL0J2RyxJQUFJLElBQUksSUFBSSxDQUFDTCxZQUFZLENBQUE7QUFDekJLLElBQUFBLElBQUksSUFBSSw4QkFBOEIsQ0FBQTtBQUN0Q0EsSUFBQUEsSUFBSSxJQUFJeUYsZUFBZSxDQUFDZSxHQUFHLEVBQUUsQ0FBQTtBQUM3QixJQUFBLE9BQU94RyxJQUFJLENBQUE7QUFDZixHQUFBO0FBRUF5RyxFQUFBQSxtQkFBbUJBLEdBQUc7QUFDbEIsSUFBQSxNQUFNckosTUFBTSxHQUFHLElBQUksQ0FBQ0EsTUFBTSxDQUFBO0FBRTFCLElBQUEsSUFBSTRDLElBQUksR0FBRyxJQUFJLENBQUNxRyxlQUFlLEVBQUUsQ0FBQTtBQUVqQ3JHLElBQUFBLElBQUksSUFBSSx5QkFBeUIsQ0FBQTtJQUNqQ0EsSUFBSSxJQUFJLElBQUksQ0FBQ1YsUUFBUSxDQUFBO0lBQ3JCVSxJQUFJLElBQUksSUFBSSxDQUFDVCxjQUFjLENBQUE7SUFDM0JTLElBQUksSUFBSTVDLE1BQU0sQ0FBQ3NKLFdBQVcsQ0FBQTtJQUMxQjFHLElBQUksSUFBSSxJQUFJLENBQUNQLFlBQVksQ0FBQTtJQUN6Qk8sSUFBSSxJQUFJLElBQUksQ0FBQ04sWUFBWSxDQUFBO0FBQ3pCTSxJQUFBQSxJQUFJLElBQUl5RixlQUFlLENBQUNjLEtBQUssRUFBRSxDQUFBO0lBQy9CdkcsSUFBSSxJQUFJLElBQUksQ0FBQ0wsWUFBWSxDQUFBO0FBQ3pCSyxJQUFBQSxJQUFJLElBQUkseUNBQXlDLENBQUE7QUFDakRBLElBQUFBLElBQUksSUFBSXlGLGVBQWUsQ0FBQ2UsR0FBRyxFQUFFLENBQUE7QUFFN0IsSUFBQSxPQUFPeEcsSUFBSSxDQUFBO0FBQ2YsR0FBQTtBQUVBMkcsRUFBQUEsb0JBQW9CQSxHQUFHO0FBQ25CLElBQUEsTUFBTWpLLE1BQU0sR0FBRyxJQUFJLENBQUNBLE1BQU0sQ0FBQTtBQUMxQixJQUFBLE1BQU1DLE9BQU8sR0FBRyxJQUFJLENBQUNBLE9BQU8sQ0FBQTtBQUM1QixJQUFBLE1BQU1TLE1BQU0sR0FBRyxJQUFJLENBQUNBLE1BQU0sQ0FBQTtBQUMxQixJQUFBLE1BQU1rQyxRQUFRLEdBQUcsSUFBSSxDQUFDQSxRQUFRLENBQUE7QUFFOUIsSUFBQSxNQUFNc0gsU0FBUyxHQUFHLElBQUksQ0FBQzlJLGNBQWMsQ0FBQzhJLFNBQVMsQ0FBQTtBQUMvQyxJQUFBLElBQUlDLFVBQVUsR0FBRyxJQUFJLENBQUMvSSxjQUFjLENBQUMrSSxVQUFVLENBQUE7O0FBRS9DO0FBQ0EsSUFBQSxJQUFJRCxTQUFTLEtBQUtFLHFCQUFxQixJQUFJbkssT0FBTyxDQUFDOEIsd0JBQXdCLEVBQUU7QUFDekUsTUFBQSxJQUFJb0ksVUFBVSxLQUFLRSxXQUFXLElBQUlGLFVBQVUsS0FBS0csWUFBWSxJQUFJSCxVQUFVLEtBQUtJLFlBQVksSUFBSUosVUFBVSxLQUFLSyxXQUFXLEVBQUU7QUFDeEhMLFFBQUFBLFVBQVUsR0FBR00sV0FBVyxDQUFBO0FBQzVCLE9BQUE7QUFDSixLQUFBO0FBRUEsSUFBQSxJQUFJbkgsSUFBSSxHQUFHLElBQUksQ0FBQ3FHLGVBQWUsRUFBRSxDQUFBO0FBRWpDLElBQUEsSUFBSTNKLE1BQU0sQ0FBQzJHLHNCQUFzQixJQUFJLENBQUMzRyxNQUFNLENBQUMwSyxNQUFNLElBQUksQ0FBQzFLLE1BQU0sQ0FBQzZILFFBQVEsRUFBRTtBQUNyRXZFLE1BQUFBLElBQUksSUFBSSwrQkFBK0IsQ0FBQTtBQUMzQyxLQUFBO0lBRUEsSUFBSTZHLFVBQVUsS0FBS0ksWUFBWSxFQUFFO01BQzdCLElBQUl2SyxNQUFNLENBQUMySyx5QkFBeUIsRUFBRTtBQUNsQ3JILFFBQUFBLElBQUksSUFBSSwrQkFBK0IsQ0FBQTtBQUMzQyxPQUFDLE1BQU07QUFDSEEsUUFBQUEsSUFBSSxJQUFJLCtCQUErQixDQUFBO0FBQzNDLE9BQUE7QUFDSixLQUFDLE1BQU0sSUFBSTZHLFVBQVUsS0FBS0csWUFBWSxFQUFFO0FBQ3BDaEgsTUFBQUEsSUFBSSxJQUFJLCtCQUErQixDQUFBO0FBQzNDLEtBQUE7SUFFQSxJQUFJNEcsU0FBUyxLQUFLRSxxQkFBcUIsRUFBRTtBQUNyQzlHLE1BQUFBLElBQUksSUFBSSwrQkFBK0IsQ0FBQTtBQUN2Q0EsTUFBQUEsSUFBSSxJQUFJLCtCQUErQixDQUFBO0FBQzNDLEtBQUE7QUFFQUEsSUFBQUEsSUFBSSxJQUFJVixRQUFRLENBQUE7SUFDaEJVLElBQUksSUFBSSxJQUFJLENBQUNULGNBQWMsQ0FBQTtJQUMzQlMsSUFBSSxJQUFJLElBQUksQ0FBQ1AsWUFBWSxDQUFBO0lBQ3pCTyxJQUFJLElBQUksSUFBSSxDQUFDTixZQUFZLENBQUE7QUFFekIsSUFBQSxNQUFNNEgsWUFBWSxHQUFHVCxVQUFVLEtBQUtVLFdBQVcsSUFBSVYsVUFBVSxLQUFLTSxXQUFXLElBQUlOLFVBQVUsS0FBS1csV0FBVyxJQUFJWCxVQUFVLEtBQUtLLFdBQVcsQ0FBQTtBQUN6SSxJQUFBLE1BQU1PLGFBQWEsR0FBSWIsU0FBUyxLQUFLYyxjQUFjLElBQUliLFVBQVUsS0FBS0ssV0FBVyxJQUFJLENBQUN2SyxPQUFPLENBQUM4Qix3QkFBeUIsQ0FBQTtJQUN2SCxNQUFNa0osY0FBYyxHQUFHTCxZQUFZLElBQUksQ0FBQzVLLE1BQU0sQ0FBQ2tMLG1CQUFtQixJQUFJSCxhQUFhLENBQUE7QUFDbkYsSUFBQSxJQUFJRSxjQUFjLEVBQUU7TUFDaEIzSCxJQUFJLElBQUk1QyxNQUFNLENBQUNzSixXQUFXLENBQUE7QUFDOUIsS0FBQyxNQUFNLElBQUlHLFVBQVUsS0FBS0UsV0FBVyxFQUFFO0FBQ25DL0csTUFBQUEsSUFBSSxJQUFJLG1DQUFtQyxDQUFBO0FBQzNDQSxNQUFBQSxJQUFJLElBQUksd0NBQXdDLENBQUE7QUFDaERBLE1BQUFBLElBQUksSUFBSSx5QkFBeUIsQ0FBQTtBQUNqQ0EsTUFBQUEsSUFBSSxJQUFJLG1EQUFtRCxDQUFBO0FBQzNEQSxNQUFBQSxJQUFJLElBQUksbUJBQW1CLENBQUE7QUFDM0JBLE1BQUFBLElBQUksSUFBSSxPQUFPLENBQUE7QUFDbkIsS0FBQTtJQUVBLElBQUk2RyxVQUFVLEtBQUtLLFdBQVcsRUFBRTtNQUM1QmxILElBQUksSUFBSXhDLFlBQVksQ0FBQ3FLLGdCQUFnQixDQUFBO0FBQ3pDLEtBQUE7QUFFQTdILElBQUFBLElBQUksSUFBSXlGLGVBQWUsQ0FBQ2MsS0FBSyxFQUFFLENBQUE7SUFFL0J2RyxJQUFJLElBQUksSUFBSSxDQUFDTCxZQUFZLENBQUE7QUFFekIsSUFBQSxNQUFNbUksS0FBSyxHQUFHakIsVUFBVSxLQUFLRSxXQUFXLElBQUlGLFVBQVUsS0FBS0csWUFBWSxJQUFJSCxVQUFVLEtBQUtJLFlBQVksQ0FBQTtBQUN0RyxJQUFBLE1BQU1jLG1CQUFtQixHQUFHLENBQUNyTCxNQUFNLENBQUMwSyxNQUFNLElBQUkxSyxNQUFNLENBQUMyRyxzQkFBc0IsSUFBSSxDQUFDM0csTUFBTSxDQUFDNkgsUUFBUSxDQUFBOztBQUUvRjtBQUNBO0FBQ0E7QUFDQTtJQUNBLE1BQU15RCxtQkFBbUIsR0FBR3BCLFNBQVMsS0FBS0UscUJBQXFCLElBQUssQ0FBQ2dCLEtBQUssSUFBSWxCLFNBQVMsS0FBS3FCLGNBQWUsQ0FBQTs7QUFFM0c7SUFDQSxJQUFJQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUE7QUFDNUIsSUFBQSxJQUFJRixtQkFBbUIsRUFBRTtBQUNyQmhJLE1BQUFBLElBQUksSUFBSSxxQ0FBcUMsQ0FBQTtBQUNqRCxLQUFDLE1BQU07QUFDSEEsTUFBQUEsSUFBSSxJQUFJLHVGQUF1RixDQUFBO0FBQy9Ga0ksTUFBQUEsZ0JBQWdCLEdBQUcsSUFBSSxDQUFBO0FBQzNCLEtBQUE7QUFFQSxJQUFBLElBQUlILG1CQUFtQixFQUFFO0FBQ3JCL0gsTUFBQUEsSUFBSSxJQUFJLDJGQUEyRixDQUFBO0FBQ25HQSxNQUFBQSxJQUFJLElBQUksd0dBQXdHLENBQUE7QUFDaEhrSSxNQUFBQSxnQkFBZ0IsR0FBRyxJQUFJLENBQUE7QUFDM0IsS0FBQTtBQUVBLElBQUEsSUFBSVAsY0FBYyxFQUFFO0FBQ2hCM0gsTUFBQUEsSUFBSSxJQUFJLHdDQUF3QyxDQUFBO0FBQ3BELEtBQUMsTUFBTSxJQUFJLENBQUM4SCxLQUFLLEVBQUU7QUFDZixNQUFBLE1BQU1LLFNBQVMsR0FBR3RCLFVBQVUsS0FBS0ssV0FBVyxDQUFBO0FBRTVDLE1BQUEsSUFBSWlCLFNBQVMsRUFBRTtBQUNYbkksUUFBQUEsSUFBSSxJQUFJLCtCQUErQixDQUFBO0FBQzNDLE9BQUMsTUFBTTtBQUVIO0FBQ0EsUUFBQSxJQUFJa0ksZ0JBQWdCLEVBQUU7QUFDbEJsSSxVQUFBQSxJQUFJLElBQUksNkJBQTZCLENBQUE7QUFDekMsU0FBQTtRQUNBQSxJQUFJLElBQUksaUNBQWlDLENBQUM7QUFDOUMsT0FBQTtBQUNKLEtBQUMsTUFBTSxJQUFJNkcsVUFBVSxLQUFLRSxXQUFXLEVBQUU7QUFDbkMvRyxNQUFBQSxJQUFJLElBQUksOEVBQThFLENBQUE7QUFDMUYsS0FBQyxNQUFNO01BQ0hBLElBQUksSUFBSTVDLE1BQU0sQ0FBQ2dMLFdBQVcsQ0FBQTtBQUM5QixLQUFBO0FBRUFwSSxJQUFBQSxJQUFJLElBQUl5RixlQUFlLENBQUNlLEdBQUcsRUFBRSxDQUFBO0FBRTdCLElBQUEsT0FBT3hHLElBQUksQ0FBQTtBQUNmLEdBQUE7O0FBRUE7QUFDQXFJLEVBQUFBLGlCQUFpQkEsR0FBRztBQUNoQixJQUFBLE1BQU0zTCxNQUFNLEdBQUcsSUFBSSxDQUFDQSxNQUFNLENBQUE7QUFDMUIsSUFBQSxNQUFNQyxPQUFPLEdBQUcsSUFBSSxDQUFDQSxPQUFPLENBQUE7QUFDNUIsSUFBQSxNQUFNUyxNQUFNLEdBQUcsSUFBSSxDQUFDQSxNQUFNLENBQUE7QUFFMUIsSUFBQSxNQUFNa0wsSUFBSSxHQUFHLElBQUlDLFlBQVksRUFBRSxDQUFBO0FBQy9CLElBQUEsTUFBTUMsSUFBSSxHQUFHLElBQUlELFlBQVksRUFBRSxDQUFBO0FBQy9CLElBQUEsTUFBTUUsT0FBTyxHQUFHLElBQUlGLFlBQVksRUFBRSxDQUFBO0FBQ2xDLElBQUEsTUFBTXZJLElBQUksR0FBRyxJQUFJdUksWUFBWSxFQUFFLENBQUE7QUFFL0IsSUFBQSxJQUFJNUwsT0FBTyxDQUFDK0wsb0JBQW9CLEtBQUssS0FBSyxFQUFFO0FBQ3hDSixNQUFBQSxJQUFJLENBQUNLLE1BQU0sQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFBO0FBQ3BELEtBQUE7SUFFQSxJQUFJaE0sT0FBTyxDQUFDa0MsV0FBVyxFQUFFO0FBQ3JCLE1BQUEsSUFBSSxDQUFDZ0IsT0FBTyxDQUFDK0ksSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFBO01BRWpDLElBQUksSUFBSSxDQUFDbEssV0FBVyxFQUFFO0FBQ2xCLFFBQUEsSUFBSSxDQUFDbUIsT0FBTyxDQUFDK0ksSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUE7QUFDeEMsT0FBQTtNQUVBLElBQUlqTSxPQUFPLENBQUNrTSxZQUFZLEVBQUU7QUFDdEIsUUFBQSxJQUFJLENBQUNoSixPQUFPLENBQUMrSSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUE7QUFDdEMsT0FBQTtBQUVBLE1BQUEsSUFBSWpNLE9BQU8sQ0FBQ21NLFlBQVksR0FBRyxDQUFDLEVBQUU7QUFDMUIsUUFBQSxJQUFJLENBQUNqSixPQUFPLENBQUMrSSxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQTtBQUM3QyxPQUFBOztBQUVBO01BQ0EsSUFBSWpNLE9BQU8sQ0FBQ29NLGNBQWMsRUFBRTtBQUN4QixRQUFBLElBQUksQ0FBQ2xKLE9BQU8sQ0FBQytJLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0FBQzVDLE9BQUE7TUFFQSxJQUFJak0sT0FBTyxDQUFDcU0sUUFBUSxFQUFFO0FBQ2xCLFFBQUEsSUFBSSxDQUFDbkosT0FBTyxDQUFDK0ksSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFBO0FBQ2xDLE9BQUE7TUFFQSxJQUFJak0sT0FBTyxDQUFDc00sY0FBYyxFQUFFO0FBQ3hCLFFBQUEsSUFBSSxDQUFDcEosT0FBTyxDQUFDK0ksSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUE7QUFDeEMsT0FBQTtBQUNKLEtBQUE7O0FBRUE7SUFDQSxNQUFNTSxjQUFjLEdBQUcsRUFBRSxDQUFBO0lBQ3pCLElBQUlDLGVBQWUsR0FBRyxDQUFDLENBQUE7SUFDdkIsSUFBSUMsNEJBQTRCLEdBQUcsS0FBSyxDQUFBO0lBQ3hDLElBQUlDLE1BQU0sR0FBRyxLQUFLLENBQUE7SUFDbEIsSUFBSUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtJQUVuQixJQUFJQyxhQUFhLEdBQUc1TSxPQUFPLENBQUMyQixNQUFNLENBQUNrTCxJQUFJLENBQUMsVUFBVUMsS0FBSyxFQUFFO01BQ3JELE9BQU9BLEtBQUssQ0FBQ0MsTUFBTSxJQUFJRCxLQUFLLENBQUNDLE1BQU0sS0FBS0MsbUJBQW1CLENBQUE7QUFDL0QsS0FBQyxDQUFDLENBQUE7O0FBRUY7QUFDQTtBQUNBLElBQUEsSUFBSWhOLE9BQU8sQ0FBQzhCLHdCQUF3QixJQUFJOUIsT0FBTyxDQUFDaU4sa0NBQWtDLEVBQUU7QUFDaEZMLE1BQUFBLGFBQWEsR0FBRyxJQUFJLENBQUE7QUFDeEIsS0FBQTtJQUVBLElBQUlNLGlCQUFpQixHQUFHLE9BQU8sQ0FBQTtBQUMvQixJQUFBLElBQUluTixNQUFNLENBQUNvTixrQkFBa0IsS0FBS0MsaUJBQWlCLEVBQUU7QUFDakQ7QUFDQXpCLE1BQUFBLElBQUksQ0FBQ0ssTUFBTSxDQUFDLCtCQUErQixDQUFDLENBQUE7QUFDNUNrQixNQUFBQSxpQkFBaUIsR0FBRyxNQUFNLENBQUE7QUFDOUIsS0FBQTtBQUVBLElBQUEsSUFBSU4sYUFBYSxJQUFJNU0sT0FBTyxDQUFDOEIsd0JBQXdCLEVBQUU7QUFDbkQ2SixNQUFBQSxJQUFJLENBQUNLLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0FBQ2xDTCxNQUFBQSxJQUFJLENBQUNLLE1BQU0sQ0FBRSxDQUFVa0IsUUFBQUEsRUFBQUEsaUJBQWtCLCtCQUE4QixDQUFDLENBQUE7QUFDeEV2QixNQUFBQSxJQUFJLENBQUNLLE1BQU0sQ0FBRSxDQUFVa0IsUUFBQUEsRUFBQUEsaUJBQWtCLCtCQUE4QixDQUFDLENBQUE7QUFDNUUsS0FBQTtBQUVBLElBQUEsS0FBSyxJQUFJdEcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHNUcsT0FBTyxDQUFDMkIsTUFBTSxDQUFDQyxNQUFNLEVBQUVnRixDQUFDLEVBQUUsRUFBRTtBQUM1QyxNQUFBLE1BQU1rRyxLQUFLLEdBQUc5TSxPQUFPLENBQUMyQixNQUFNLENBQUNpRixDQUFDLENBQUMsQ0FBQTtBQUMvQixNQUFBLE1BQU1xRCxTQUFTLEdBQUc2QyxLQUFLLENBQUNPLEtBQUssQ0FBQTs7QUFFN0I7QUFDQSxNQUFBLElBQUlyTixPQUFPLENBQUM4Qix3QkFBd0IsSUFBSW1JLFNBQVMsS0FBS0UscUJBQXFCLEVBQ3ZFLFNBQUE7QUFFSixNQUFBLE1BQU1tRCxVQUFVLEdBQUlWLGFBQWEsSUFBSUUsS0FBSyxDQUFDQyxNQUFNLEdBQUlELEtBQUssQ0FBQ0MsTUFBTSxHQUFHQyxtQkFBbUIsQ0FBQTtNQUV2RnJCLElBQUksQ0FBQ0ssTUFBTSxDQUFDLG9CQUFvQixHQUFHcEYsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFBO0FBRWpELE1BQUEsSUFBSWtHLEtBQUssQ0FBQ1MsV0FBVyxLQUFLaEQsV0FBVyxJQUFJdUMsS0FBSyxDQUFDVSxXQUFXLElBQUksQ0FBQ3hOLE9BQU8sQ0FBQ3lOLFFBQVEsRUFBRTtBQUM3RTlCLFFBQUFBLElBQUksQ0FBQ0ssTUFBTSxDQUFFLENBQXFCcEYsbUJBQUFBLEVBQUFBLENBQUUsb0JBQW1CLENBQUMsQ0FBQTtBQUN4RCtFLFFBQUFBLElBQUksQ0FBQ0ssTUFBTSxDQUFFLENBQW9CcEYsa0JBQUFBLEVBQUFBLENBQUUsZ0JBQWUsQ0FBQyxDQUFBO0FBQ3ZELE9BQUE7TUFFQSxJQUFJcUQsU0FBUyxLQUFLRSxxQkFBcUIsRUFBRTtRQUNyQ3dCLElBQUksQ0FBQ0ssTUFBTSxDQUFDLG9CQUFvQixHQUFHcEYsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxDQUFBO0FBQ3pELE9BQUMsTUFBTTtRQUNIK0UsSUFBSSxDQUFDSyxNQUFNLENBQUMsb0JBQW9CLEdBQUdwRixDQUFDLEdBQUcsWUFBWSxDQUFDLENBQUE7UUFDcEQrRSxJQUFJLENBQUNLLE1BQU0sQ0FBQyxxQkFBcUIsR0FBR3BGLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQTtRQUNuRCxJQUFJcUQsU0FBUyxLQUFLcUIsY0FBYyxFQUFFO1VBQzlCSyxJQUFJLENBQUNLLE1BQU0sQ0FBQyxvQkFBb0IsR0FBR3BGLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQTtVQUNyRCtFLElBQUksQ0FBQ0ssTUFBTSxDQUFDLHFCQUFxQixHQUFHcEYsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLENBQUE7VUFDM0QrRSxJQUFJLENBQUNLLE1BQU0sQ0FBQyxxQkFBcUIsR0FBR3BGLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxDQUFBO0FBQy9ELFNBQUE7QUFDSixPQUFBO01BQ0EsSUFBSTBHLFVBQVUsS0FBS04sbUJBQW1CLEVBQUU7UUFDcEMsSUFBSS9DLFNBQVMsS0FBS0UscUJBQXFCLEVBQUU7VUFDckN3QixJQUFJLENBQUNLLE1BQU0sQ0FBQyxvQkFBb0IsR0FBR3BGLENBQUMsR0FBRyxZQUFZLENBQUMsQ0FBQTtBQUN4RCxTQUFBO1FBQ0ErRSxJQUFJLENBQUNLLE1BQU0sQ0FBQyxvQkFBb0IsR0FBR3BGLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQTtRQUNyRCtFLElBQUksQ0FBQ0ssTUFBTSxDQUFDLG9CQUFvQixHQUFHcEYsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxDQUFBO0FBQzFELE9BQUE7TUFDQSxJQUFJa0csS0FBSyxDQUFDVSxXQUFXLElBQUksQ0FBQ3hOLE9BQU8sQ0FBQ3lOLFFBQVEsRUFBRTtRQUN4QzlCLElBQUksQ0FBQ0ssTUFBTSxDQUFDLG9CQUFvQixHQUFHcEYsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLENBQUE7UUFDeEQrRSxJQUFJLENBQUNLLE1BQU0sQ0FBQyxxQkFBcUIsR0FBR3BGLENBQUMsR0FBRyxtQkFBbUIsQ0FBQyxDQUFBOztBQUU1RDtRQUNBLElBQUlxRCxTQUFTLEtBQUtFLHFCQUFxQixFQUFFO1VBQ3JDd0IsSUFBSSxDQUFDSyxNQUFNLENBQUMsb0JBQW9CLEdBQUdwRixDQUFDLEdBQUcsMEJBQTBCLENBQUMsQ0FBQTtVQUNsRStFLElBQUksQ0FBQ0ssTUFBTSxDQUFDLHFCQUFxQixHQUFHcEYsQ0FBQyxHQUFHLDZCQUE2QixDQUFDLENBQUE7VUFDdEUrRSxJQUFJLENBQUNLLE1BQU0sQ0FBQyxxQkFBcUIsR0FBR3BGLENBQUMsR0FBRyxzQkFBc0IsQ0FBQyxDQUFBO0FBQ25FLFNBQUE7UUFDQStFLElBQUksQ0FBQ0ssTUFBTSxDQUFDLG9CQUFvQixHQUFHcEYsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLENBQUM7UUFDekQsSUFBSXFELFNBQVMsS0FBS0UscUJBQXFCLEVBQUU7QUFDckNzQyxVQUFBQSw0QkFBNEIsR0FBRyxJQUFJLENBQUE7QUFDdkMsU0FBQTtRQUNBLElBQUl4QyxTQUFTLEtBQUtjLGNBQWMsRUFBRTtVQUM5QlksSUFBSSxDQUFDSyxNQUFNLENBQUMsMkJBQTJCLEdBQUdwRixDQUFDLEdBQUcsYUFBYSxDQUFDLENBQUE7QUFDaEUsU0FBQyxNQUFNO0FBQ0gsVUFBQSxJQUFJa0csS0FBSyxDQUFDWSxNQUFNLElBQUkzTixNQUFNLENBQUNrTCxtQkFBbUIsRUFBRTtZQUM1Q1UsSUFBSSxDQUFDSyxNQUFNLENBQUMsK0JBQStCLEdBQUdwRixDQUFDLEdBQUcsYUFBYSxDQUFDLENBQUE7QUFDcEUsV0FBQyxNQUFNO1lBQ0grRSxJQUFJLENBQUNLLE1BQU0sQ0FBQyx5QkFBeUIsR0FBR3BGLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQTtBQUM5RCxXQUFBO0FBQ0osU0FBQTtBQUNBNEYsUUFBQUEsZUFBZSxFQUFFLENBQUE7QUFDakJELFFBQUFBLGNBQWMsQ0FBQ08sS0FBSyxDQUFDUyxXQUFXLENBQUMsR0FBRyxJQUFJLENBQUE7QUFDeEMsUUFBQSxJQUFJVCxLQUFLLENBQUNhLE1BQU0sRUFBRWpCLE1BQU0sR0FBRyxJQUFJLENBQUE7UUFDL0IsSUFBSUksS0FBSyxDQUFDUyxXQUFXLEtBQUtoRCxXQUFXLEVBQUVvQyxPQUFPLEdBQUcsSUFBSSxDQUFBO0FBQ3pELE9BQUE7TUFDQSxJQUFJRyxLQUFLLENBQUNjLE9BQU8sRUFBRTtBQUNmLFFBQUEsSUFBSWQsS0FBSyxDQUFDYyxPQUFPLENBQUNDLFFBQVEsRUFBRTtVQUN4QixJQUFJNUQsU0FBUyxLQUFLYyxjQUFjLEVBQUU7WUFDOUJZLElBQUksQ0FBQ0ssTUFBTSxDQUFDLDJCQUEyQixHQUFHcEYsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFBO1lBQ3pEK0UsSUFBSSxDQUFDSyxNQUFNLENBQUMscUJBQXFCLEdBQUdwRixDQUFDLEdBQUcsbUJBQW1CLENBQUMsQ0FBQTtZQUM1RCxJQUFJLENBQUNrRyxLQUFLLENBQUNVLFdBQVcsSUFBSXhOLE9BQU8sQ0FBQ3lOLFFBQVEsRUFBRTtjQUN4QzlCLElBQUksQ0FBQ0ssTUFBTSxDQUFDLG9CQUFvQixHQUFHcEYsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLENBQUE7QUFDNUQsYUFBQTtBQUNKLFdBQUE7QUFDSixTQUFDLE1BQU07VUFDSCxJQUFJcUQsU0FBUyxLQUFLcUIsY0FBYyxFQUFFO1lBQzlCSyxJQUFJLENBQUNLLE1BQU0sQ0FBQyx5QkFBeUIsR0FBR3BGLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQTtZQUN2RCtFLElBQUksQ0FBQ0ssTUFBTSxDQUFDLHFCQUFxQixHQUFHcEYsQ0FBQyxHQUFHLG1CQUFtQixDQUFDLENBQUE7WUFDNUQsSUFBSSxDQUFDa0csS0FBSyxDQUFDVSxXQUFXLElBQUl4TixPQUFPLENBQUN5TixRQUFRLEVBQUU7Y0FDeEM5QixJQUFJLENBQUNLLE1BQU0sQ0FBQyxvQkFBb0IsR0FBR3BGLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFBO0FBQzVELGFBQUE7WUFDQSxJQUFJa0csS0FBSyxDQUFDZ0IsZ0JBQWdCLEVBQUU7Y0FDeEJuQyxJQUFJLENBQUNLLE1BQU0sQ0FBQyxvQkFBb0IsR0FBR3BGLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFBO2NBQ3hEK0UsSUFBSSxDQUFDSyxNQUFNLENBQUMsb0JBQW9CLEdBQUdwRixDQUFDLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQTtBQUM1RCxhQUFBO0FBQ0osV0FBQTtBQUNKLFNBQUE7QUFDSixPQUFBO0FBQ0osS0FBQTs7QUFFQTtJQUNBLE1BQU1tSCxNQUFNLEdBQUcsSUFBSSxDQUFDOUwsV0FBVyxLQUFLakMsT0FBTyxDQUFDd0csVUFBVSxJQUFJeEcsT0FBTyxDQUFDc0MsbUJBQW1CLElBQUt0QyxPQUFPLENBQUNxQyxpQkFBaUIsSUFBSSxDQUFDckMsT0FBTyxDQUFDb0MsVUFBVyxDQUFDLENBQUE7QUFFNUksSUFBQSxJQUFJMkwsTUFBTSxFQUFFO01BQ1IsSUFBSS9OLE9BQU8sQ0FBQ3VHLFdBQVcsRUFBRTtBQUNyQnNGLFFBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDaE0sT0FBTyxDQUFDZ08sT0FBTyxHQUFHdk4sTUFBTSxDQUFDd04sU0FBUyxHQUFHeE4sTUFBTSxDQUFDeU4sS0FBSyxDQUFDLENBQUE7QUFDbEUsT0FBQyxNQUFNO0FBQ0gsUUFBQSxJQUFJbk8sTUFBTSxDQUFDMkcsc0JBQXNCLEtBQUsxRyxPQUFPLENBQUN3RyxVQUFVLElBQUl4RyxPQUFPLENBQUNzQyxtQkFBbUIsQ0FBQyxFQUFFO0FBQ3RGdUosVUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUMwTixlQUFlLENBQUNDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDbkwsVUFBVSxDQUFDLENBQUMsQ0FBQTtBQUN6RSxTQUFDLE1BQU07QUFDSDRJLFVBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDNE4sZ0JBQWdCLENBQUMsQ0FBQTtBQUN4QyxTQUFBO0FBQ0osT0FBQTtBQUNKLEtBQUE7O0FBRUE7QUFDQXhDLElBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDNk4sV0FBVyxDQUFDLENBQUE7QUFDL0J6QyxJQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQzhOLFFBQVEsQ0FBQyxDQUFBO0FBQzVCMUMsSUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUNsRCxlQUFlLENBQUMwRixTQUFTLENBQUN4TyxPQUFPLENBQUN5TyxLQUFLLEVBQUVoTyxNQUFNLENBQUMsQ0FBQyxDQUFBO0FBQzdEb0wsSUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUNsRCxlQUFlLENBQUM0RixXQUFXLENBQUMxTyxPQUFPLENBQUMyTyxPQUFPLEVBQUVsTyxNQUFNLENBQUMsQ0FBQyxDQUFBO0FBQ2pFb0wsSUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUNsRCxlQUFlLENBQUM4RixPQUFPLENBQUM1TyxPQUFPLENBQUM2TyxHQUFHLEVBQUVwTyxNQUFNLENBQUMsQ0FBQyxDQUFBOztBQUV6RDtBQUNBb0wsSUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUMsSUFBSSxDQUFDakosWUFBWSxDQUFDLENBQUE7SUFFOUIsSUFBSS9DLE9BQU8sQ0FBQzhPLGtCQUFrQixFQUFFO0FBQzVCbkQsTUFBQUEsSUFBSSxDQUFDSyxNQUFNLENBQUMsMEJBQTBCLENBQUMsQ0FBQTtBQUMzQyxLQUFBO0lBRUEsSUFBSSxJQUFJLENBQUMvSixXQUFXLEVBQUU7QUFDbEI0SixNQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQ3NPLGVBQWUsQ0FBQyxDQUFBO0FBQ25DbEQsTUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUNoTSxPQUFPLENBQUNnUCxpQkFBaUIsR0FBRyxDQUFDLEdBQUd2TyxNQUFNLENBQUN3TyxtQkFBbUIsR0FBR3hPLE1BQU0sQ0FBQ3lPLG9CQUFvQixDQUFDLENBQUE7QUFDckdyRCxNQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ2hNLE9BQU8sQ0FBQ21QLGVBQWUsR0FBRzFPLE1BQU0sQ0FBQzJPLGFBQWEsR0FBRzNPLE1BQU0sQ0FBQzRPLFVBQVUsQ0FBQyxDQUFBO0FBQ25GLEtBQUE7SUFFQSxJQUFLLElBQUksQ0FBQzNOLFFBQVEsSUFBSTFCLE9BQU8sQ0FBQ2tDLFdBQVcsSUFBSyxJQUFJLENBQUNILFdBQVcsRUFBRTtNQUM1RCxJQUFJL0IsT0FBTyxDQUFDc1AsWUFBWSxFQUFFO0FBQ3RCekQsUUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUM4TyxtQkFBbUIsQ0FBQyxDQUFBO0FBQzNDLE9BQUE7QUFFQSxNQUFBLElBQUl2UCxPQUFPLENBQUNtTSxZQUFZLEtBQUtxRCxlQUFlLEVBQUU7QUFDMUMzRCxRQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQ2dQLGdCQUFnQixDQUFDLENBQUE7QUFDeEMsT0FBQTtNQUVBLElBQUl6UCxPQUFPLENBQUNzTSxjQUFjLEVBQUU7QUFDeEJULFFBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDaVAsd0JBQXdCLENBQUMsQ0FBQTtBQUNoRCxPQUFBO0FBQ0osS0FBQTtJQUVBLElBQUkxUCxPQUFPLENBQUMyUCxLQUFLLEVBQUU7QUFDZjlELE1BQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDbVAsY0FBYyxDQUFDLENBQUE7TUFDbEMsUUFBUTVQLE9BQU8sQ0FBQzZQLGVBQWU7QUFDM0IsUUFBQSxLQUFLQyxVQUFVO0FBQ1hqRSxVQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ2hNLE9BQU8sQ0FBQytQLG9CQUFvQixHQUFHdFAsTUFBTSxDQUFDdVAsaUJBQWlCLEdBQUd2UCxNQUFNLENBQUN3UCxzQkFBc0IsQ0FBQyxDQUFBO0FBQ3BHLFVBQUEsTUFBQTtBQUNKLFFBQUEsS0FBS0Msc0JBQXNCO0FBQ3ZCckUsVUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUNoTSxPQUFPLENBQUMrUCxvQkFBb0IsR0FBR3RQLE1BQU0sQ0FBQzBQLFdBQVcsR0FBRzFQLE1BQU0sQ0FBQzJQLGdCQUFnQixDQUFDLENBQUE7QUFDeEYsVUFBQSxNQUFBO0FBR1IsT0FBQTtBQUNKLEtBQUE7QUFFQSxJQUFBLElBQUlwUSxPQUFPLENBQUNnQyxnQkFBZ0IsS0FBSyxZQUFZLEVBQUU7QUFDM0M2SixNQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ2hNLE9BQU8sQ0FBQ3FRLFFBQVEsR0FBRzVQLE1BQU0sQ0FBQzZQLHdCQUF3QixHQUFHN1AsTUFBTSxDQUFDOFAscUJBQXFCLENBQUMsQ0FBQTtBQUM5RjFFLE1BQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDK1AsVUFBVSxDQUFDLENBQUE7QUFDOUIzRSxNQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQ2dRLGlCQUFpQixDQUMvQnJDLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRXNDLFVBQVUsQ0FBQ0MsVUFBVSxDQUFDM1EsT0FBTyxDQUFDNFEseUJBQXlCLENBQUMsQ0FBQyxDQUN0RnhDLE9BQU8sQ0FBQyxXQUFXLEVBQUVzQyxVQUFVLENBQUNDLFVBQVUsQ0FBQzNRLE9BQU8sQ0FBQzZRLGtCQUFrQixDQUFDLENBQzNFLENBQUMsQ0FBQTtBQUNMLEtBQUMsTUFBTSxJQUFJN1EsT0FBTyxDQUFDZ0MsZ0JBQWdCLEtBQUssVUFBVSxFQUFFO0FBQ2hENkosTUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUMrUCxVQUFVLENBQUMsQ0FBQTtNQUM5QjNFLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDcVEsZUFBZSxDQUFDMUMsT0FBTyxDQUFDLFdBQVcsRUFBRXNDLFVBQVUsQ0FBQ0MsVUFBVSxDQUFDM1EsT0FBTyxDQUFDNlEsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDL0csS0FBQyxNQUFNLElBQUk3USxPQUFPLENBQUNnQyxnQkFBZ0IsS0FBSyxTQUFTLEVBQUU7QUFDL0M2SixNQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ2hNLE9BQU8sQ0FBQ3FRLFFBQVEsR0FBRzVQLE1BQU0sQ0FBQzZQLHdCQUF3QixHQUFHN1AsTUFBTSxDQUFDOFAscUJBQXFCLENBQUMsQ0FBQTtNQUM5RjFFLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDc1EsZ0JBQWdCLENBQUMzQyxPQUFPLENBQUMsV0FBVyxFQUFFc0MsVUFBVSxDQUFDQyxVQUFVLENBQUMzUSxPQUFPLENBQUM2USxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNoSCxLQUFDLE1BQU0sSUFBSTdRLE9BQU8sQ0FBQ2dDLGdCQUFnQixLQUFLLFdBQVcsRUFBRTtBQUNqRCxNQUFBLE1BQU1nUCxLQUFLLEdBQUdqUixNQUFNLENBQUNzRyxxQkFBcUIsR0FBRyxFQUFFLEdBQUc1RixNQUFNLENBQUN3USxrQkFBa0IsR0FBR3hRLE1BQU0sQ0FBQ3lRLHFCQUFxQixDQUFBO0FBQzFHckYsTUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUNnRixLQUFLLENBQUM1QyxPQUFPLENBQUMsV0FBVyxFQUFFc0MsVUFBVSxDQUFDQyxVQUFVLENBQUMzUSxPQUFPLENBQUM2USxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUM5RixLQUFBO0lBRUEsSUFBSSxJQUFJLENBQUM5TyxXQUFXLEVBQUU7TUFDbEIsSUFBSS9CLE9BQU8sQ0FBQ2tNLFlBQVksRUFBRTtBQUN0QkwsUUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUMwUSxjQUFjLENBQUMsQ0FBQTtBQUN0QyxPQUFBO01BQ0EsSUFBSW5SLE9BQU8sQ0FBQ3FNLFFBQVEsRUFBRTtBQUNsQlIsUUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUMyUSxpQkFBaUIsQ0FBQyxDQUFBO0FBQ3pDLE9BQUE7QUFDSixLQUFBO0lBRUEsSUFBSXBSLE9BQU8sQ0FBQ3FSLGFBQWEsRUFBRTtNQUN2QixJQUFJclIsT0FBTyxDQUFDd0Msb0JBQW9CLEVBQUU7QUFDOUJxSixRQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQzZRLG1CQUFtQixDQUFDLENBQUE7QUFDM0MsT0FBQyxNQUFNLElBQUksSUFBSSxDQUFDdlAsV0FBVyxFQUFFO0FBQ3pCOEosUUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUM4USxnQkFBZ0IsQ0FBQyxDQUFBO0FBQ3hDLE9BQUE7QUFDSixLQUFBO0lBRUEsSUFBSXZSLE9BQU8sQ0FBQ3FNLFFBQVEsRUFBRTtBQUNsQlIsTUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUMrUSxZQUFZLENBQUMsQ0FBQTtBQUNwQyxLQUFBOztBQUVBO0lBQ0EsSUFBSXhSLE9BQU8sQ0FBQzhCLHdCQUF3QixFQUFFO0FBRWxDO0FBQ0ErSixNQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQ2dSLHFCQUFxQixDQUFDLENBQUE7TUFDekMsSUFBSXpSLE9BQU8sQ0FBQzBSLCtCQUErQixFQUN2QzdGLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDa1IsdUJBQXVCLENBQUMsQ0FBQTs7QUFFL0M7TUFDQSxJQUFJM1IsT0FBTyxDQUFDNFIsK0JBQStCLElBQUksQ0FBQzVSLE9BQU8sQ0FBQ3lOLFFBQVEsRUFBRTtBQUM5RGxCLFFBQUFBLGNBQWMsQ0FBQy9CLFdBQVcsQ0FBQyxHQUFHLElBQUksQ0FBQTtBQUNsQytCLFFBQUFBLGNBQWMsQ0FBQzFCLFdBQVcsQ0FBQyxHQUFHLElBQUksQ0FBQTtBQUNsQzBCLFFBQUFBLGNBQWMsQ0FBQ2hDLFdBQVcsQ0FBQyxHQUFHLElBQUksQ0FBQTtBQUN0QyxPQUFBO0FBQ0osS0FBQTtBQUVBLElBQUEsSUFBSWlDLGVBQWUsR0FBRyxDQUFDLElBQUl4TSxPQUFPLENBQUM4Qix3QkFBd0IsRUFBRTtBQUN6RCxNQUFBLElBQUkySyw0QkFBNEIsRUFBRTtBQUM5QlosUUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUNvUixnQkFBZ0IsQ0FBQyxDQUFBO0FBQ3hDLE9BQUE7TUFDQSxJQUFJdEYsY0FBYyxDQUFDM0IsV0FBVyxDQUFDLElBQUkyQixjQUFjLENBQUMvQixXQUFXLENBQUMsRUFBRTtBQUM1RHFCLFFBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDcVIsZ0JBQWdCLENBQUMsQ0FBQTtBQUN4QyxPQUFBO0FBQ0EsTUFBQSxJQUFJdkYsY0FBYyxDQUFDMUIsV0FBVyxDQUFDLEtBQUs5SyxNQUFNLENBQUMwSyxNQUFNLElBQUkxSyxNQUFNLENBQUM2SCxRQUFRLENBQUMsRUFBRTtBQUNuRWlFLFFBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDc1IsbUJBQW1CLENBQUMsQ0FBQTtBQUMzQyxPQUFBO0FBQ0EsTUFBQSxJQUFJckYsTUFBTSxFQUFFO0FBQ1JiLFFBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDdVIsa0JBQWtCLENBQUMsQ0FBQTtBQUN0QyxRQUFBLElBQUl6RixjQUFjLENBQUNuQyxXQUFXLENBQUMsRUFBRTtBQUM3QnlCLFVBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDd1IsWUFBWSxDQUFDLENBQUE7QUFDcEMsU0FBQTtBQUNBLFFBQUEsSUFBSTFGLGNBQWMsQ0FBQ2xDLFlBQVksQ0FBQyxFQUFFO0FBQzlCd0IsVUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUNqTSxNQUFNLENBQUNtUyx5QkFBeUIsR0FBR3pSLE1BQU0sQ0FBQzBSLFlBQVksQ0FBQy9ELE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUczTixNQUFNLENBQUMyUixhQUFhLENBQUNoRSxPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUE7QUFDeEksU0FBQTtBQUNBLFFBQUEsSUFBSTdCLGNBQWMsQ0FBQ2pDLFlBQVksQ0FBQyxFQUFFO0FBQzlCdUIsVUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUNqTSxNQUFNLENBQUNzUyxxQkFBcUIsR0FBRzVSLE1BQU0sQ0FBQzBSLFlBQVksQ0FBQy9ELE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUczTixNQUFNLENBQUMyUixhQUFhLENBQUNoRSxPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUE7QUFDcEksU0FBQTtBQUNKLE9BQUE7QUFDQSxNQUFBLElBQUl6QixPQUFPLEVBQUU7QUFDVGQsUUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUN5SyxnQkFBZ0IsQ0FBQyxDQUFBO0FBQ3BDVyxRQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQzZSLFlBQVksQ0FBQyxDQUFBO0FBQ3BDLE9BQUE7QUFFQSxNQUFBLElBQUksRUFBRXZTLE1BQU0sQ0FBQzBLLE1BQU0sSUFBSTFLLE1BQU0sQ0FBQzJHLHNCQUFzQixJQUFJM0csTUFBTSxDQUFDNkgsUUFBUSxDQUFDLEVBQUU7QUFDdEVpRSxRQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQzhSLFdBQVcsQ0FBQyxDQUFBO0FBQ25DLE9BQUE7QUFDSixLQUFBO0lBRUEsSUFBSXZTLE9BQU8sQ0FBQ3FDLGlCQUFpQixFQUFFd0osSUFBSSxDQUFDRyxNQUFNLENBQUMsb0NBQW9DLENBQUMsQ0FBQTtJQUVoRixJQUFJLElBQUksQ0FBQ3RLLFFBQVEsRUFBRTtBQUNmbUssTUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUMrUixxQkFBcUIsQ0FBQyxDQUFBO0FBQ3pDLE1BQUEsSUFBSTVGLGFBQWEsSUFBSTVNLE9BQU8sQ0FBQ2lOLGtDQUFrQyxFQUFFO0FBQzdEcEIsUUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUNnUyxLQUFLLENBQUMsQ0FBQTtBQUM3QixPQUFBO0FBQ0osS0FBQTtJQUVBLElBQUlDLGFBQWEsR0FBRyxLQUFLLENBQUE7SUFDekIsSUFBSTFTLE9BQU8sQ0FBQ2tDLFdBQVcsRUFBRTtNQUVyQixJQUFJLElBQUksQ0FBQ1IsUUFBUSxFQUFFO1FBQ2ZtSyxJQUFJLENBQUNHLE1BQU0sQ0FBQ2hNLE9BQU8sQ0FBQzJTLFlBQVksS0FBS0MsY0FBYyxHQUFHblMsTUFBTSxDQUFDb1Msb0JBQW9CLEdBQUk3UyxPQUFPLENBQUNxQyxpQkFBaUIsR0FBRzVCLE1BQU0sQ0FBQ3FTLHVCQUF1QixHQUFHclMsTUFBTSxDQUFDc1Msb0JBQXFCLENBQUMsQ0FBQTtBQUNuTCxPQUFBO0FBRUEsTUFBQSxJQUFJLENBQUMvUyxPQUFPLENBQUNtTSxZQUFZLElBQUksQ0FBQyxJQUFJLENBQUNwSyxXQUFXLElBQUksQ0FBQy9CLE9BQU8sQ0FBQ2dULGlCQUFpQixFQUFFO0FBQzFFckgsUUFBQUEsSUFBSSxDQUFDSyxNQUFNLENBQUMsZ0NBQWdDLENBQUMsQ0FBQTtBQUM3Q0wsUUFBQUEsSUFBSSxDQUFDSyxNQUFNLENBQUMseUJBQXlCLENBQUMsQ0FBQTtBQUN0QzBHLFFBQUFBLGFBQWEsR0FBRyxJQUFJLENBQUE7QUFDeEIsT0FBQTtBQUNKLEtBQUE7QUFFQTdHLElBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDd1MsU0FBUyxDQUFDLENBQUE7O0FBRTdCO0lBQ0EsSUFBSWpULE9BQU8sQ0FBQ2tULGVBQWUsRUFBRTtBQUN6QnJILE1BQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFFaE0sT0FBTyxDQUFDa0MsV0FBVyxJQUFJbEMsT0FBTyxDQUFDNkIsa0JBQWtCLEdBQUlwQixNQUFNLENBQUMwUyxnQkFBZ0IsR0FBRzFTLE1BQU0sQ0FBQzJTLGFBQWEsQ0FBQyxDQUFBO0FBQ3JILEtBQUE7SUFFQSxNQUFNQyxVQUFVLEdBQUcsQ0FBQ3JULE9BQU8sQ0FBQ2tULGVBQWUsSUFBSWxULE9BQU8sQ0FBQ3NULHNCQUFzQixDQUFBO0FBRTdFLElBQUEsSUFBSUQsVUFBVSxFQUFFO0FBQ1osTUFBQSxJQUFJclQsT0FBTyxDQUFDdVQsYUFBYSxLQUFLLFdBQVcsRUFBRTtBQUN2QzFILFFBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDK1MsV0FBVyxDQUFDLENBQUE7QUFDbkMsT0FBQyxNQUFNLElBQUl4VCxPQUFPLENBQUN1VCxhQUFhLEtBQUssVUFBVSxFQUFFO1FBQzdDLElBQUl2VCxPQUFPLENBQUNnQyxnQkFBZ0IsS0FBSyxVQUFVLElBQUloQyxPQUFPLENBQUNnQyxnQkFBZ0IsS0FBSyxZQUFZLEVBQUU7QUFDdEY2SixVQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQytQLFVBQVUsQ0FBQyxDQUFBO0FBQ2xDLFNBQUE7UUFDQTNFLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDZ1QsWUFBWSxDQUFDckYsT0FBTyxDQUFDLFdBQVcsRUFBRXNDLFVBQVUsQ0FBQ0MsVUFBVSxDQUFDM1EsT0FBTyxDQUFDMFQsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ3pHLE9BQUMsTUFBTTtBQUNIN0gsUUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUNrVCxpQkFBaUIsQ0FBQyxDQUFBO0FBQ3pDLE9BQUE7QUFDSixLQUFBO0FBRUEsSUFBQSxJQUFJM1QsT0FBTyxDQUFDNFQsY0FBYyxJQUFJLENBQUNsQixhQUFhLEVBQUU7QUFDMUMvRyxNQUFBQSxJQUFJLENBQUNLLE1BQU0sQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFBO0FBQ2pELEtBQUE7SUFFQSxJQUFJaE0sT0FBTyxDQUFDZ0gsT0FBTyxFQUFFO0FBQ2pCLE1BQUEsSUFBSSxDQUFDaEgsT0FBTyxDQUFDaUgsaUJBQWlCLEVBQUU7QUFDNUIwRSxRQUFBQSxJQUFJLENBQUNLLE1BQU0sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFBO0FBQ2xELE9BQUE7QUFDQUgsTUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUN2TCxNQUFNLENBQUNvVCxNQUFNLENBQUMsQ0FBQTtBQUM5QixLQUFBO0lBRUEsSUFBSSxJQUFJLENBQUM1UixXQUFXLEVBQUU7QUFDbEI0SixNQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQ3FULFNBQVMsQ0FBQyxDQUFBO01BQzdCLElBQUk5VCxPQUFPLENBQUNrQyxXQUFXLEVBQUU7QUFDckIySixRQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBRWhNLE9BQU8sQ0FBQ3FDLGlCQUFpQixHQUFJNUIsTUFBTSxDQUFDc1QsY0FBYyxHQUFHdFQsTUFBTSxDQUFDdVQsU0FBUyxDQUFDLENBQUE7QUFDdkYsT0FBQTtBQUNKLEtBQUE7SUFFQSxJQUFJQyxjQUFjLEdBQUcsS0FBSyxDQUFBO0lBQzFCLElBQUlDLGlCQUFpQixHQUFHLEtBQUssQ0FBQTtJQUM3QixJQUFJQyxxQkFBcUIsR0FBRyxLQUFLLENBQUE7SUFDakMsSUFBSUMsUUFBUSxHQUFHLEtBQUssQ0FBQTtJQUNwQixJQUFJQyxVQUFVLEdBQUcsS0FBSyxDQUFBO0FBQ3RCLElBQUEsSUFBSUMsYUFBYSxDQUFBOztBQUVqQjtBQUNBLElBQUEsSUFBSXRVLE9BQU8sQ0FBQzhCLHdCQUF3QixJQUFJLElBQUksQ0FBQ0osUUFBUSxFQUFFO0FBRW5EMFMsTUFBQUEsUUFBUSxHQUFHLElBQUksQ0FBQTtBQUNmSCxNQUFBQSxjQUFjLEdBQUcsSUFBSSxDQUFBO0FBQ3JCQyxNQUFBQSxpQkFBaUIsR0FBRyxJQUFJLENBQUE7QUFDeEJHLE1BQUFBLFVBQVUsR0FBRyxJQUFJLENBQUE7QUFFakJ4SSxNQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQzhULGdCQUFnQixDQUFDLENBQUE7TUFFcEMsSUFBSXZVLE9BQU8sQ0FBQ3dVLGdCQUFnQixFQUN4QjdJLElBQUksQ0FBQ0ssTUFBTSxDQUFDLHFDQUFxQyxDQUFDLENBQUE7TUFFdEQsSUFBSWhNLE9BQU8sQ0FBQzBSLCtCQUErQixFQUN2Qy9GLElBQUksQ0FBQ0ssTUFBTSxDQUFDLHlCQUF5QixDQUFDLENBQUE7TUFDMUMsSUFBSWhNLE9BQU8sQ0FBQzRSLCtCQUErQixJQUFJLENBQUM1UixPQUFPLENBQUN5TixRQUFRLEVBQUU7QUFDOUQ5QixRQUFBQSxJQUFJLENBQUNLLE1BQU0sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFBO1FBQ3RDTCxJQUFJLENBQUNLLE1BQU0sQ0FBQyw4QkFBOEIsR0FBR3lJLGtCQUFrQixDQUFDelUsT0FBTyxDQUFDMFUsMkJBQTJCLENBQUMsQ0FBQyxDQUFBO0FBQ3pHLE9BQUE7TUFFQSxJQUFJMVUsT0FBTyxDQUFDaU4sa0NBQWtDLEVBQzFDdEIsSUFBSSxDQUFDSyxNQUFNLENBQUMsNEJBQTRCLENBQUMsQ0FBQTtBQUU3Q0wsTUFBQUEsSUFBSSxDQUFDSyxNQUFNLENBQUMySSxZQUFZLENBQUNsTCxhQUFhLENBQUMsQ0FBQTtNQUV2QyxJQUFJekosT0FBTyxDQUFDNFIsK0JBQStCLElBQUksQ0FBQzVSLE9BQU8sQ0FBQ3lOLFFBQVEsRUFBRTtBQUM5RDVCLFFBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDdkwsTUFBTSxDQUFDbVUsdUJBQXVCLENBQUMsQ0FBQTtBQUMvQyxPQUFBO0FBRUEvSSxNQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQ29VLGdCQUFnQixDQUFDLENBQUE7QUFDeEMsS0FBQTtJQUVBLElBQUk3VSxPQUFPLENBQUM4VSxnQkFBZ0IsRUFBRTtBQUMxQm5KLE1BQUFBLElBQUksQ0FBQ0ssTUFBTSxDQUFDLCtDQUErQyxDQUFDLENBQUE7QUFDaEUsS0FBQTs7QUFFQTs7QUFFQTNJLElBQUFBLElBQUksQ0FBQzJJLE1BQU0sQ0FBQyxJQUFJLENBQUN4SCxlQUFlLENBQUNuQixJQUFJLEVBQUV0RCxNQUFNLEVBQUVVLE1BQU0sRUFBRVQsT0FBTyxDQUFDLENBQUMsQ0FBQTtJQUVoRSxJQUFJLElBQUksQ0FBQ2lDLFdBQVcsRUFBRTtNQUNsQixJQUFJakMsT0FBTyxDQUFDOFUsZ0JBQWdCLEVBQUU7QUFDMUJ6UixRQUFBQSxJQUFJLENBQUMySSxNQUFNLENBQUMsMElBQTBJLENBQUMsQ0FBQTtBQUMzSixPQUFDLE1BQU07QUFDSDNJLFFBQUFBLElBQUksQ0FBQzJJLE1BQU0sQ0FBQywyQ0FBMkMsQ0FBQyxDQUFBO0FBQzVELE9BQUE7QUFFQSxNQUFBLElBQUksQ0FBQ2hNLE9BQU8sQ0FBQ29DLFVBQVUsSUFBSXBDLE9BQU8sQ0FBQ3dHLFVBQVUsS0FBS3hHLE9BQU8sQ0FBQ3VHLFdBQVcsRUFBRTtRQUNuRSxJQUFJdkcsT0FBTyxDQUFDOFUsZ0JBQWdCLEVBQUU7QUFDMUJ6UixVQUFBQSxJQUFJLENBQUMySSxNQUFNLENBQUMsNEhBQTRILENBQUMsQ0FBQTtBQUN6STNJLFVBQUFBLElBQUksQ0FBQzJJLE1BQU0sQ0FBQywrSEFBK0gsQ0FBQyxDQUFBO0FBQ2hKLFNBQUMsTUFBTTtBQUNIM0ksVUFBQUEsSUFBSSxDQUFDMkksTUFBTSxDQUFDLDRCQUE0QixDQUFDLENBQUE7QUFDekMzSSxVQUFBQSxJQUFJLENBQUMySSxNQUFNLENBQUMsOEJBQThCLENBQUMsQ0FBQTtBQUMvQyxTQUFBO0FBQ0osT0FBQTtBQUVBM0ksTUFBQUEsSUFBSSxDQUFDMkksTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUE7QUFDaEMsTUFBQSxJQUFJK0IsTUFBTSxFQUFFO0FBQ1IxSyxRQUFBQSxJQUFJLENBQUMySSxNQUFNLENBQUMsb0RBQW9ELENBQUMsQ0FBQTtBQUNyRSxPQUFBO0FBQ0osS0FBQTs7QUFFQTtBQUNBM0ksSUFBQUEsSUFBSSxDQUFDMkksTUFBTSxDQUFDLElBQUksQ0FBQ2hKLFlBQVksQ0FBQyxDQUFBOztBQUU5QjtJQUNBLElBQUksSUFBSSxDQUFDZixXQUFXLEVBQUU7TUFDbEIsSUFBSWpDLE9BQU8sQ0FBQ2tDLFdBQVcsRUFBRTtBQUNyQjRKLFFBQUFBLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDLHNFQUFzRSxDQUFDLENBQUE7QUFDMUYsT0FBQTtNQUVBLElBQUloTSxPQUFPLENBQUNrTSxZQUFZLEVBQUU7QUFDdEJKLFFBQUFBLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDLGlGQUFpRixDQUFDLENBQUE7QUFDckcsT0FBQTtBQUNKLEtBQUE7SUFFQSxJQUFLLElBQUksQ0FBQ3RLLFFBQVEsSUFBSTFCLE9BQU8sQ0FBQ2tDLFdBQVcsSUFBSyxJQUFJLENBQUNILFdBQVcsRUFBRTtNQUM1RCxJQUFJL0IsT0FBTyxDQUFDc1AsWUFBWSxFQUFFO0FBQ3RCeEQsUUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsMkVBQTJFLENBQUMsQ0FBQTtBQUMzRkYsUUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsNEdBQTRHLENBQUMsQ0FBQTtBQUM1SEYsUUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsNEVBQTRFLENBQUMsQ0FBQTtBQUNoRyxPQUFBO01BRUEsSUFBSWhNLE9BQU8sQ0FBQ3NNLGNBQWMsRUFBRTtBQUN4QlIsUUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsa0pBQWtKLENBQUMsQ0FBQTtBQUN0SyxPQUFBO0FBQ0osS0FBQTtBQUVBLElBQUEsSUFBSXFILFVBQVUsRUFBRTtBQUNadkgsTUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsc0NBQXNDLENBQUMsQ0FBQTtBQUN0RCxNQUFBLElBQUloTSxPQUFPLENBQUNvTSxjQUFjLElBQUlwTSxPQUFPLENBQUNrQyxXQUFXLEVBQUU7QUFDL0M0SixRQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBRSxDQUFBLCtEQUFBLENBQWdFLENBQUMsQ0FBQTtBQUNyRixPQUFBOztBQUVBO01BQ0EsSUFBSWhNLE9BQU8sQ0FBQytVLGVBQWUsRUFBRTtRQUN6QmpKLE9BQU8sQ0FBQ0UsTUFBTSxDQUFFLENBQUE7QUFDaEM7QUFDQTtBQUNBLGdCQUFBLENBQWlCLENBQUMsQ0FBQTtBQUNOLE9BQUE7QUFDSixLQUFBO0FBRUEsSUFBQSxJQUFJaE0sT0FBTyxDQUFDNFQsY0FBYyxJQUFJLENBQUNsQixhQUFhLEVBQUU7QUFDMUM1RyxNQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFBO0FBQzVELEtBQUE7SUFFQSxJQUFJaE0sT0FBTyxDQUFDMlAsS0FBSyxJQUFJLENBQUMzUCxPQUFPLENBQUNnVixhQUFhLEVBQUU7QUFDekNsSixNQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFBO0FBQ3JELEtBQUE7SUFFQSxJQUFJaE0sT0FBTyxDQUFDa1QsZUFBZSxFQUFFO01BQ3pCcEgsT0FBTyxDQUFDRSxNQUFNLENBQUUsQ0FBQTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFBLENBQW1CLENBQUMsQ0FBQTtBQUNaLEtBQUE7QUFFQSxJQUFBLElBQUksSUFBSSxDQUFDdEssUUFBUSxJQUFJLElBQUksQ0FBQ0ssV0FBVyxFQUFFO01BQ25DLElBQUksSUFBSSxDQUFDQSxXQUFXLEVBQUU7UUFDbEIsSUFBSS9CLE9BQU8sQ0FBQ2tNLFlBQVksRUFBRTtBQUN0QkosVUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsMkRBQTJELENBQUMsQ0FBQTtBQUMzRSxVQUFBLElBQUloTSxPQUFPLENBQUNtTSxZQUFZLEdBQUcsQ0FBQyxFQUFFO0FBQzFCTCxZQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyw4RUFBOEUsQ0FBQyxDQUFBO0FBQzlGRixZQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFBO0FBQ3hELFdBQUMsTUFBTTtBQUNIRixZQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFBO0FBQzFDLFdBQUE7QUFDSixTQUFBO1FBQ0EsSUFBSWhNLE9BQU8sQ0FBQ2lWLG9CQUFvQixFQUFFO0FBQzlCbkosVUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsb0RBQW9ELENBQUMsQ0FBQTtBQUN4RSxTQUFBO1FBRUEsSUFBSWhNLE9BQU8sQ0FBQ3FNLFFBQVEsRUFBRTtBQUNsQlAsVUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsOEVBQThFLENBQUMsQ0FBQTtBQUNsRyxTQUFBOztBQUVBO0FBQ0FGLFFBQUFBLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDLDhDQUE4QyxDQUFDLENBQUE7QUFFOUQsUUFBQSxJQUFJaE0sT0FBTyxDQUFDbU0sWUFBWSxHQUFHLENBQUMsRUFBRTtVQUMxQkwsT0FBTyxDQUFDRSxNQUFNLENBQUUsQ0FBQTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQUEsQ0FBK0IsQ0FBQyxDQUFBO0FBQ2hCLFNBQUMsTUFBTTtBQUNIRixVQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyw2Q0FBNkMsQ0FBQyxDQUFBO0FBQ2pFLFNBQUE7UUFDQSxJQUFJaE0sT0FBTyxDQUFDaVYsb0JBQW9CLEVBQUU7QUFDOUJuSixVQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyxtREFBbUQsQ0FBQyxDQUFBO0FBQ3ZFLFNBQUE7QUFDSixPQUFBO0FBRUEsTUFBQSxJQUFJWSxhQUFhLEVBQUU7QUFDZjtBQUNBZCxRQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFBO0FBQzVEOztBQUVBO1FBQ0EsSUFBSWhNLE9BQU8sQ0FBQ2tDLFdBQVcsRUFBRTtBQUNyQjRKLFVBQUFBLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDLG9MQUFvTCxDQUFDLENBQUE7QUFDeE0sU0FBQTtBQUNKLE9BQUE7QUFFQSxNQUFBLEtBQUssSUFBSXBGLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRzVHLE9BQU8sQ0FBQzJCLE1BQU0sQ0FBQ0MsTUFBTSxFQUFFZ0YsQ0FBQyxFQUFFLEVBQUU7QUFDNUMsUUFBQSxNQUFNa0csS0FBSyxHQUFHOU0sT0FBTyxDQUFDMkIsTUFBTSxDQUFDaUYsQ0FBQyxDQUFDLENBQUE7QUFDL0IsUUFBQSxNQUFNcUQsU0FBUyxHQUFHNkMsS0FBSyxDQUFDTyxLQUFLLENBQUE7O0FBRTdCO0FBQ0EsUUFBQSxJQUFJck4sT0FBTyxDQUFDOEIsd0JBQXdCLElBQUltSSxTQUFTLEtBQUtFLHFCQUFxQixFQUFFO0FBQ3pFLFVBQUEsU0FBQTtBQUNKLFNBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQW1LLFFBQUFBLGFBQWEsR0FBRyxLQUFLLENBQUE7QUFFckIsUUFBQSxNQUFNaEgsVUFBVSxHQUFJVixhQUFhLElBQUlFLEtBQUssQ0FBQ0MsTUFBTSxHQUFJRCxLQUFLLENBQUNqSSxLQUFLLEdBQUdtSSxtQkFBbUIsQ0FBQTtBQUN0RixRQUFBLE1BQU1rSSxXQUFXLEdBQUl0SSxhQUFhLElBQUlFLEtBQUssQ0FBQ0MsTUFBTSxHQUFJLElBQUksQ0FBQ25JLDBCQUEwQixDQUFDMEksVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFBO1FBRXRHLElBQUlBLFVBQVUsS0FBS04sbUJBQW1CLEVBQUU7VUFDcENsQixPQUFPLENBQUNFLE1BQU0sQ0FBQyxVQUFVLEdBQUdrSixXQUFXLEdBQUcsbUJBQW1CLEdBQUd0TyxDQUFDLEdBQUcsa0JBQWtCLEdBQUdBLENBQUMsR0FBRyxtQkFBbUIsR0FBR0EsQ0FBQyxHQUFHLGVBQWUsQ0FBQyxDQUFBO0FBQzNJLFNBQUE7UUFFQSxJQUFJcUQsU0FBUyxLQUFLRSxxQkFBcUIsRUFBRTtBQUNyQztVQUNBMkIsT0FBTyxDQUFDRSxNQUFNLENBQUMsNEJBQTRCLEdBQUdwRixDQUFDLEdBQUcsYUFBYSxDQUFDLENBQUE7QUFDaEVrRixVQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFBO0FBQ3ZDLFNBQUMsTUFBTTtVQUVILElBQUljLEtBQUssQ0FBQ2MsT0FBTyxFQUFFO1lBQ2YsSUFBSTNELFNBQVMsS0FBS3FCLGNBQWMsSUFBSSxDQUFDd0IsS0FBSyxDQUFDYyxPQUFPLENBQUNDLFFBQVEsRUFBRTtBQUN6RHdHLGNBQUFBLFVBQVUsR0FBRyxJQUFJLENBQUE7QUFDakJDLGNBQUFBLGFBQWEsR0FBRyxJQUFJLENBQUE7YUFDdkIsTUFBTSxJQUFJckssU0FBUyxLQUFLYyxjQUFjLElBQUkrQixLQUFLLENBQUNjLE9BQU8sQ0FBQ0MsUUFBUSxFQUFFO0FBQy9Ed0csY0FBQUEsVUFBVSxHQUFHLElBQUksQ0FBQTtBQUNqQkMsY0FBQUEsYUFBYSxHQUFHLElBQUksQ0FBQTtBQUN4QixhQUFBO0FBQ0osV0FBQTtVQUVBeEksT0FBTyxDQUFDRSxNQUFNLENBQUMsNEJBQTRCLEdBQUdwRixDQUFDLEdBQUcsYUFBYSxDQUFDLENBQUE7QUFDaEVxTixVQUFBQSxjQUFjLEdBQUcsSUFBSSxDQUFBO0FBRXJCLFVBQUEsSUFBSUssYUFBYSxFQUFFO1lBQ2YsSUFBSXJLLFNBQVMsS0FBS3FCLGNBQWMsRUFBRTtBQUM5QlEsY0FBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsMkJBQTJCLElBQUljLEtBQUssQ0FBQ3FJLGNBQWMsR0FBRyxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUlySSxLQUFLLENBQUNnQixnQkFBZ0IsR0FBRyxPQUFPLEdBQUcsRUFBRSxDQUFDLEdBQUcsUUFBUSxHQUFHbEgsQ0FBQyxHQUFHLGdCQUFnQixHQUFHQSxDQUFDLEdBQUcsc0JBQXNCLEdBQUdBLENBQUMsR0FBRyxrQkFBa0IsSUFBSWtHLEtBQUssQ0FBQ2dCLGdCQUFnQixHQUFHLFNBQVMsR0FBR2xILENBQUMsR0FBRyxzQkFBc0IsR0FBR0EsQ0FBQyxHQUFHLGVBQWUsR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLEdBQUdrRyxLQUFLLENBQUNzSSxjQUFjLEdBQUcsR0FBRyxDQUFDLENBQUE7QUFDM1YsYUFBQyxNQUFNO2NBQ0h0SixPQUFPLENBQUNFLE1BQU0sQ0FBQyxtQ0FBbUMsR0FBR3BGLENBQUMsR0FBRyxnQkFBZ0IsR0FBR0EsQ0FBQyxHQUFHLHNCQUFzQixHQUFHQSxDQUFDLEdBQUcsb0JBQW9CLEdBQUdrRyxLQUFLLENBQUNzSSxjQUFjLEdBQUcsR0FBRyxDQUFDLENBQUE7QUFDbkssYUFBQTtBQUNKLFdBQUE7VUFFQSxJQUFJOUgsVUFBVSxLQUFLTixtQkFBbUIsRUFBRTtBQUNwQyxZQUFBLElBQUlGLEtBQUssQ0FBQ3VJLFlBQVksS0FBS0MsbUJBQW1CLEVBQUU7Y0FDNUN4SixPQUFPLENBQUNFLE1BQU0sQ0FBQyxxQ0FBcUMsR0FBR3BGLENBQUMsR0FBRyx1QkFBdUIsQ0FBQyxDQUFBO0FBQ25Gc04sY0FBQUEsaUJBQWlCLEdBQUcsSUFBSSxDQUFBO0FBQzVCLGFBQUMsTUFBTTtjQUNIcEksT0FBTyxDQUFDRSxNQUFNLENBQUMseUNBQXlDLEdBQUdwRixDQUFDLEdBQUcsdUJBQXVCLENBQUMsQ0FBQTtBQUN2RnVOLGNBQUFBLHFCQUFxQixHQUFHLElBQUksQ0FBQTtBQUNoQyxhQUFBO0FBQ0osV0FBQyxNQUFNO0FBQ0g7WUFDQXJJLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDLHFDQUFxQyxHQUFHcEYsQ0FBQyxHQUFHLHVCQUF1QixDQUFDLENBQUE7QUFDbkZ1TixZQUFBQSxxQkFBcUIsR0FBRyxJQUFJLENBQUE7QUFDaEMsV0FBQTtBQUVBckksVUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsNkJBQTZCLENBQUMsQ0FBQzs7VUFFOUMsSUFBSS9CLFNBQVMsS0FBS3FCLGNBQWMsRUFBRTtZQUM5QixJQUFJLEVBQUVnSixhQUFhLElBQUksQ0FBQ3hILEtBQUssQ0FBQ3FJLGNBQWMsQ0FBQyxFQUFFO0FBQzNDckosY0FBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsbUNBQW1DLEdBQUdwRixDQUFDLEdBQUcsbUJBQW1CLEdBQUdBLENBQUMsR0FBRyx3QkFBd0IsR0FBR0EsQ0FBQyxHQUFHLG1DQUFtQyxDQUFDLENBQUE7QUFDdEp3TixjQUFBQSxRQUFRLEdBQUcsSUFBSSxDQUFBO0FBQ25CLGFBQUE7QUFDSixXQUFBO0FBQ0osU0FBQTs7QUFFQTtRQUNBLElBQUk5RyxVQUFVLEtBQUtOLG1CQUFtQixFQUFFO1VBQ3BDLElBQUkvQyxTQUFTLEtBQUtFLHFCQUFxQixFQUFFO0FBQ3JDO0FBQ0EyQixZQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyw0RkFBNEYsQ0FBQyxDQUFBO0FBQ2hILFdBQUMsTUFBTTtBQUNIO1lBQ0FGLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDLG1CQUFtQixHQUFHa0osV0FBVyxHQUFHLGtGQUFrRixDQUFDLENBQUE7QUFDMUksV0FBQTtBQUNKLFNBQUMsTUFBTTtBQUNIcEosVUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsNEZBQTRGLENBQUMsQ0FBQTtBQUNoSCxTQUFBO1FBRUEsSUFBSWMsS0FBSyxDQUFDVSxXQUFXLElBQUksQ0FBQ3hOLE9BQU8sQ0FBQ3lOLFFBQVEsRUFBRTtBQUN4QyxVQUFBLE1BQU04SCxXQUFXLEdBQUd6SSxLQUFLLENBQUNTLFdBQVcsS0FBS2hELFdBQVcsQ0FBQTtBQUNyRCxVQUFBLE1BQU1pTCxVQUFVLEdBQUcxSSxLQUFLLENBQUNTLFdBQVcsS0FBS25ELFdBQVcsSUFBSTBDLEtBQUssQ0FBQ1MsV0FBVyxLQUFLbEQsWUFBWSxJQUFJeUMsS0FBSyxDQUFDUyxXQUFXLEtBQUtqRCxZQUFZLENBQUE7QUFDaEksVUFBQSxNQUFNbUwsVUFBVSxHQUFHM0ksS0FBSyxDQUFDUyxXQUFXLEtBQUszQyxXQUFXLElBQUlrQyxLQUFLLENBQUNTLFdBQVcsS0FBSy9DLFdBQVcsSUFBSXNDLEtBQUssQ0FBQ1MsV0FBVyxLQUFLMUMsV0FBVyxDQUFBO1VBQzlILElBQUk2SyxjQUFjLEdBQUcsSUFBSSxDQUFBO0FBQ3pCLFVBQUEsSUFBSUMsT0FBTyxDQUFBO1VBQ1gsUUFBUTdJLEtBQUssQ0FBQ1MsV0FBVztBQUNyQixZQUFBLEtBQUtuRCxXQUFXO0FBQ1pzTCxjQUFBQSxjQUFjLEdBQUcsTUFBTSxDQUFBO0FBQ3ZCQyxjQUFBQSxPQUFPLEdBQUcsS0FBSyxDQUFBO0FBQ2YsY0FBQSxNQUFBO0FBQ0osWUFBQSxLQUFLdEwsWUFBWTtBQUNicUwsY0FBQUEsY0FBYyxHQUFHLE9BQU8sQ0FBQTtBQUN4QkMsY0FBQUEsT0FBTyxHQUFHLE1BQU0sQ0FBQTtBQUNoQixjQUFBLE1BQUE7QUFDSixZQUFBLEtBQUtyTCxZQUFZO0FBQ2JvTCxjQUFBQSxjQUFjLEdBQUcsT0FBTyxDQUFBO2NBQ3hCLElBQUkzVixNQUFNLENBQUMySyx5QkFBeUIsRUFBRTtBQUNsQ2lMLGdCQUFBQSxPQUFPLEdBQUcsTUFBTSxDQUFBO0FBQ3BCLGVBQUMsTUFBTTtBQUNIQSxnQkFBQUEsT0FBTyxHQUFHLE1BQU0sQ0FBQTtBQUNwQixlQUFBO0FBQ0EsY0FBQSxNQUFBO0FBQ0osWUFBQSxLQUFLL0ssV0FBVztBQUNaOEssY0FBQUEsY0FBYyxHQUFHLFFBQVEsQ0FBQTtBQUN6QixjQUFBLE1BQUE7QUFDSixZQUFBLEtBQUs3SyxXQUFXO0FBQ1o2SyxjQUFBQSxjQUFjLEdBQUcsUUFBUSxDQUFBO0FBQ3pCLGNBQUEsTUFBQTtBQUNKLFlBQUEsS0FBS25MLFdBQVc7QUFDWm1MLGNBQUFBLGNBQWMsR0FBRyxNQUFNLENBQUE7QUFDdkIsY0FBQSxNQUFBO0FBQ0osWUFBQSxLQUFLbEwsV0FBVyxDQUFBO0FBQ2hCLFlBQUE7QUFDSWtMLGNBQUFBLGNBQWMsR0FBRyxRQUFRLENBQUE7QUFDekIsY0FBQSxNQUFBO0FBQ1IsV0FBQTtVQUVBLElBQUlBLGNBQWMsS0FBSyxJQUFJLEVBQUU7WUFDekIsSUFBSTVJLEtBQUssQ0FBQzhJLGlCQUFpQixJQUFJLENBQUM5SSxLQUFLLENBQUNhLE1BQU0sRUFBRTtBQUMxQzlCLGNBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDLHFDQUFxQyxDQUFDLENBQUE7QUFDdEQsYUFBQTtZQUNBLElBQUkvQixTQUFTLEtBQUtFLHFCQUFxQixFQUFFO0FBQ3JDMEIsY0FBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUMsNkJBQTZCLENBQUMsQ0FBQTtBQUM5QyxhQUFBO0FBQ0EsWUFBQSxJQUFJLENBQUN5SixVQUFVLElBQUlGLFdBQVcsS0FDMUJ4VixNQUFNLENBQUMwSyxNQUFNLElBQUkxSyxNQUFNLENBQUMyRyxzQkFBc0IsSUFBSTNHLE1BQU0sQ0FBQzZILFFBQVEsRUFBRTtBQUNuRWlFLGNBQUFBLElBQUksQ0FBQ0csTUFBTSxDQUFDLHNDQUFzQyxDQUFDLENBQUE7QUFDdkQsYUFBQTtZQUNBLElBQUkvQixTQUFTLEtBQUtjLGNBQWMsRUFBRTtBQUM5QmMsY0FBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUMsNkJBQTZCLENBQUMsQ0FBQTtBQUM5QyxhQUFBOztBQUVBO0FBQ0EsWUFBQSxNQUFNNkosU0FBUyxHQUFHcFYsTUFBTSxDQUFDcVYsbUJBQW1CLENBQUE7WUFDNUNqSyxJQUFJLENBQUNHLE1BQU0sQ0FBQzZKLFNBQVMsQ0FBQ3pILE9BQU8sQ0FBQyxRQUFRLEVBQUV4SCxDQUFDLENBQUMsQ0FBQyxDQUFBOztBQUUzQztBQUNBaUYsWUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUMsb0NBQW9DLENBQUMsQ0FBQTtBQUNqREgsWUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUMsNEJBQTRCLENBQUMsQ0FBQTtBQUN6Q0gsWUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUMscUNBQXFDLENBQUMsQ0FBQTtBQUNsREgsWUFBQUEsSUFBSSxDQUFDRyxNQUFNLENBQUMsNEJBQTRCLENBQUMsQ0FBQTtBQUV6QyxZQUFBLElBQUkrSixZQUFZLEdBQUksQ0FBT25QLEtBQUFBLEVBQUFBLENBQUUsQ0FBYyxhQUFBLENBQUEsQ0FBQTtZQUMzQyxJQUFJcUQsU0FBUyxLQUFLRSxxQkFBcUIsSUFBSTJDLEtBQUssQ0FBQ2tKLFdBQVcsR0FBRyxDQUFDLEVBQUU7QUFDOUQ7Y0FDQWxLLE9BQU8sQ0FBQ0UsTUFBTSxDQUFFLENBQWtDcEYsZ0NBQUFBLEVBQUFBLENBQUUsOEJBQTZCQSxDQUFFLENBQUEsOEJBQUEsRUFBZ0NBLENBQUUsQ0FBQSxxQkFBQSxDQUFzQixDQUFDLENBQUE7QUFDNUltUCxjQUFBQSxZQUFZLEdBQUksQ0FBaUIsZ0JBQUEsQ0FBQSxDQUFBO0FBQ3JDLGFBQUE7WUFFQWpLLE9BQU8sQ0FBQ0UsTUFBTSxDQUFFLENBQXlDcEYsdUNBQUFBLEVBQUFBLENBQUUsSUFBR21QLFlBQWEsQ0FBQSxPQUFBLEVBQVNuUCxDQUFFLENBQUEsbUZBQUEsQ0FBb0YsQ0FBQyxDQUFBOztBQUUzSztZQUNBLElBQUlxRCxTQUFTLEtBQUtFLHFCQUFxQixFQUFFO0FBQ3JDMkIsY0FBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUUsQ0FBc0JwRixvQkFBQUEsRUFBQUEsQ0FBRSwyQkFBMEIsQ0FBQyxDQUFBO0FBQ3ZFLGFBQUE7QUFFQSxZQUFBLElBQUlxUCxlQUFlLEdBQUksQ0FBQSxvQkFBQSxFQUFzQnJQLENBQUUsQ0FBQSxnQ0FBQSxFQUFrQ0EsQ0FBRSxDQUFjLGFBQUEsQ0FBQSxDQUFBO0FBRWpHLFlBQUEsSUFBSTRPLFVBQVUsRUFBRTtBQUNaO0FBQ0FTLGNBQUFBLGVBQWUsR0FBSSxDQUFBLEVBQUVBLGVBQWdCLENBQUEsRUFBQSxFQUFJTixPQUFRLENBQWEsWUFBQSxDQUFBLENBQUE7YUFDakUsTUFBTSxJQUFJSixXQUFXLEVBQUU7QUFDcEIsY0FBQSxJQUFJVyxlQUFlLEdBQUksQ0FBWXRQLFVBQUFBLEVBQUFBLENBQUUsQ0FBbUIsa0JBQUEsQ0FBQSxDQUFBO2NBQ3hELElBQUkwRyxVQUFVLEtBQUtOLG1CQUFtQixFQUFFO0FBQ3BDa0osZ0JBQUFBLGVBQWUsR0FBSSxDQUFtQnRQLGlCQUFBQSxFQUFBQSxDQUFFLDRCQUEyQkEsQ0FBRSxDQUFBLHFCQUFBLEVBQXVCQSxDQUFFLENBQWtCLGlCQUFBLENBQUEsQ0FBQTtBQUNwSCxlQUFBO0FBQ0FxUCxjQUFBQSxlQUFlLEdBQUksQ0FBRUEsRUFBQUEsZUFBZ0IsVUFBU3JQLENBQUUsQ0FBQSxlQUFBLEVBQWlCc1AsZUFBZ0IsQ0FBYSxZQUFBLENBQUEsQ0FBQTtBQUNsRyxhQUFBO1lBRUEsSUFBSWpNLFNBQVMsS0FBS2MsY0FBYyxFQUFFO2NBQzlCMkssY0FBYyxHQUFJLENBQU9BLEtBQUFBLEVBQUFBLGNBQWUsQ0FBQyxDQUFBLENBQUE7Y0FDekMsSUFBSSxDQUFDSCxXQUFXLEVBQUU7Z0JBQ2RVLGVBQWUsR0FBSSxDQUFFQSxFQUFBQSxlQUFnQixDQUFhLFlBQUEsQ0FBQSxDQUFBO0FBQ3RELGVBQUE7QUFDSixhQUFDLE1BQU0sSUFBSWhNLFNBQVMsS0FBS3FCLGNBQWMsRUFBRTtjQUNyQ29LLGNBQWMsR0FBSSxDQUFNQSxJQUFBQSxFQUFBQSxjQUFlLENBQUMsQ0FBQSxDQUFBO0FBQzVDLGFBQUE7WUFFQTVKLE9BQU8sQ0FBQ0UsTUFBTSxDQUFFLENBQWtCcEYsZ0JBQUFBLEVBQUFBLENBQUUsZUFBYzhPLGNBQWUsQ0FBQSxDQUFBLEVBQUdPLGVBQWdCLENBQUEsRUFBQSxDQUFHLENBQUMsQ0FBQTtZQUN4Rm5LLE9BQU8sQ0FBQ0UsTUFBTSxDQUFFLENBQUEsNkJBQUEsRUFBK0JwRixDQUFFLENBQVNBLE9BQUFBLEVBQUFBLENBQUUsb0JBQW1CLENBQUMsQ0FBQTtBQUNoRjtBQUNBO0FBQ0osV0FBQTtBQUNKLFNBQUE7O1FBRUEsSUFBSTBHLFVBQVUsS0FBS04sbUJBQW1CLEVBQUU7QUFFcEM7QUFDQSxVQUFBLElBQUloTixPQUFPLENBQUNvTSxjQUFjLElBQUlwTSxPQUFPLENBQUNrQyxXQUFXLEVBQUU7QUFDL0M0SixZQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyxrREFBa0QsR0FBR3BGLENBQUMsR0FBRyxRQUFRLElBQUkwTixhQUFhLEdBQUcsWUFBWSxHQUFHLEVBQUUsQ0FBQyxHQUFHLDJCQUEyQixDQUFDLENBQUE7QUFDekosV0FBQyxNQUFNO0FBQ0h4SSxZQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyxpREFBaUQsR0FBR3BGLENBQUMsR0FBRyxRQUFRLElBQUkwTixhQUFhLEdBQUcsWUFBWSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFBO0FBQ2hJLFdBQUE7QUFDSixTQUFDLE1BQU07QUFFSDtVQUNBLElBQUkxSCxhQUFhLElBQUk1TSxPQUFPLENBQUNvTSxjQUFjLElBQUlwTSxPQUFPLENBQUNrQyxXQUFXLEVBQUU7QUFDaEU0SixZQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyxzQ0FBc0MsR0FBR3BGLENBQUMsR0FBRyxRQUFRLElBQUkwTixhQUFhLEdBQUcsWUFBWSxHQUFHLEVBQUUsQ0FBQyxHQUFHLGtDQUFrQyxDQUFDLENBQUE7QUFDcEosV0FBQyxNQUFNO0FBQ0h4SSxZQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyxxQ0FBcUMsR0FBR3BGLENBQUMsR0FBRyxRQUFRLElBQUkwTixhQUFhLEdBQUcsWUFBWSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFBO0FBQ3BILFdBQUE7QUFDSixTQUFBO1FBRUEsSUFBSXRVLE9BQU8sQ0FBQ2tDLFdBQVcsRUFBRTtBQUNyQjRKLFVBQUFBLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDLHlEQUF5RCxDQUFDLENBQUE7QUFDN0UsU0FBQTs7QUFFQTtRQUNBLElBQUljLEtBQUssQ0FBQ3FKLGlCQUFpQixFQUFFO1VBQ3pCLElBQUk3SSxVQUFVLEtBQUtOLG1CQUFtQixFQUFFO0FBRXBDO1lBQ0EsSUFBSWhOLE9BQU8sQ0FBQ2tNLFlBQVksRUFBRTtBQUN0QkosY0FBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUUsQ0FBNENrSiwwQ0FBQUEsRUFBQUEsV0FBWSwyRUFBMEV0TyxDQUFFLENBQUEsTUFBQSxDQUFPLElBQUkwTixhQUFhLEdBQUcsWUFBWSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFBO0FBQzVNLGFBQUE7WUFDQSxJQUFJdFUsT0FBTyxDQUFDa0MsV0FBVyxFQUFFO0FBQ3JCNEosY0FBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUUsQ0FBMENrSix3Q0FBQUEsRUFBQUEsV0FBWSxpRUFBZ0V0TyxDQUFFLENBQUEsTUFBQSxDQUFPLElBQUkwTixhQUFhLEdBQUcsWUFBWSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFBO0FBQ2hNLGFBQUE7QUFFSixXQUFDLE1BQU07WUFDSCxJQUFJOEIsV0FBVyxHQUFHLEtBQUssQ0FBQTtZQUN2QixJQUFJbk0sU0FBUyxLQUFLRSxxQkFBcUIsSUFBSW5LLE9BQU8sQ0FBQ21NLFlBQVksR0FBRyxDQUFDLEVBQUU7QUFDakVpSyxjQUFBQSxXQUFXLEdBQUcsSUFBSSxDQUFBO0FBQ3RCLGFBQUE7O0FBRUE7WUFDQSxJQUFJcFcsT0FBTyxDQUFDa00sWUFBWSxFQUFFO2NBQ3RCSixPQUFPLENBQUNFLE1BQU0sQ0FBRSxDQUFBLHdLQUFBLEVBQTBLcEYsQ0FBRSxDQUFPLE1BQUEsQ0FBQSxJQUM5TDBOLGFBQWEsR0FBRyxZQUFZLEdBQUcsRUFBRSxDQUFDLElBQ2xDOEIsV0FBVyxHQUFHLDZDQUE2QyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUE7QUFDNUUsYUFBQTtZQUNBLElBQUlwVyxPQUFPLENBQUNxTSxRQUFRLEVBQUU7QUFDbEJQLGNBQUFBLE9BQU8sQ0FBQ0UsTUFBTSxDQUFFLENBQUEsNElBQUEsRUFBOElwRixDQUFFLENBQUEsTUFBQSxDQUFPLElBQ2xLME4sYUFBYSxHQUFHLGFBQWEsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFBO0FBQzlDLGFBQUE7WUFDQSxJQUFJdFUsT0FBTyxDQUFDa0MsV0FBVyxFQUFFO0FBQ3JCNEosY0FBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUUsQ0FBQSxrSkFBQSxFQUFvSnBGLENBQUUsQ0FBTyxNQUFBLENBQUEsSUFDeEswTixhQUFhLEdBQUcsWUFBWSxHQUFHLEVBQUUsQ0FBQyxJQUNsQzhCLFdBQVcsR0FBSSxDQUFBO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBdUMsQ0FBQSxHQUFJLENBQXVCLHNCQUFBLENBQUEsQ0FBQyxDQUFDLENBQUE7QUFDNUMsYUFBQTtBQUNKLFdBQUE7QUFDSixTQUFBO1FBRUEsSUFBSW5NLFNBQVMsS0FBS0UscUJBQXFCLEVBQUU7QUFDckMyQixVQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUM1QixTQUFBO0FBQ0osT0FBQTs7QUFFQTtBQUNBLE1BQUEsSUFBSWhNLE9BQU8sQ0FBQzhCLHdCQUF3QixJQUFJLElBQUksQ0FBQ0osUUFBUSxFQUFFO0FBQ25Ed1MsUUFBQUEsaUJBQWlCLEdBQUcsSUFBSSxDQUFBO0FBQ3hCQyxRQUFBQSxxQkFBcUIsR0FBRyxJQUFJLENBQUE7QUFDNUJGLFFBQUFBLGNBQWMsR0FBRyxJQUFJLENBQUE7UUFDckJuSSxPQUFPLENBQUNFLE1BQU0sQ0FBRSxDQUFBO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBQSxDQUF1QyxDQUFDLENBQUE7QUFDNUIsT0FBQTtBQUVBLE1BQUEsSUFBSVksYUFBYSxFQUFFO0FBQ2Y7UUFDQSxJQUFJNU0sT0FBTyxDQUFDa00sWUFBWSxFQUFFO0FBQ3RCSixVQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQywwQ0FBMEMsQ0FBQyxDQUFBO0FBQzlELFNBQUE7UUFDQSxJQUFJaE0sT0FBTyxDQUFDa0MsV0FBVyxFQUFFO0FBQ3JCNEosVUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsb0NBQW9DLENBQUMsQ0FBQTtBQUN4RCxTQUFBO0FBQ0osT0FBQTtNQUVBLElBQUloTSxPQUFPLENBQUNxUixhQUFhLEVBQUU7UUFDdkJ2RixPQUFPLENBQUNFLE1BQU0sQ0FBRSxDQUFBO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFBLENBQXVCLENBQUMsQ0FBQTtBQUNaLE9BQUE7QUFDSixLQUFBO0lBRUEsSUFBSWhNLE9BQU8sQ0FBQzJQLEtBQUssRUFBRTtNQUNmLElBQUkzUCxPQUFPLENBQUNnVixhQUFhLEVBQUU7QUFDdkJsSixRQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFBO0FBQ3JELE9BQUE7TUFDQSxJQUFJaE0sT0FBTyxDQUFDNlAsZUFBZSxLQUFLQyxVQUFVLElBQUk5UCxPQUFPLENBQUM2UCxlQUFlLEtBQUtLLHNCQUFzQixFQUFFO0FBQzlGcEUsUUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsaUZBQWlGLENBQUMsQ0FBQTtBQUNyRyxPQUFBO0FBQ0osS0FBQTtJQUVBLElBQUloTSxPQUFPLENBQUNpVixvQkFBb0IsRUFBRTtBQUM5Qm5KLE1BQUFBLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDLGtEQUFrRCxDQUFDLENBQUE7QUFDdEUsS0FBQTtBQUVBLElBQUEsSUFBSWhNLE9BQU8sQ0FBQytMLG9CQUFvQixLQUFLLEtBQUssRUFBRTtNQUN4QyxJQUFJL0wsT0FBTyxDQUFDcVcsU0FBUyxLQUFLQyxZQUFZLElBQUl0VyxPQUFPLENBQUNxVyxTQUFTLEtBQUtFLG1CQUFtQixFQUFFO0FBQ2pGekssUUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsMEdBQTBHLENBQUMsQ0FBQTtBQUMxSEYsUUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsb0xBQW9MLENBQUMsQ0FBQTtBQUNwTUYsUUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsa0ZBQWtGLENBQUMsQ0FBQTtBQUN0RyxPQUFBO0FBQ0FGLE1BQUFBLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDLHdDQUF3QyxDQUFDLENBQUE7QUFDNUQsS0FBQTtBQUVBRixJQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQytWLEtBQUssQ0FBQyxDQUFBO0FBQzVCLElBQUEsSUFBSXhXLE9BQU8sQ0FBQ3FXLFNBQVMsS0FBS0MsWUFBWSxJQUFJdFcsT0FBTyxDQUFDcVcsU0FBUyxLQUFLSSxtQkFBbUIsSUFBSXpXLE9BQU8sQ0FBQzBXLGVBQWUsRUFBRTtBQUM1RzVLLE1BQUFBLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDdkwsTUFBTSxDQUFDa1csYUFBYSxDQUFDLENBQUE7QUFDeEMsS0FBQyxNQUFNLElBQUkzVyxPQUFPLENBQUNxVyxTQUFTLEtBQUtFLG1CQUFtQixFQUFFO0FBQ2xEekssTUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUN2TCxNQUFNLENBQUNtVyxtQkFBbUIsQ0FBQyxDQUFBO0FBQzlDLEtBQUMsTUFBTTtBQUNIOUssTUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUN2TCxNQUFNLENBQUNvVyxtQkFBbUIsQ0FBQyxDQUFBO0FBQzlDLEtBQUE7SUFFQSxJQUFJN1csT0FBTyxDQUFDZ0gsT0FBTyxFQUFFO0FBQ2pCOEUsTUFBQUEsT0FBTyxDQUFDRSxNQUFNLENBQUMsNkNBQTZDLENBQUMsQ0FBQTtBQUNqRSxLQUFBO0FBRUFGLElBQUFBLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDdkwsTUFBTSxDQUFDcVcsUUFBUSxDQUFDLENBQUE7QUFDL0JoTCxJQUFBQSxPQUFPLENBQUNFLE1BQU0sQ0FBQ3ZMLE1BQU0sQ0FBQ3NXLGFBQWEsQ0FBQyxDQUFBO0FBRXBDLElBQUEsSUFBSTlDLGNBQWMsRUFBRTtBQUNoQnBJLE1BQUFBLElBQUksQ0FBQ21MLE9BQU8sQ0FBQ3ZXLE1BQU0sQ0FBQ3dXLGVBQWUsQ0FBQyxDQUFBO0FBQ3hDLEtBQUE7QUFDQSxJQUFBLElBQUkvQyxpQkFBaUIsRUFBRTtBQUNuQnJJLE1BQUFBLElBQUksQ0FBQ21MLE9BQU8sQ0FBQ3ZXLE1BQU0sQ0FBQ3lXLGVBQWUsQ0FBQyxDQUFBO0FBQ3hDLEtBQUE7QUFDQSxJQUFBLElBQUkvQyxxQkFBcUIsRUFBRTtBQUN2QnRJLE1BQUFBLElBQUksQ0FBQ21MLE9BQU8sQ0FBQ3ZXLE1BQU0sQ0FBQzBXLG1CQUFtQixDQUFDLENBQUE7QUFDNUMsS0FBQTtBQUNBLElBQUEsSUFBSS9DLFFBQVEsRUFBRTtBQUNWdkksTUFBQUEsSUFBSSxDQUFDbUwsT0FBTyxDQUFDdlcsTUFBTSxDQUFDMlcsTUFBTSxDQUFDLENBQUE7QUFDL0IsS0FBQTtBQUNBLElBQUEsSUFBSS9DLFVBQVUsSUFBSSxDQUFDclUsT0FBTyxDQUFDOEIsd0JBQXdCLEVBQUU7QUFDakQ7QUFDQStKLE1BQUFBLElBQUksQ0FBQ21MLE9BQU8sQ0FBQ3ZXLE1BQU0sQ0FBQzRXLFFBQVEsQ0FBQyxDQUFBO0FBQ2pDLEtBQUE7SUFDQSxJQUFJQyxVQUFVLEdBQUcsRUFBRSxDQUFBO0FBRW5CLElBQUEsTUFBTUMsV0FBVyxHQUFJLENBQUEsMEJBQUEsRUFBNEJ6TCxPQUFPLENBQUN6SSxJQUFLLENBQUksR0FBQSxDQUFBLENBQUE7QUFDbEV3SSxJQUFBQSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3VMLFdBQVcsQ0FBQyxDQUFBO0FBRXhCbFUsSUFBQUEsSUFBSSxDQUFDMkksTUFBTSxDQUFDdkwsTUFBTSxDQUFDK1csc0JBQXNCLENBQUMsQ0FBQTtBQUUxQ25VLElBQUFBLElBQUksQ0FBQzJJLE1BQU0sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFBO0lBRXJDM0ksSUFBSSxDQUFDMkksTUFBTSxDQUFDbEQsZUFBZSxDQUFDZSxHQUFHLEVBQUUsQ0FBQyxDQUFBO0FBRWxDLElBQUEsTUFBTTROLFVBQVUsR0FBRzlMLElBQUksQ0FBQ3RJLElBQUksR0FBR3dJLElBQUksQ0FBQ3hJLElBQUksR0FBR0EsSUFBSSxDQUFDQSxJQUFJLENBQUE7O0FBRXBEO0lBQ0EsSUFBSW9VLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFSixVQUFVLElBQUksY0FBYyxDQUFBO0lBQzdELElBQUlHLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDLGdCQUFnQixDQUFDLEVBQUVKLFVBQVUsSUFBSSx3QkFBd0IsQ0FBQTtJQUNqRixJQUFJRyxVQUFVLENBQUNDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRUosVUFBVSxJQUFJLG1CQUFtQixDQUFBO0lBQ3ZFLElBQUlHLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDLFlBQVksQ0FBQyxFQUFFSixVQUFVLElBQUksb0JBQW9CLENBQUE7SUFDekUsSUFBSUcsVUFBVSxDQUFDQyxRQUFRLENBQUMsV0FBVyxDQUFDLEVBQUVKLFVBQVUsSUFBSSxtQkFBbUIsQ0FBQTtJQUN2RSxJQUFJRyxVQUFVLENBQUNDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRUosVUFBVSxJQUFJLG1CQUFtQixDQUFBO0lBQ3ZFLElBQUlHLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFFSixVQUFVLElBQUksbUJBQW1CLENBQUE7SUFDdkUsSUFBSUcsVUFBVSxDQUFDQyxRQUFRLENBQUMsWUFBWSxDQUFDLEVBQUVKLFVBQVUsSUFBSSxvQkFBb0IsQ0FBQTs7QUFFekU7SUFDQSxJQUFJRyxVQUFVLENBQUNDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFSixVQUFVLElBQUksd0JBQXdCLENBQUE7SUFDakYsSUFBSUcsVUFBVSxDQUFDQyxRQUFRLENBQUMsWUFBWSxDQUFDLEVBQUVKLFVBQVUsSUFBSSxvQkFBb0IsQ0FBQTtJQUN6RSxJQUFJRyxVQUFVLENBQUNDLFFBQVEsQ0FBQyxZQUFZLENBQUMsRUFBRUosVUFBVSxJQUFJLG9CQUFvQixDQUFBO0lBQ3pFLElBQUlHLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDLGNBQWMsQ0FBQyxFQUFFSixVQUFVLElBQUksc0JBQXNCLENBQUE7O0FBRTdFO0lBQ0EsSUFBSUcsVUFBVSxDQUFDQyxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUVKLFVBQVUsSUFBSSxxQkFBcUIsQ0FBQTtJQUMzRSxJQUFJRyxVQUFVLENBQUNDLFFBQVEsQ0FBQyxlQUFlLENBQUMsRUFBRUosVUFBVSxJQUFJLHVCQUF1QixDQUFBO0lBQy9FLElBQUlHLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDLGdCQUFnQixDQUFDLEVBQUVKLFVBQVUsSUFBSSx3QkFBd0IsQ0FBQTtJQUNqRixJQUFJRyxVQUFVLENBQUNDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRUosVUFBVSxJQUFJLGlCQUFpQixDQUFBO0lBQ2xFLElBQUlHLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFFSixVQUFVLElBQUksa0JBQWtCLENBQUM7SUFDckUsSUFBSUcsVUFBVSxDQUFDQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUVKLFVBQVUsSUFBSSxpQkFBaUIsQ0FBQTtJQUNuRSxJQUFJRyxVQUFVLENBQUNDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRUosVUFBVSxJQUFJLGVBQWUsQ0FBQTtJQUMvRCxJQUFJRyxVQUFVLENBQUNDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRUosVUFBVSxJQUFJLG9CQUFvQixDQUFBO0lBQ3hFLElBQUlHLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDLGNBQWMsQ0FBQyxFQUFFSixVQUFVLElBQUksc0JBQXNCLENBQUE7SUFDN0UsSUFBSUcsVUFBVSxDQUFDQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsRUFBRUosVUFBVSxJQUFJLHlCQUF5QixDQUFBO0lBQ25GLElBQUlHLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDLHFCQUFxQixDQUFDLEVBQUVKLFVBQVUsSUFBSSw4QkFBOEIsQ0FBQTtJQUM1RixJQUFJRyxVQUFVLENBQUNDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFSixVQUFVLElBQUksd0JBQXdCLENBQUE7SUFDakYsSUFBSUcsVUFBVSxDQUFDQyxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUVKLFVBQVUsSUFBSSxxQkFBcUIsQ0FBQTtBQUUzRSxJQUFBLE1BQU1sVCxNQUFNLEdBQUcsSUFBSSxDQUFDc0YsZUFBZSxFQUFFLEdBQ2pDLElBQUksQ0FBQy9HLFFBQVEsR0FDYixJQUFJLENBQUNDLGNBQWMsR0FDbkIsSUFBSSxDQUFDdUIsY0FBYyxFQUFFLEdBQ3JCbVQsVUFBVSxHQUNWLElBQUksQ0FBQ3hVLFlBQVksR0FDakIyVSxVQUFVLENBQUE7QUFFZCxJQUFBLE9BQU9yVCxNQUFNLENBQUE7QUFDakIsR0FBQTs7QUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSXVULHNCQUFzQkEsQ0FBQzdVLFlBQVksRUFBRUMsWUFBWSxFQUFFQyxZQUFZLEVBQUVDLFVBQVUsRUFBRTtBQUFBLElBQUEsSUFBQTJVLHFCQUFBLENBQUE7QUFDekUsSUFBQSxNQUFNNVgsT0FBTyxHQUFHLElBQUksQ0FBQ0EsT0FBTyxDQUFBO0lBRTVCLElBQUksQ0FBQzhDLFlBQVksR0FBR0EsWUFBWSxDQUFBO0lBQ2hDLElBQUksQ0FBQ0MsWUFBWSxHQUFHQSxZQUFZLENBQUE7SUFDaEMsSUFBSSxDQUFDQyxZQUFZLEdBQUdBLFlBQVksQ0FBQTtJQUNoQyxJQUFJLENBQUNDLFVBQVUsR0FBR0EsVUFBVSxDQUFBO0FBRTVCLElBQUEsSUFBSWpELE9BQU8sQ0FBQ3VCLElBQUksS0FBS3NXLFdBQVcsRUFBRTtBQUM5QixNQUFBLElBQUksQ0FBQzFVLE9BQU8sR0FBRyxJQUFJLENBQUN3RyxrQkFBa0IsRUFBRSxDQUFBO0FBQzVDLEtBQUMsTUFBTSxJQUFJM0osT0FBTyxDQUFDdUIsSUFBSSxLQUFLK0QsWUFBWSxFQUFFO0FBQ3RDLE1BQUEsSUFBSSxDQUFDbkMsT0FBTyxHQUFHLElBQUksQ0FBQzJHLG1CQUFtQixFQUFFLENBQUE7QUFDN0MsS0FBQyxNQUFNLElBQUksSUFBSSxDQUFDdEksVUFBVSxFQUFFO0FBQ3hCLE1BQUEsSUFBSSxDQUFDMkIsT0FBTyxHQUFHLElBQUksQ0FBQzZHLG9CQUFvQixFQUFFLENBQUE7QUFDOUMsS0FBQyxNQUFNLElBQUloSyxPQUFPLENBQUM4WCxvQkFBb0IsRUFBRTtNQUNyQyxJQUFJLENBQUMzVSxPQUFPLEdBQUcsSUFBSSxDQUFDdUcsZUFBZSxFQUFFLEdBQUcxSixPQUFPLENBQUM4WCxvQkFBb0IsQ0FBQTtBQUN4RSxLQUFDLE1BQU07QUFDSCxNQUFBLElBQUksQ0FBQzNVLE9BQU8sR0FBRyxJQUFJLENBQUN1SSxpQkFBaUIsRUFBRSxDQUFBO0FBQzNDLEtBQUE7SUFDQSxDQUFBa00scUJBQUEsT0FBSSxDQUFDRyxtQkFBbUIscUJBQXhCSCxxQkFBQSxDQUFBSSxJQUFBLENBQUEsSUFBMkIsQ0FBQyxDQUFBO0FBQ2hDLEdBQUE7QUFFQUMsRUFBQUEsYUFBYUEsR0FBRztJQUNaLE1BQU1DLFVBQVUsR0FBR0MsV0FBVyxDQUFDQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUNyWSxNQUFNLEVBQUU7QUFDekRPLE1BQUFBLElBQUksRUFBRSxXQUFXO01BQ2pCTCxVQUFVLEVBQUUsSUFBSSxDQUFDQSxVQUFVO01BQzNCb1ksVUFBVSxFQUFFLElBQUksQ0FBQ3hWLE9BQU87TUFDeEJ5VixZQUFZLEVBQUUsSUFBSSxDQUFDblYsT0FBQUE7QUFDdkIsS0FBQyxDQUFDLENBQUE7QUFFRixJQUFBLElBQUksSUFBSSxDQUFDaEMsY0FBYyxDQUFDb1gsU0FBUyxFQUFFO01BQy9CTCxVQUFVLENBQUNNLEdBQUcsR0FBR0Msa0JBQWtCLENBQUE7QUFDdkMsS0FBQTtBQUVBLElBQUEsT0FBT1AsVUFBVSxDQUFBO0FBQ3JCLEdBQUE7QUFDSjs7OzsifQ==
